var we=Object.defineProperty,ke=Object.defineProperties,Fe=Object.getOwnPropertyDescriptors,ce=Object.getOwnPropertySymbols,Re=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable,Zt=(rt,u,$)=>u in rt?we(rt,u,{enumerable:!0,configurable:!0,writable:!0,value:$}):rt[u]=$,te=(rt,u)=>{for(var $ in u||(u={}))Re.call(u,$)&&Zt(rt,$,u[$]);if(ce)for(var $ of ce(u))Me.call(u,$)&&Zt(rt,$,u[$]);return rt},ee=(rt,u)=>ke(rt,Fe(u)),Ot=(rt,u,$)=>(Zt(rt,"symbol"!=typeof u?u+"":u,$),$),ne=(rt,u,$)=>{if(!u.has(rt))throw TypeError("Cannot "+$)},E=(rt,u,$)=>(ne(rt,u,"read from private field"),$?$.call(rt):u.get(rt)),it=(rt,u,$)=>{if(u.has(rt))throw TypeError("Cannot add the same private member more than once");u instanceof WeakSet?u.add(rt):u.set(rt,$)},bt=(rt,u,$,_)=>(ne(rt,u,"write to private field"),_?_.call(rt,$):u.set(rt,$),$),se=(rt,u,$,_)=>({set _(x){bt(rt,u,x,$)},get _(){return E(rt,u,_)}}),ht=(rt,u,$)=>(ne(rt,u,"access private method"),$);(self.webpackChunkthe_f2e_fourth_week2=self.webpackChunkthe_f2e_fourth_week2||[]).push([[394],{8552:(module,__unused_webpack_exports,__webpack_require__)=>{var _asyncToGenerator=__webpack_require__(1052).default,$;globalThis,$=()=>(()=>{"use strict";var __webpack_modules__=[,(rt,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.VerbosityLevel=u.Util=u.UnknownErrorException=u.UnexpectedResponseException=u.UNSUPPORTED_FEATURES=u.TextRenderingMode=u.StreamType=u.RenderingIntentFlag=u.PermissionFlag=u.PasswordResponses=u.PasswordException=u.PageActionEventType=u.OPS=u.MissingPDFException=u.LINE_FACTOR=u.LINE_DESCENT_FACTOR=u.InvalidPDFException=u.ImageKind=u.IDENTITY_MATRIX=u.FormatError=u.FontType=u.FeatureTest=u.FONT_IDENTITY_MATRIX=u.DocumentActionEventType=u.CMapCompressionType=u.BaseException=u.AnnotationType=u.AnnotationStateModelType=u.AnnotationReviewState=u.AnnotationReplyType=u.AnnotationMode=u.AnnotationMarkedState=u.AnnotationFlag=u.AnnotationFieldFlag=u.AnnotationEditorType=u.AnnotationEditorPrefix=u.AnnotationEditorParamsType=u.AnnotationBorderStyleType=u.AnnotationActionEventType=u.AbortException=void 0,u.arrayByteLength=m,u.arraysToBytes=function(U){const D=U.length;if(1===D&&U[0]instanceof Uint8Array)return U[0];let W=0;for(let St=0;St<D;St++)W+=m(U[St]);let ft=0;const vt=new Uint8Array(W);for(let St=0;St<D;St++){let Et=U[St];Et instanceof Uint8Array||(Et="string"==typeof Et?b(Et):new Uint8Array(Et));const wt=Et.byteLength;vt.set(Et,ft),ft+=wt}return vt},u.assert=function(U,D){U||pt(D)},u.bytesToString=function(U){("object"!=typeof U||null===U||void 0===U.length)&&pt("Invalid argument for bytesToString");const D=U.length,W=8192;if(D<W)return String.fromCharCode.apply(null,U);const ft=[];for(let vt=0;vt<D;vt+=W){const St=Math.min(vt+W,D),Et=U.subarray(vt,St);ft.push(String.fromCharCode.apply(null,Et))}return ft.join("")},u.createPromiseCapability=function(){const U=Object.create(null);let D=!1;return Object.defineProperty(U,"settled",{get:()=>D}),U.promise=new Promise(function(W,ft){U.resolve=function(vt){D=!0,W(vt)},U.reject=function(vt){D=!0,ft(vt)}}),U},u.createValidAbsoluteUrl=function(U,D=null,W=null){if(!U)return null;try{if(W&&"string"==typeof U){if(W.addDefaultProtocol&&U.startsWith("www.")){const vt=U.match(/\./g);vt&&vt.length>=2&&(U=`http://${U}`)}if(W.tryConvertEncoding)try{U=xt(U)}catch(vt){}}const ft=D?new URL(U,D):new URL(U);if(function(U){if(!U)return!1;switch(U.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(ft))return ft}catch(ft){}return null},u.escapeString=function(U){return U.replace(/([()\\\n\r])/g,D=>"\n"===D?"\\n":"\r"===D?"\\r":`\\${D}`)},u.getModificationDate=function(U=new Date){return[U.getUTCFullYear().toString(),(U.getUTCMonth()+1).toString().padStart(2,"0"),U.getUTCDate().toString().padStart(2,"0"),U.getUTCHours().toString().padStart(2,"0"),U.getUTCMinutes().toString().padStart(2,"0"),U.getUTCSeconds().toString().padStart(2,"0")].join("")},u.getVerbosityLevel=function(){return tt},u.info=function(U){tt>=P.INFOS&&console.log(`Info: ${U}`)},u.isArrayBuffer=function(U){return"object"==typeof U&&null!==U&&void 0!==U.byteLength},u.isArrayEqual=function(U,D){if(U.length!==D.length)return!1;for(let W=0,ft=U.length;W<ft;W++)if(U[W]!==D[W])return!1;return!0},u.isAscii=function(U){return/^[\x00-\x7F]*$/.test(U)},u.objectFromMap=function(U){const D=Object.create(null);for(const[W,ft]of U)D[W]=ft;return D},u.objectSize=function(U){return Object.keys(U).length},u.setVerbosityLevel=function(U){Number.isInteger(U)&&(tt=U)},u.shadow=S,u.string32=function(U){return String.fromCharCode(U>>24&255,U>>16&255,U>>8&255,255&U)},u.stringToBytes=b,u.stringToPDFString=function(U){if(U[0]>="\xef"){let W;if("\xfe"===U[0]&&"\xff"===U[1]?W="utf-16be":"\xff"===U[0]&&"\xfe"===U[1]?W="utf-16le":"\xef"===U[0]&&"\xbb"===U[1]&&"\xbf"===U[2]&&(W="utf-8"),W)try{const ft=new TextDecoder(W,{fatal:!0}),vt=b(U);return ft.decode(vt)}catch(ft){ut(`stringToPDFString: "${ft}".`)}}const D=[];for(let W=0,ft=U.length;W<ft;W++){const vt=At[U.charCodeAt(W)];D.push(vt?String.fromCharCode(vt):U.charAt(W))}return D.join("")},u.stringToUTF16BEString=function(U){const D=["\xfe\xff"];for(let W=0,ft=U.length;W<ft;W++){const vt=U.charCodeAt(W);D.push(String.fromCharCode(vt>>8&255),String.fromCharCode(255&vt))}return D.join("")},u.stringToUTF8String=xt,u.unreachable=pt,u.utf8StringToString=function(U){return unescape(encodeURIComponent(U))},u.warn=ut,u.IDENTITY_MATRIX=[1,0,0,1,0,0],u.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],u.LINE_FACTOR=1.35,u.LINE_DESCENT_FACTOR=.35,u.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},u.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},u.AnnotationEditorPrefix="pdfjs_internal_editor_",u.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15},u.AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13},u.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},u.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},u.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},u.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},u.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},u.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},u.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},u.AnnotationReplyType={GROUP:"Group",REPLY:"R"},u.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},u.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},u.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},u.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},u.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},u.PageActionEventType={O:"PageOpen",C:"PageClose"},u.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},u.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const P={ERRORS:0,WARNINGS:1,INFOS:5};u.VerbosityLevel=P,u.CMapCompressionType={NONE:0,BINARY:1},u.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},u.UNSUPPORTED_FEATURES={forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},u.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let tt=P.WARNINGS;function ut(U){tt>=P.WARNINGS&&console.log(`Warning: ${U}`)}function pt(U){throw new Error(U)}function S(U,D,W){return Object.defineProperty(U,D,{value:W,enumerable:!0,configurable:!0,writable:!1}),W}const k=function(){function D(W,ft){this.constructor===D&&pt("Cannot initialize BaseException."),this.message=W,this.name=ft}return D.prototype=new Error,D.constructor=D,D}();function b(U){"string"!=typeof U&&pt("Invalid argument for stringToBytes");const D=U.length,W=new Uint8Array(D);for(let ft=0;ft<D;++ft)W[ft]=255&U.charCodeAt(ft);return W}function m(U){return void 0!==U.length?U.length:void 0!==U.byteLength?U.byteLength:void pt("Invalid argument for arrayByteLength")}u.BaseException=k,u.PasswordException=class extends k{constructor(D,W){super(D,"PasswordException"),this.code=W}},u.UnknownErrorException=class extends k{constructor(D,W){super(D,"UnknownErrorException"),this.details=W}},u.InvalidPDFException=class extends k{constructor(D){super(D,"InvalidPDFException")}},u.MissingPDFException=class extends k{constructor(D){super(D,"MissingPDFException")}},u.UnexpectedResponseException=class extends k{constructor(D,W){super(D,"UnexpectedResponseException"),this.status=W}},u.FormatError=class extends k{constructor(D){super(D,"FormatError")}},u.AbortException=class extends k{constructor(D){super(D,"AbortException")}},u.FeatureTest=class{static get isLittleEndian(){return S(this,"isLittleEndian",function(){const U=new Uint8Array(4);return U[0]=1,1===new Uint32Array(U.buffer,0,1)[0]}())}static get isEvalSupported(){return S(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(U){return!1}}())}static get isOffscreenCanvasSupported(){return S(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}};const B=[...Array(256).keys()].map(U=>U.toString(16).padStart(2,"0"));class mt{static makeHexColor(D,W,ft){return`#${B[D]}${B[W]}${B[ft]}`}static scaleMinMax(D,W){let ft;D[0]?(D[0]<0&&(ft=W[0],W[0]=W[1],W[1]=ft),W[0]*=D[0],W[1]*=D[0],D[3]<0&&(ft=W[2],W[2]=W[3],W[3]=ft),W[2]*=D[3],W[3]*=D[3]):(ft=W[0],W[0]=W[2],W[2]=ft,ft=W[1],W[1]=W[3],W[3]=ft,D[1]<0&&(ft=W[2],W[2]=W[3],W[3]=ft),W[2]*=D[1],W[3]*=D[1],D[2]<0&&(ft=W[0],W[0]=W[1],W[1]=ft),W[0]*=D[2],W[1]*=D[2]),W[0]+=D[4],W[1]+=D[4],W[2]+=D[5],W[3]+=D[5]}static transform(D,W){return[D[0]*W[0]+D[2]*W[1],D[1]*W[0]+D[3]*W[1],D[0]*W[2]+D[2]*W[3],D[1]*W[2]+D[3]*W[3],D[0]*W[4]+D[2]*W[5]+D[4],D[1]*W[4]+D[3]*W[5]+D[5]]}static applyTransform(D,W){return[D[0]*W[0]+D[1]*W[2]+W[4],D[0]*W[1]+D[1]*W[3]+W[5]]}static applyInverseTransform(D,W){const ft=W[0]*W[3]-W[1]*W[2];return[(D[0]*W[3]-D[1]*W[2]+W[2]*W[5]-W[4]*W[3])/ft,(-D[0]*W[1]+D[1]*W[0]+W[4]*W[1]-W[5]*W[0])/ft]}static getAxialAlignedBoundingBox(D,W){const ft=mt.applyTransform(D,W),vt=mt.applyTransform(D.slice(2,4),W),St=mt.applyTransform([D[0],D[3]],W),Et=mt.applyTransform([D[2],D[1]],W);return[Math.min(ft[0],vt[0],St[0],Et[0]),Math.min(ft[1],vt[1],St[1],Et[1]),Math.max(ft[0],vt[0],St[0],Et[0]),Math.max(ft[1],vt[1],St[1],Et[1])]}static inverseTransform(D){const W=D[0]*D[3]-D[1]*D[2];return[D[3]/W,-D[1]/W,-D[2]/W,D[0]/W,(D[2]*D[5]-D[4]*D[3])/W,(D[4]*D[1]-D[5]*D[0])/W]}static singularValueDecompose2dScale(D){const W=[D[0],D[2],D[1],D[3]],ft=D[0]*W[0]+D[1]*W[2],Et=D[2]*W[1]+D[3]*W[3],wt=(ft+Et)/2,Rt=Math.sqrt((ft+Et)**2-4*(ft*Et-(D[2]*W[0]+D[3]*W[2])*(D[0]*W[1]+D[1]*W[3])))/2,Pt=wt-Rt||1;return[Math.sqrt(wt+Rt||1),Math.sqrt(Pt)]}static normalizeRect(D){const W=D.slice(0);return D[0]>D[2]&&(W[0]=D[2],W[2]=D[0]),D[1]>D[3]&&(W[1]=D[3],W[3]=D[1]),W}static intersect(D,W){const ft=Math.max(Math.min(D[0],D[2]),Math.min(W[0],W[2])),vt=Math.min(Math.max(D[0],D[2]),Math.max(W[0],W[2]));if(ft>vt)return null;const St=Math.max(Math.min(D[1],D[3]),Math.min(W[1],W[3])),Et=Math.min(Math.max(D[1],D[3]),Math.max(W[1],W[3]));return St>Et?null:[ft,St,vt,Et]}static bezierBoundingBox(D,W,ft,vt,St,Et,wt,Rt){const It=[],Pt=[[],[]];let kt,Lt,jt,Dt,Bt,Nt,qt,$t;for(let zt=0;zt<2;++zt)if(0===zt?(Lt=6*D-12*ft+6*St,kt=-3*D+9*ft-9*St+3*wt,jt=3*ft-3*D):(Lt=6*W-12*vt+6*Et,kt=-3*W+9*vt-9*Et+3*Rt,jt=3*vt-3*W),Math.abs(kt)<1e-12){if(Math.abs(Lt)<1e-12)continue;Dt=-jt/Lt,0<Dt&&Dt<1&&It.push(Dt)}else qt=Lt*Lt-4*jt*kt,$t=Math.sqrt(qt),!(qt<0)&&(Bt=(-Lt+$t)/(2*kt),0<Bt&&Bt<1&&It.push(Bt),Nt=(-Lt-$t)/(2*kt),0<Nt&&Nt<1&&It.push(Nt));let Ut,Gt=It.length;const Xt=Gt;for(;Gt--;)Dt=It[Gt],Ut=1-Dt,Pt[0][Gt]=Ut*Ut*Ut*D+3*Ut*Ut*Dt*ft+3*Ut*Dt*Dt*St+Dt*Dt*Dt*wt,Pt[1][Gt]=Ut*Ut*Ut*W+3*Ut*Ut*Dt*vt+3*Ut*Dt*Dt*Et+Dt*Dt*Dt*Rt;return Pt[0][Xt]=D,Pt[1][Xt]=W,Pt[0][Xt+1]=wt,Pt[1][Xt+1]=Rt,Pt[0].length=Pt[1].length=Xt+2,[Math.min(...Pt[0]),Math.min(...Pt[1]),Math.max(...Pt[0]),Math.max(...Pt[1])]}}u.Util=mt;const At=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function xt(U){return decodeURIComponent(escape(U))}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var rt,$,_,x,z,G,F,N,v,A,T,he,f,h;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(12),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:i,NodeCMapReaderFactory:e,NodeStandardFontDataFactory:r}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=i,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=e,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=r}function setPDFNetworkStreamFactory(i){createPDFNetworkStream=i}function getDocument(i){const e=new PDFDocumentLoadingTask;let r;if("string"==typeof i||i instanceof URL)r={url:i};else if((0,_util.isArrayBuffer)(i))r={data:i};else if(i instanceof PDFDataRangeTransport)r={range:i};else{if("object"!=typeof i)throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!i.url&&!i.data&&!i.range)throw new Error("Invalid parameter object: need either .data, .range or .url");r=i}const o=Object.create(null);let a=null,t=null;for(const p in r){const C=r[p];switch(p){case"url":if("undefined"!=typeof window)try{o[p]=new URL(C,window.location).href;continue}catch(R){(0,_util.warn)(`Cannot create valid URL: "${R}".`)}else if("string"==typeof C||C instanceof URL){o[p]=C.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":a=C;continue;case"worker":t=C;continue;case"data":if(_is_node.isNodeJS&&"undefined"!=typeof Buffer&&C instanceof Buffer)o[p]=new Uint8Array(C);else{if(C instanceof Uint8Array)break;if("string"==typeof C)o[p]=(0,_util.stringToBytes)(C);else if("object"!=typeof C||null===C||isNaN(C.length)){if(!(0,_util.isArrayBuffer)(C))throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.");o[p]=new Uint8Array(C)}else o[p]=new Uint8Array(C)}continue}o[p]=C}if(o.CMapReaderFactory=o.CMapReaderFactory||DefaultCMapReaderFactory,o.StandardFontDataFactory=o.StandardFontDataFactory||DefaultStandardFontDataFactory,o.ignoreErrors=!0!==o.stopAtErrors,o.fontExtraProperties=!0===o.fontExtraProperties,o.pdfBug=!0===o.pdfBug,o.enableXfa=!0===o.enableXfa,(!Number.isInteger(o.rangeChunkSize)||o.rangeChunkSize<1)&&(o.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),("string"!=typeof o.docBaseUrl||(0,_display_utils.isDataScheme)(o.docBaseUrl))&&(o.docBaseUrl=null),(!Number.isInteger(o.maxImageSize)||o.maxImageSize<-1)&&(o.maxImageSize=-1),"string"!=typeof o.cMapUrl&&(o.cMapUrl=null),"string"!=typeof o.standardFontDataUrl&&(o.standardFontDataUrl=null),"boolean"!=typeof o.useWorkerFetch&&(o.useWorkerFetch=o.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&o.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!=typeof o.isEvalSupported&&(o.isEvalSupported=!0),"boolean"!=typeof o.isOffscreenCanvasSupported&&(o.isOffscreenCanvasSupported=!_is_node.isNodeJS),"boolean"!=typeof o.disableFontFace&&(o.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof o.useSystemFonts&&(o.useSystemFonts=!_is_node.isNodeJS&&!o.disableFontFace),("object"!=typeof o.ownerDocument||null===o.ownerDocument)&&(o.ownerDocument=globalThis.document),"boolean"!=typeof o.disableRange&&(o.disableRange=!1),"boolean"!=typeof o.disableStream&&(o.disableStream=!1),"boolean"!=typeof o.disableAutoFetch&&(o.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(o.verbosity),!t){const p={verbosity:o.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};t=p.port?PDFWorker.fromPort(p):new PDFWorker(p),e._worker=t}const s=e.docId;return t.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");const p=_fetchDocument(t,o,a,s),C=new Promise(function(R){let g;a?g=new _transport_stream.PDFDataTransportStream({length:o.length,initialData:o.initialData,progressiveDone:o.progressiveDone,contentDispositionFilename:o.contentDispositionFilename,disableRange:o.disableRange,disableStream:o.disableStream},a):o.data||(g=createPDFNetworkStream({url:o.url,length:o.length,httpHeaders:o.httpHeaders,withCredentials:o.withCredentials,rangeChunkSize:o.rangeChunkSize,disableRange:o.disableRange,disableStream:o.disableStream})),R(g)});return Promise.all([p,C]).then(function([R,g]){if(e.destroyed)throw new Error("Loading aborted");const P=new _message_handler.MessageHandler(s,R,t.port),Z=new WorkerTransport(P,e,g,o);e._transport=Z,P.send("Ready",null)})}).catch(e._capability.reject),e}function _fetchDocument(i,e,r,o){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(function*(i,e,r,o){if(i.destroyed)throw new Error("Worker was destroyed");r&&(e.length=r.length,e.initialData=r.initialData,e.progressiveDone=r.progressiveDone,e.contentDispositionFilename=r.contentDispositionFilename);const a=yield i.messageHandler.sendWithPromise("GetDocRequest",{docId:o,apiVersion:"3.0.279",data:e.data,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length,docBaseUrl:e.docBaseUrl,enableXfa:e.enableXfa,evaluatorOptions:{maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,ignoreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported,isOffscreenCanvasSupported:e.isOffscreenCanvasSupported,fontExtraProperties:e.fontExtraProperties,useSystemFonts:e.useSystemFonts,cMapUrl:e.useWorkerFetch?e.cMapUrl:null,standardFontDataUrl:e.useWorkerFetch?e.standardFontDataUrl:null}});if(e.data&&(e.data=null),i.destroyed)throw new Error("Worker was destroyed");return a})).apply(this,arguments)}const u=class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+se(u,rt)._++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){var e=this;return _asyncToGenerator(function*(){var r;e.destroyed=!0,yield null==(r=e._transport)?void 0:r.destroy(),e._transport=null,e._worker&&(e._worker.destroy(),e._worker=null)})()}};let PDFDocumentLoadingTask=u;rt=new WeakMap,it(PDFDocumentLoadingTask,rt,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(e,r,o=!1,a=null){this.length=e,this.initialData=r,this.progressiveDone=o,this.contentDispositionFilename=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,r){for(const o of this._rangeListeners)o(e,r)}onDataProgress(e,r){this._readyCapability.promise.then(()=>{for(const o of this._progressListeners)o(e,r)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const r of this._progressiveReadListeners)r(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,r){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,r){this._pdfInfo=e,this._transport=r}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(e,r,o,a,t=!1){this._pageIndex=e,this._pageInfo=r,this._ownerDocument=a,this._transport=o,this._stats=t?new _display_utils.StatTimer:null,this._pdfBug=t,this.commonObjs=o.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:r=this.rotate,offsetX:o=0,offsetY:a=0,dontFlip:t=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:r,offsetX:o,offsetY:a,dontFlip:t})}getAnnotations({intent:e="display"}={}){const r=this._transport.getRenderingIntent(e);let o=this._annotationPromises.get(r.cacheKey);return o||(o=this._transport.getAnnotations(this._pageIndex,r.renderingIntent),this._annotationPromises.set(r.cacheKey,o)),o}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}getXfa(){var e=this;return _asyncToGenerator(function*(){var r;return(null==(r=e._transport._htmlForXfa)?void 0:r.children[e._pageIndex])||null})()}render({canvasContext:e,viewport:r,intent:o="display",annotationMode:a=_util.AnnotationMode.ENABLE,transform:t=null,canvasFactory:s=null,background:p=null,optionalContentConfigPromise:C=null,annotationCanvasMap:R=null,pageColors:g=null,printAnnotationStorage:P=null}){var nt,ut;null==(nt=this._stats)||nt.time("Overall");const Z=this._transport.getRenderingIntent(o,a,P);this.pendingCleanup=!1,C||(C=this._transport.getOptionalContentConfig());let dt=this._intentStates.get(Z.cacheKey);dt||(dt=Object.create(null),this._intentStates.set(Z.cacheKey,dt)),dt.streamReaderCancelTimeout&&(clearTimeout(dt.streamReaderCancelTimeout),dt.streamReaderCancelTimeout=null);const ot=s||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),at=!!(Z.renderingIntent&_util.RenderingIntentFlag.PRINT);dt.displayReadyCapability||(dt.displayReadyCapability=(0,_util.createPromiseCapability)(),dt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null==(ut=this._stats)||ut.time("Page Request"),this._pumpOperatorList(Z));const tt=pt=>{var I,d;dt.renderTasks.delete(V),(this.cleanupAfterRender||at)&&(this.pendingCleanup=!0),this._tryCleanup(),pt?(V.capability.reject(pt),this._abortOperatorList({intentState:dt,reason:pt instanceof Error?pt:new Error(pt)})):V.capability.resolve(),null==(I=this._stats)||I.timeEnd("Rendering"),null==(d=this._stats)||d.timeEnd("Overall")},V=new InternalRenderTask({callback:tt,params:{canvasContext:e,viewport:r,transform:t,background:p},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:R,operatorList:dt.operatorList,pageIndex:this._pageIndex,canvasFactory:ot,useRequestAnimationFrame:!at,pdfBug:this._pdfBug,pageColors:g});(dt.renderTasks||(dt.renderTasks=new Set)).add(V);const q=V.task;return Promise.all([dt.displayReadyCapability.promise,C]).then(([pt,I])=>{var d;this.pendingCleanup?tt():(null==(d=this._stats)||d.time("Rendering"),V.initializeGraphics({transparency:pt,optionalContentConfig:I}),V.operatorListChanged())}).catch(tt),q}getOperatorList({intent:e="display",annotationMode:r=_util.AnnotationMode.ENABLE,printAnnotationStorage:o=null}={}){var C;const t=this._transport.getRenderingIntent(e,r,o,!0);let p,s=this._intentStates.get(t.cacheKey);return s||(s=Object.create(null),this._intentStates.set(t.cacheKey,s)),s.opListReadCapability||(p=Object.create(null),p.operatorListChanged=function(){s.operatorList.lastChunk&&(s.opListReadCapability.resolve(s.operatorList),s.renderTasks.delete(p))},s.opListReadCapability=(0,_util.createPromiseCapability)(),(s.renderTasks||(s.renderTasks=new Set)).add(p),s.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null==(C=this._stats)||C.time("Page Request"),this._pumpOperatorList(t)),s.opListReadCapability.promise}streamTextContent({disableCombineTextItems:e=!1,includeMarkedContent:r=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==e,includeMarkedContent:!0===r},{highWaterMark:100,size:a=>a.items.length})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(o=>_xfa_text.XfaText.textContent(o));const r=this.streamTextContent(e);return new Promise(function(o,a){const s=r.getReader(),p={items:[],styles:Object.create(null)};!function t(){s.read().then(function({value:C,done:R}){R?o(p):(Object.assign(p.styles,C.styles),p.items.push(...C.items),t())},a)}()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const e=[];for(const r of this._intentStates.values())if(this._abortOperatorList({intentState:r,reason:new Error("Page was destroyed."),force:!0}),!r.opListReadCapability)for(const o of r.renderTasks)e.push(o.completed),o.cancel();this.objs.clear();for(const r of this._bitmaps)r.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(e)}cleanup(e=!1){return this.pendingCleanup=!0,this._tryCleanup(e)}_tryCleanup(e=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:r,operatorList:o}of this._intentStates.values())if(r.size>0||!o.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,e&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const r of this._bitmaps)r.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(e,r){var a,t;const o=this._intentStates.get(r);!o||(null==(a=this._stats)||a.timeEnd("Page Request"),null==(t=o.displayReadyCapability)||t.resolve(e))}_renderPageChunk(e,r){for(let o=0,a=e.length;o<a;o++)r.operatorList.fnArray.push(e.fnArray[o]),r.operatorList.argsArray.push(e.argsArray[o]);r.operatorList.lastChunk=e.lastChunk,r.operatorList.separateAnnots=e.separateAnnots;for(const o of r.renderTasks)o.operatorListChanged();e.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:e,cacheKey:r,annotationStorageMap:o}){const t=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:r,annotationStorage:o}).getReader(),s=this._intentStates.get(r);s.streamReader=t;const p=()=>{t.read().then(({value:C,done:R})=>{R?s.streamReader=null:this._transport.destroyed||(this._renderPageChunk(C,s),p())},C=>{if(s.streamReader=null,!this._transport.destroyed){if(s.operatorList){s.operatorList.lastChunk=!0;for(const R of s.renderTasks)R.operatorListChanged();this._tryCleanup()}if(s.displayReadyCapability)s.displayReadyCapability.reject(C);else{if(!s.opListReadCapability)throw C;s.opListReadCapability.reject(C)}}})};p()}_abortOperatorList({intentState:e,reason:r,force:o=!1}){if(e.streamReader){if(!o){if(e.renderTasks.size>0)return;if(r instanceof _display_utils.RenderingCancelledException)return void(e.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:e,reason:r,force:!0}),e.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT))}if(e.streamReader.cancel(new _util.AbortException(r.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[a,t]of this._intentStates)if(t===e){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){it(this,$,[]),it(this,_,Promise.resolve())}postMessage(e,r){const o={data:structuredClone(e,r)};E(this,_).then(()=>{for(const a of E(this,$))a.call(this,o)})}addEventListener(e,r){E(this,$).push(r)}removeEventListener(e,r){const o=E(this,$).indexOf(r);E(this,$).splice(o,1)}terminate(){E(this,$).length=0}}$=new WeakMap,_=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const i=null==(x=null==document?void 0:document.currentScript)?void 0:x.src;i&&(PDFWorkerUtil.fallbackWorkerSrc=i.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(i,e){let r;try{if(r=new URL(i),!r.origin||"null"===r.origin)return!1}catch(a){return!1}const o=new URL(e,r);return r.origin===o.origin},PDFWorkerUtil.createCDNWrapper=function(i){return URL.createObjectURL(new Blob([`importScripts("${i}");`]))};const _PDFWorker=class{constructor({name:i=null,port:e=null,verbosity:r=(0,_util.getVerbosityLevel)()}={}){if(e&&E(_PDFWorker,z).has(e))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=i,this.destroyed=!1,this.verbosity=r,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,e)return E(_PDFWorker,z).set(e,this),void this._initializeFromPort(e);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(i){this._port=i,this._messageHandler=new _message_handler.MessageHandler("main","worker",i),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:i}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,i)||(i=PDFWorkerUtil.createCDNWrapper(new URL(i,window.location).href));const e=new Worker(i),r=new _message_handler.MessageHandler("main","worker",e),o=()=>{e.removeEventListener("error",a),r.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=()=>{this._webWorker||o()};e.addEventListener("error",a),r.on("test",s=>{e.removeEventListener("error",a),this.destroyed?o():s?(this._messageHandler=r,this._port=e,this._webWorker=e,this._readyCapability.resolve(),r.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),r.destroy(),e.terminate())}),r.on("ready",s=>{if(e.removeEventListener("error",a),this.destroyed)o();else try{t()}catch(p){this._setupFakeWorker()}});const t=()=>{const s=new Uint8Array;r.send("test",s,[s.buffer])};return void t()}catch(e){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(i=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const e=new LoopbackPort;this._port=e;const r="fake"+PDFWorkerUtil.fakeWorkerId++,o=new _message_handler.MessageHandler(r+"_worker",r,e);i.setup(o,e);const a=new _message_handler.MessageHandler(r,r+"_worker",e);this._messageHandler=a,this._readyCapability.resolve(),a.send("configure",{verbosity:this.verbosity})}).catch(i=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${i.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),E(_PDFWorker,z).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(i){if(!(null==i?void 0:i.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return E(this,z).has(i.port)?E(this,z).get(i.port):new _PDFWorker(i)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var i;try{return(null==(i=globalThis.pdfjsWorker)?void 0:i.WorkerMessageHandler)||null}catch(e){return null}}static get _setupFakeWorkerGlobal(){var _this3=this;const loader=function(){var _ref=_asyncToGenerator(function*(){const mainWorkerMessageHandler=_this3._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(_this3.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(_this3.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return function(){return _ref.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;z=new WeakMap,it(PDFWorker,z,new WeakMap),exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(e,r,o,a){it(this,G,null),it(this,F,new Map),it(this,N,new Map),it(this,v,null),this.messageHandler=e,this.loadingTask=r,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this._params=a,a.useWorkerFetch||(this.CMapReaderFactory=new a.CMapReaderFactory({baseUrl:a.cMapUrl,isCompressed:a.cMapPacked}),this.StandardFontDataFactory=new a.StandardFontDataFactory({baseUrl:a.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=o,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return E(this,G)}getRenderingIntent(e,r=_util.AnnotationMode.ENABLE,o=null,a=!1){let t=_util.RenderingIntentFlag.DISPLAY,s=null;switch(e){case"any":t=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":t=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(r){case _util.AnnotationMode.DISABLE:t+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:t+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:t+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,s=(t&_util.RenderingIntentFlag.PRINT&&o instanceof _annotation_storage.PrintAnnotationStorage?o:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${r}`)}return a&&(t+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:t,cacheKey:`${t}_${_annotation_storage.AnnotationStorage.getHash(s)}`,annotationStorageMap:s}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const o of E(this,F).values())e.push(o._destroy());E(this,F).clear(),E(this,N).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const r=this.messageHandler.sendWithPromise("Terminate",null);return e.push(r),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),bt(this,v,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:r}=this;e.on("GetReader",(o,a)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}},a.onPull=()=>{this._fullReader.read().then(function({value:t,done:s}){s?a.close():((0,_util.assert)((0,_util.isArrayBuffer)(t),"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(t),1,[t]))}).catch(t=>{a.error(t)})},a.onCancel=t=>{this._fullReader.cancel(t),a.ready.catch(s=>{if(!this.destroyed)throw s})}}),e.on("ReaderHeadersReady",o=>{const a=(0,_util.createPromiseCapability)(),t=this._fullReader;return t.headersReady.then(()=>{var s;(!t.isStreamingSupported||!t.isRangeSupported)&&(this._lastProgress&&(null==(s=r.onProgress)||s.call(r,this._lastProgress)),t.onProgress=p=>{var C;null==(C=r.onProgress)||C.call(r,{loaded:p.loaded,total:p.total})}),a.resolve({isStreamingSupported:t.isStreamingSupported,isRangeSupported:t.isRangeSupported,contentLength:t.contentLength})},a.reject),a.promise}),e.on("GetRangeReader",(o,a)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const t=this._networkStream.getRangeReader(o.begin,o.end);t?(a.onPull=()=>{t.read().then(function({value:s,done:p}){p?a.close():((0,_util.assert)((0,_util.isArrayBuffer)(s),"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(s),1,[s]))}).catch(s=>{a.error(s)})},a.onCancel=s=>{t.cancel(s),a.ready.catch(p=>{if(!this.destroyed)throw p})}):a.close()}),e.on("GetDoc",({pdfInfo:o})=>{this._numPages=o.numPages,this._htmlForXfa=o.htmlForXfa,delete o.htmlForXfa,r._capability.resolve(new PDFDocumentProxy(o,this))}),e.on("DocException",function(o){let a;switch(o.name){case"PasswordException":a=new _util.PasswordException(o.message,o.code);break;case"InvalidPDFException":a=new _util.InvalidPDFException(o.message);break;case"MissingPDFException":a=new _util.MissingPDFException(o.message);break;case"UnexpectedResponseException":a=new _util.UnexpectedResponseException(o.message,o.status);break;case"UnknownErrorException":a=new _util.UnknownErrorException(o.message,o.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}r._capability.reject(a)}),e.on("PasswordRequest",o=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),r.onPassword){const a=t=>{t instanceof Error?this._passwordCapability.reject(t):this._passwordCapability.resolve({password:t})};try{r.onPassword(a,o.code)}catch(t){this._passwordCapability.reject(t)}}else this._passwordCapability.reject(new _util.PasswordException(o.message,o.code));return this._passwordCapability.promise}),e.on("DataLoaded",o=>{var a;null==(a=r.onProgress)||a.call(r,{loaded:o.length,total:o.length}),this.downloadInfoCapability.resolve(o)}),e.on("StartRenderPage",o=>{this.destroyed||E(this,F).get(o.pageIndex)._startRenderPage(o.transparency,o.cacheKey)}),e.on("commonobj",([o,a,t])=>{var s;if(!this.destroyed&&!this.commonObjs.has(o))switch(a){case"Font":const p=this._params;if("error"in t){const g=t.error;(0,_util.warn)(`Error during font loading: ${g}`),this.commonObjs.resolve(o,g);break}let C=null;p.pdfBug&&(null==(s=globalThis.FontInspector)?void 0:s.enabled)&&(C={registerFont(g,P){globalThis.FontInspector.fontAdded(g,P)}});const R=new _font_loader.FontFaceObject(t,{isEvalSupported:p.isEvalSupported,disableFontFace:p.disableFontFace,ignoreErrors:p.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:C});this.fontLoader.bind(R).catch(g=>e.sendWithPromise("FontFallback",{id:o})).finally(()=>{!p.fontExtraProperties&&R.data&&(R.data=null),this.commonObjs.resolve(o,R)});break;case"FontPath":case"Image":this.commonObjs.resolve(o,t);break;default:throw new Error(`Got unknown common object type ${a}`)}}),e.on("obj",([o,a,t,s])=>{var C;if(this.destroyed)return;const p=E(this,F).get(a);if(!p.objs.has(o))switch(t){case"Image":p.objs.resolve(o,s);const R=8e6;if(s){let g;if(s.bitmap){const{bitmap:P,width:Z,height:dt}=s;g=Z*dt*4,p._bitmaps.add(P)}else g=(null==(C=s.data)?void 0:C.length)||0;g>R&&(p.cleanupAfterRender=!0)}break;case"Pattern":p.objs.resolve(o,s);break;default:throw new Error(`Got unknown object type ${t}`)}}),e.on("DocProgress",o=>{var a;this.destroyed||null==(a=r.onProgress)||a.call(r,{loaded:o.loaded,total:o.total})}),e.on("DocStats",o=>{this.destroyed||bt(this,G,Object.freeze({streamTypes:Object.freeze(o.streamTypes),fontTypes:Object.freeze(o.fontTypes)}))}),e.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),e.on("FetchBuiltInCMap",o=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(o):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",o=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(o):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:e}){var r,o;this.destroyed||null==(o=(r=this.loadingTask).onUnsupportedFeature)||o.call(r,e)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e,r;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:null!=(r=null==(e=this._fullReader)?void 0:e.filename)?r:null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const r=e-1,o=E(this,N).get(r);if(o)return o;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:r}).then(t=>{if(this.destroyed)throw new Error("Transport destroyed");const s=new PDFPageProxy(r,t,this,this._params.ownerDocument,this._params.pdfBug);return E(this,F).set(r,s),s});return E(this,N).set(r,a),a}getPageIndex(e){return"object"!=typeof e||null===e||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,r){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:r})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!=typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(e=>new _optional_content_config.OptionalContentConfig(e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return E(this,v)||bt(this,v,this.messageHandler.sendWithPromise("GetMetadata",null).then(e=>{var r,o,a,t;return{info:e[0],metadata:e[1]?new _metadata.Metadata(e[1]):null,contentDispositionFilename:null!=(o=null==(r=this._fullReader)?void 0:r.filename)?o:null,contentLength:null!=(t=null==(a=this._fullReader)?void 0:a.contentLength)?t:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(e=!1){var r=this;return _asyncToGenerator(function*(){if(!r.destroyed){yield r.messageHandler.sendWithPromise("Cleanup",null);for(const o of E(r,F).values())if(!o.cleanup())throw new Error(`startCleanup: Page ${o.pageNumber} is currently rendering.`);r.commonObjs.clear(),e||r.fontLoader.clear(),bt(r,v,null),r._getFieldObjectsPromise=null,r._hasJSActionsPromise=null}})()}get loadingParams(){const e=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e.disableAutoFetch,enableXfa:e.enableXfa})}}G=new WeakMap,F=new WeakMap,N=new WeakMap,v=new WeakMap;class PDFObjects{constructor(){it(this,T),it(this,A,Object.create(null))}get(e,r=null){if(r){const a=ht(this,T,he).call(this,e);return a.capability.promise.then(()=>r(a.data)),null}const o=E(this,A)[e];if(!(null==o?void 0:o.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${e}.`);return o.data}has(e){const r=E(this,A)[e];return(null==r?void 0:r.capability.settled)||!1}resolve(e,r=null){const o=ht(this,T,he).call(this,e);o.data=r,o.capability.resolve()}clear(){bt(this,A,Object.create(null))}}A=new WeakMap,T=new WeakSet,he=function(e){return E(this,A)[e]||(E(this,A)[e]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(e){it(this,f,null),bt(this,f,e),this.onContinue=null}get promise(){return E(this,f).capability.promise}cancel(){E(this,f).cancel()}get separateAnnots(){const{separateAnnots:e}=E(this,f).operatorList;if(!e)return!1;const{annotationCanvasMap:r}=E(this,f);return e.form||e.canvas&&(null==r?void 0:r.size)>0}}f=new WeakMap,exports.RenderTask=RenderTask;const c=class{constructor({callback:e,params:r,objs:o,commonObjs:a,annotationCanvasMap:t,operatorList:s,pageIndex:p,canvasFactory:C,useRequestAnimationFrame:R=!1,pdfBug:g=!1,pageColors:P=null}){this.callback=e,this.params=r,this.objs=o,this.commonObjs=a,this.annotationCanvasMap=t,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=p,this.canvasFactory=C,this._pdfBug=g,this.pageColors=P,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===R&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=r.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:r}){var p,C;if(this.cancelled)return;if(this._canvas){if(E(c,h).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");E(c,h).add(this._canvas)}this._pdfBug&&(null==(p=globalThis.StepperManager)?void 0:p.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:o,viewport:a,transform:t,background:s}=this.params;this.gfx=new _canvas.CanvasGraphics(o,this.commonObjs,this.objs,this.canvasFactory,r,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:t,viewport:a,transparency:e,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,null==(C=this.graphicsReadyCallback)||C.call(this)}cancel(e=null){var r;this.running=!1,this.cancelled=!0,null==(r=this.gfx)||r.endDrawing(),this._canvas&&E(c,h).delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){var e;this.graphicsReady?(null==(e=this.stepper)||e.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var e=this;return _asyncToGenerator(function*(){e.cancelled||(e.operatorListIdx=e.gfx.executeOperatorList(e.operatorList,e.operatorListIdx,e._continueBound,e.stepper),e.operatorListIdx===e.operatorList.argsArray.length&&(e.running=!1,e.operatorList.lastChunk&&(e.gfx.endDrawing(),e._canvas&&E(c,h).delete(e._canvas),e.callback())))})()}};let InternalRenderTask=c;h=new WeakMap,it(InternalRenderTask,h,new WeakSet);const version="3.0.279";exports.version=version;const build="d0823066c";exports.build=build},(rt,u,$)=>{var N,De,A;Object.defineProperty(u,"__esModule",{value:!0}),u.PrintAnnotationStorage=u.AnnotationStorage=void 0;var _=$(1),x=$(4),z=$(8);class G{constructor(){it(this,N),this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(y,f){const h=this._storage.get(y);return void 0===h?f:Object.assign(f,h)}getRawValue(y){return this._storage.get(y)}remove(y){if(this._storage.delete(y),0===this._storage.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const f of this._storage.values())if(f instanceof x.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(y,f){const h=this._storage.get(y);let c=!1;if(void 0!==h)for(const[i,e]of Object.entries(f))h[i]!==e&&(c=!0,h[i]=e);else c=!0,this._storage.set(y,f);c&&ht(this,N,De).call(this),f instanceof x.AnnotationEditor&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(f.constructor._type)}has(y){return this._storage.has(y)}getAll(){return this._storage.size>0?(0,_.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new F(this)}get serializable(){if(0===this._storage.size)return null;const y=new Map;for(const[f,h]of this._storage){const c=h instanceof x.AnnotationEditor?h.serialize():h;c&&y.set(f,c)}return y}static getHash(y){if(!y)return"";const f=new z.MurmurHash3_64;for(const[h,c]of y)f.update(`${h}:${JSON.stringify(c)}`);return f.hexdigest()}}N=new WeakSet,De=function(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())},u.AnnotationStorage=G;class F extends G{constructor(y){super(),it(this,A,null),bt(this,A,structuredClone(y.serializable))}get print(){(0,_.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return E(this,A)}}A=new WeakMap,u.PrintAnnotationStorage=F},(rt,u,$)=>{var G,F,N,v,A,T;Object.defineProperty(u,"__esModule",{value:!0}),u.AnnotationEditor=void 0;var _=$(5),x=$(1);const y=class{constructor(h){it(this,G,this.focusin.bind(this)),it(this,F,this.focusout.bind(this)),it(this,N,!1),it(this,v,!1),it(this,A,!1),it(this,T,y._zIndex++),this.constructor===y&&(0,x.unreachable)("Cannot initialize AnnotationEditor."),this.parent=h.parent,this.id=h.id,this.width=this.height=null,this.pageIndex=h.parent.pageIndex,this.name=h.name,this.div=null;const[c,i]=this.parent.viewportBaseDimensions;this.x=h.x/c,this.y=h.y/i,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,x.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=E(this,T)}focusin(h){E(this,N)?bt(this,N,!1):this.parent.setSelected(this)}focusout(h){if(!this.isAttachedToDOM)return;const c=h.relatedTarget;(null==c?void 0:c.closest(`#${this.id}`))||(h.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(h){const c=this.parent.div.getBoundingClientRect();this.startX=h.clientX-c.x,this.startY=h.clientY-c.y,h.dataTransfer.setData("text/plain",this.id),h.dataTransfer.effectAllowed="move"}setAt(h,c,i,e){const[r,o]=this.parent.viewportBaseDimensions;[i,e]=this.screenToPageTranslation(i,e),this.x=(h+i)/r,this.y=(c+e)/o,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}translate(h,c){const[i,e]=this.parent.viewportBaseDimensions;[h,c]=this.screenToPageTranslation(h,c),this.x+=h/i,this.y+=c/e,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}screenToPageTranslation(h,c){const{rotation:i}=this.parent.viewport;switch(i){case 90:return[c,-h];case 180:return[-h,-c];case 270:return[-c,h];default:return[h,c]}}setDims(h,c){const[i,e]=this.parent.viewportBaseDimensions;this.div.style.width=100*h/i+"%",this.div.style.height=100*c/e+"%"}fixDims(){const{style:h}=this.div,{height:c,width:i}=h,e=i.endsWith("%"),r=c.endsWith("%");if(e&&r)return;const[o,a]=this.parent.viewportBaseDimensions;e||(h.width=100*parseFloat(i)/o+"%"),r||(h.height=100*parseFloat(c)/a+"%")}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",E(this,G)),this.div.addEventListener("focusout",E(this,F));const[h,c]=this.getInitialTranslation();return this.translate(h,c),(0,_.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(h){const c=_.KeyboardManager.platform.isMac;0!==h.button||h.ctrlKey&&c?h.preventDefault():(h.ctrlKey&&!c||h.shiftKey||h.metaKey&&c?this.parent.toggleSelected(this):this.parent.setSelected(this),bt(this,N,!0))}getRect(h,c){const[i,e]=this.parent.viewportBaseDimensions,[r,o]=this.parent.pageDimensions,a=r*h/i,t=o*c/e,s=this.x*r,p=this.y*o,C=this.width*r,R=this.height*o;switch(this.rotation){case 0:return[s+a,o-p-t-R,s+a+C,o-p-t];case 90:return[s+t,o-p+a,s+t+R,o-p+a+C];case 180:return[s-a-C,o-p+t,s-a,o-p+t+R];case 270:return[s-t-R,o-p-a-C,s-t,o-p-a];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(h,c){const[i,e,r,o]=h,a=r-i,t=o-e;switch(this.rotation){case 0:return[i,c-o,a,t];case 90:return[i,c-e,t,a];case 180:return[r,c-e,a,t];case 270:return[r,c-o,t,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){bt(this,A,!0)}disableEditMode(){bt(this,A,!1)}isInEditMode(){return E(this,A)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var h;null==(h=this.div)||h.addEventListener("focusin",E(this,G))}serialize(){(0,x.unreachable)("An editor must be serializable")}static deserialize(h,c){const i=new this.prototype.constructor({parent:c,id:c.getNextId()});i.rotation=h.rotation;const[e,r]=c.pageDimensions,[o,a,t,s]=i.getRectInCurrentCoords(h.rect,r);return i.x=o/e,i.y=a/r,i.width=t/e,i.height=s/r,i}remove(){this.div.removeEventListener("focusin",E(this,G)),this.div.removeEventListener("focusout",E(this,F)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var h;null==(h=this.div)||h.classList.add("selectedEditor")}unselect(){var h;null==(h=this.div)||h.classList.remove("selectedEditor")}updateParams(h,c){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return E(this,v)}set isEditing(h){bt(this,v,h),h?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let z=y;G=new WeakMap,F=new WeakMap,N=new WeakMap,v=new WeakMap,A=new WeakMap,T=new WeakMap,Ot(z,"_colorManager",new _.ColorManager),Ot(z,"_zIndex",1),u.AnnotationEditor=z},(rt,u,$)=>{var y,f,h,c,i,e,Oe,t,s,p,C,R,g,P,Z,dt,ot,at,tt,V,q,nt,ut,pt,I,d,l,Ie,k,de,L,Le,K,Ne,Y,Ht,n,Jt,m,Ue,M,je,J,ue,et,Qt,B,fe;Object.defineProperty(u,"__esModule",{value:!0}),u.KeyboardManager=u.CommandManager=u.ColorManager=u.AnnotationEditorUIManager=void 0,u.bindEvents=function(yt,X,gt){for(const Ct of gt)X.addEventListener(Ct,yt[Ct].bind(yt))},u.opacityToHex=function(yt){return Math.round(Math.min(255,Math.max(1,255*yt))).toString(16).padStart(2,"0")};var _=$(1),x=$(6);class F{constructor(){it(this,y,0)}getId(){return`${_.AnnotationEditorPrefix}${se(this,y)._++}`}}y=new WeakMap;class N{constructor(X=128){it(this,f,[]),it(this,h,!1),it(this,c,void 0),it(this,i,-1),bt(this,c,X)}add({cmd:X,undo:gt,mustExec:Ct,type:xt=NaN,overwriteIfSameType:Mt=!1,keepUndo:Ft=!1}){if(Ct&&X(),E(this,h))return;const Tt={cmd:X,undo:gt,type:xt};if(-1===E(this,i))return E(this,f).length>0&&(E(this,f).length=0),bt(this,i,0),void E(this,f).push(Tt);if(Mt&&E(this,f)[E(this,i)].type===xt)return Ft&&(Tt.undo=E(this,f)[E(this,i)].undo),void(E(this,f)[E(this,i)]=Tt);const Wt=E(this,i)+1;Wt===E(this,c)?E(this,f).splice(0,1):(bt(this,i,Wt),Wt<E(this,f).length&&E(this,f).splice(Wt)),E(this,f).push(Tt)}undo(){-1!==E(this,i)&&(bt(this,h,!0),E(this,f)[E(this,i)].undo(),bt(this,h,!1),bt(this,i,E(this,i)-1))}redo(){E(this,i)<E(this,f).length-1&&(bt(this,i,E(this,i)+1),bt(this,h,!0),E(this,f)[E(this,i)].cmd(),bt(this,h,!1))}hasSomethingToUndo(){return-1!==E(this,i)}hasSomethingToRedo(){return E(this,i)<E(this,f).length-1}destroy(){bt(this,f,null)}}f=new WeakMap,h=new WeakMap,c=new WeakMap,i=new WeakMap,u.CommandManager=N;const o=class{constructor(X){it(this,e),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const gt=o.platform.isMac;for(const[Ct,xt]of X)for(const Mt of Ct){const Ft=Mt.startsWith("mac+");gt&&Ft?(this.callbacks.set(Mt.slice(4),xt),this.allKeys.add(Mt.split("+").at(-1))):!gt&&!Ft&&(this.callbacks.set(Mt,xt),this.allKeys.add(Mt.split("+").at(-1)))}}static get platform(){const X="undefined"!=typeof navigator?navigator.platform:"";return(0,_.shadow)(this,"platform",{isWin:X.includes("Win"),isMac:X.includes("Mac")})}exec(X,gt){if(!this.allKeys.has(gt.key))return;const Ct=this.callbacks.get(ht(this,e,Oe).call(this,gt));!Ct||(Ct.bind(X)(),gt.stopPropagation(),gt.preventDefault())}};let v=o;e=new WeakSet,Oe=function(X){X.altKey&&this.buffer.push("alt"),X.ctrlKey&&this.buffer.push("ctrl"),X.metaKey&&this.buffer.push("meta"),X.shiftKey&&this.buffer.push("shift"),this.buffer.push(X.key);const gt=this.buffer.join("+");return this.buffer.length=0,gt},u.KeyboardManager=v;const a=class{get _colors(){const X=new Map([["CanvasText",null],["Canvas",null]]);return(0,x.getColorValues)(X),(0,_.shadow)(this,"_colors",X)}convert(X){const gt=(0,x.getRGB)(X);if(!window.matchMedia("(forced-colors: active)").matches)return gt;for(const[Ct,xt]of this._colors)if(xt.every((Mt,Ft)=>Mt===gt[Ft]))return a._colorsMapping.get(Ct);return gt}getHexCode(X){const gt=this._colors.get(X);return gt?_.Util.makeHexColor(...gt):X}};let A=a;Ot(A,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),u.ColorManager=A;const At=class{constructor(X,gt){it(this,l),it(this,k),it(this,L),it(this,K),it(this,Y),it(this,n),it(this,m),it(this,M),it(this,J),it(this,et),it(this,B),it(this,t,null),it(this,s,new Map),it(this,p,new Map),it(this,C,new N),it(this,R,0),it(this,g,null),it(this,P,null),it(this,Z,new F),it(this,dt,!1),it(this,ot,_.AnnotationEditorType.NONE),it(this,at,new Set),it(this,tt,this.copy.bind(this)),it(this,V,this.cut.bind(this)),it(this,q,this.paste.bind(this)),it(this,nt,this.keydown.bind(this)),it(this,ut,this.onEditingAction.bind(this)),it(this,pt,this.onPageChanging.bind(this)),it(this,I,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}),it(this,d,null),bt(this,d,X),bt(this,P,gt),E(this,P)._on("editingaction",E(this,ut)),E(this,P)._on("pagechanging",E(this,pt))}destroy(){ht(this,k,de).call(this),E(this,P)._off("editingaction",E(this,ut)),E(this,P)._off("pagechanging",E(this,pt));for(const X of E(this,p).values())X.destroy();E(this,p).clear(),E(this,s).clear(),bt(this,t,null),E(this,at).clear(),E(this,C).destroy()}onPageChanging({pageNumber:X}){bt(this,R,X-1)}focusMainContainer(){E(this,d).focus()}copy(X){if(X.preventDefault(),E(this,t)&&E(this,t).commitOrRemove(),!this.hasSelection)return;const gt=[];for(const Ct of E(this,at))Ct.isEmpty()||gt.push(Ct.serialize());0!==gt.length&&X.clipboardData.setData("application/pdfjs",JSON.stringify(gt))}cut(X){this.copy(X),this.delete()}paste(X){X.preventDefault();let gt=X.clipboardData.getData("application/pdfjs");if(!gt)return;try{gt=JSON.parse(gt)}catch(xt){return void(0,_.warn)(`paste: "${xt.message}".`)}if(!Array.isArray(gt))return;this.unselectAll();const Ct=E(this,p).get(E(this,R));try{const xt=[];for(const Tt of gt){const Wt=Ct.deserialize(Tt);if(!Wt)return;xt.push(Wt)}this.addCommands({cmd:()=>{for(const Tt of xt)ht(this,J,ue).call(this,Tt);ht(this,B,fe).call(this,xt)},undo:()=>{for(const Tt of xt)Tt.remove()},mustExec:!0})}catch(xt){(0,_.warn)(`paste: "${xt.message}".`)}}keydown(X){var gt;(null==(gt=this.getActive())?void 0:gt.shouldGetKeyboardEvents())||At._keyboardManager.exec(this,X)}onEditingAction(X){["undo","redo","delete","selectAll"].includes(X.name)&&this[X.name]()}setEditingState(X){X?(ht(this,l,Ie).call(this),ht(this,L,Le).call(this),ht(this,Y,Ht).call(this,{isEditing:E(this,ot)!==_.AnnotationEditorType.NONE,isEmpty:ht(this,et,Qt).call(this),hasSomethingToUndo:E(this,C).hasSomethingToUndo(),hasSomethingToRedo:E(this,C).hasSomethingToRedo(),hasSelectedEditor:!1})):(ht(this,k,de).call(this),ht(this,K,Ne).call(this),ht(this,Y,Ht).call(this,{isEditing:!1}))}registerEditorTypes(X){if(!E(this,g)){bt(this,g,X);for(const gt of E(this,g))ht(this,n,Jt).call(this,gt.defaultPropertiesToUpdate)}}getId(){return E(this,Z).getId()}addLayer(X){E(this,p).set(X.pageIndex,X),E(this,dt)?X.enable():X.disable()}removeLayer(X){E(this,p).delete(X.pageIndex)}updateMode(X){if(bt(this,ot,X),X===_.AnnotationEditorType.NONE)this.setEditingState(!1),ht(this,M,je).call(this);else{this.setEditingState(!0),ht(this,m,Ue).call(this);for(const gt of E(this,p).values())gt.updateMode(X)}}updateToolbar(X){X!==E(this,ot)&&E(this,P).dispatch("switchannotationeditormode",{source:this,mode:X})}updateParams(X,gt){if(E(this,g)){for(const Ct of E(this,at))Ct.updateParams(X,gt);for(const Ct of E(this,g))Ct.updateDefaultParams(X,gt)}}getEditors(X){const gt=[];for(const Ct of E(this,s).values())Ct.pageIndex===X&&gt.push(Ct);return gt}getEditor(X){return E(this,s).get(X)}addEditor(X){E(this,s).set(X.id,X)}removeEditor(X){E(this,s).delete(X.id),this.unselect(X)}setActiveEditor(X){E(this,t)!==X&&(bt(this,t,X),X&&ht(this,n,Jt).call(this,X.propertiesToUpdate))}toggleSelected(X){if(E(this,at).has(X))return E(this,at).delete(X),X.unselect(),void ht(this,Y,Ht).call(this,{hasSelectedEditor:this.hasSelection});E(this,at).add(X),X.select(),ht(this,n,Jt).call(this,X.propertiesToUpdate),ht(this,Y,Ht).call(this,{hasSelectedEditor:!0})}setSelected(X){for(const gt of E(this,at))gt!==X&&gt.unselect();E(this,at).clear(),E(this,at).add(X),X.select(),ht(this,n,Jt).call(this,X.propertiesToUpdate),ht(this,Y,Ht).call(this,{hasSelectedEditor:!0})}isSelected(X){return E(this,at).has(X)}unselect(X){X.unselect(),E(this,at).delete(X),ht(this,Y,Ht).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==E(this,at).size}undo(){E(this,C).undo(),ht(this,Y,Ht).call(this,{hasSomethingToUndo:E(this,C).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ht(this,et,Qt).call(this)})}redo(){E(this,C).redo(),ht(this,Y,Ht).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:E(this,C).hasSomethingToRedo(),isEmpty:ht(this,et,Qt).call(this)})}addCommands(X){E(this,C).add(X),ht(this,Y,Ht).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ht(this,et,Qt).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const X=[...E(this,at)];this.addCommands({cmd:()=>{for(const xt of X)xt.remove()},undo:()=>{for(const xt of X)ht(this,J,ue).call(this,xt)},mustExec:!0})}commitOrRemove(){var X;null==(X=E(this,t))||X.commitOrRemove()}selectAll(){for(const X of E(this,at))X.commit();ht(this,B,fe).call(this,E(this,s).values())}unselectAll(){if(E(this,t))E(this,t).commitOrRemove();else if(0!==E(this,at).size){for(const X of E(this,at))X.unselect();E(this,at).clear(),ht(this,Y,Ht).call(this,{hasSelectedEditor:!1})}}isActive(X){return E(this,t)===X}getActive(){return E(this,t)}getMode(){return E(this,ot)}};let T=At;t=new WeakMap,s=new WeakMap,p=new WeakMap,C=new WeakMap,R=new WeakMap,g=new WeakMap,P=new WeakMap,Z=new WeakMap,dt=new WeakMap,ot=new WeakMap,at=new WeakMap,tt=new WeakMap,V=new WeakMap,q=new WeakMap,nt=new WeakMap,ut=new WeakMap,pt=new WeakMap,I=new WeakMap,d=new WeakMap,l=new WeakSet,Ie=function(){E(this,d).addEventListener("keydown",E(this,nt))},k=new WeakSet,de=function(){E(this,d).removeEventListener("keydown",E(this,nt))},L=new WeakSet,Le=function(){document.addEventListener("copy",E(this,tt)),document.addEventListener("cut",E(this,V)),document.addEventListener("paste",E(this,q))},K=new WeakSet,Ne=function(){document.removeEventListener("copy",E(this,tt)),document.removeEventListener("cut",E(this,V)),document.removeEventListener("paste",E(this,q))},Y=new WeakSet,Ht=function(X){Object.entries(X).some(([Ct,xt])=>E(this,I)[Ct]!==xt)&&E(this,P).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(E(this,I),X)})},n=new WeakSet,Jt=function(X){E(this,P).dispatch("annotationeditorparamschanged",{source:this,details:X})},m=new WeakSet,Ue=function(){if(!E(this,dt)){bt(this,dt,!0);for(const X of E(this,p).values())X.enable()}},M=new WeakSet,je=function(){if(this.unselectAll(),E(this,dt)){bt(this,dt,!1);for(const X of E(this,p).values())X.disable()}},J=new WeakSet,ue=function(X){const gt=E(this,p).get(X.pageIndex);gt?gt.addOrRebuild(X):this.addEditor(X)},et=new WeakSet,Qt=function(){if(0===E(this,s).size)return!0;if(1===E(this,s).size)for(const X of E(this,s).values())return X.isEmpty();return!1},B=new WeakSet,fe=function(X){E(this,at).clear();for(const gt of X)gt.isEmpty()||(E(this,at).add(gt),gt.select());ht(this,Y,Ht).call(this,{hasSelectedEditor:!0})},Ot(T,"_keyboardManager",new v([[["ctrl+a","mac+meta+a"],At.prototype.selectAll],[["ctrl+z","mac+meta+z"],At.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],At.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],At.prototype.delete],[["Escape","mac+Escape"],At.prototype.unselectAll]])),u.AnnotationEditorUIManager=T},(rt,u,$)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.StatTimer=u.RenderingCancelledException=u.PixelsPerInch=u.PageViewport=u.PDFDateString=u.DOMStandardFontDataFactory=u.DOMSVGFactory=u.DOMCanvasFactory=u.DOMCMapReaderFactory=u.AnnotationPrefix=void 0,u.deprecated=function(tt){console.log("Deprecated API usage: "+tt)},u.getColorValues=function(tt){const V=document.createElement("span");V.style.visibility="hidden",document.body.append(V);for(const q of tt.keys()){V.style.color=q;const nt=window.getComputedStyle(V).color;tt.set(q,P(nt))}V.remove()},u.getCurrentTransform=function(tt){const{a:V,b:q,c:nt,d:ut,e:pt,f:I}=tt.getTransform();return[V,q,nt,ut,pt,I]},u.getCurrentTransformInverse=function(tt){const{a:V,b:q,c:nt,d:ut,e:pt,f:I}=tt.getTransform().invertSelf();return[V,q,nt,ut,pt,I]},u.getFilenameFromUrl=function(tt){const V=tt.indexOf("#"),q=tt.indexOf("?"),nt=Math.min(V>0?V:tt.length,q>0?q:tt.length);return tt.substring(tt.lastIndexOf("/",nt)+1,nt)},u.getPdfFilenameFromUrl=function(tt,V="document.pdf"){if("string"!=typeof tt)return V;if(i(tt))return(0,x.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),V;const nt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,ut=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(tt);let pt=nt.exec(ut[1])||nt.exec(ut[2])||nt.exec(ut[3]);if(pt&&(pt=pt[0],pt.includes("%")))try{pt=nt.exec(decodeURIComponent(pt))[0]}catch(I){}return pt||V},u.getRGB=P,u.getXfaPageViewport=function(tt,{scale:V=1,rotation:q=0}){const{width:nt,height:ut}=tt.attributes.style,pt=[0,0,parseInt(nt),parseInt(ut)];return new h({viewBox:pt,scale:V,rotation:q})},u.isDataScheme=i,u.isPdfFile=function(tt){return"string"==typeof tt&&/\.pdf$/i.test(tt)},u.isValidFetchUrl=t,u.loadScript=function(tt,V=!1){return new Promise((q,nt)=>{const ut=document.createElement("script");ut.src=tt,ut.onload=function(pt){V&&ut.remove(),q(pt)},ut.onerror=function(){nt(new Error(`Cannot load script at: ${ut.src}`))},(document.head||document.documentElement).append(ut)})};var _=$(7),x=$(1);u.AnnotationPrefix="pdfjs_internal_id_";const at=class{};let C,F=at;function v(tt){return A.apply(this,arguments)}function A(){return(A=_asyncToGenerator(function*(tt,V=!1){if(t(tt,document.baseURI)){const q=yield fetch(tt);if(!q.ok)throw new Error(q.statusText);return V?new Uint8Array(yield q.arrayBuffer()):(0,x.stringToBytes)(yield q.text())}return new Promise((q,nt)=>{const ut=new XMLHttpRequest;ut.open("GET",tt,!0),V&&(ut.responseType="arraybuffer"),ut.onreadystatechange=()=>{if(ut.readyState===XMLHttpRequest.DONE){if(200===ut.status||0===ut.status){let pt;if(V&&ut.response?pt=new Uint8Array(ut.response):!V&&ut.responseText&&(pt=(0,x.stringToBytes)(ut.responseText)),pt)return void q(pt)}nt(new Error(ut.statusText))}},ut.send(null)})})).apply(this,arguments)}Ot(F,"CSS",96),Ot(F,"PDF",72),Ot(F,"PDF_TO_CSS_UNITS",at.CSS/at.PDF),u.PixelsPerInch=F,u.DOMCanvasFactory=class extends _.BaseCanvasFactory{constructor({ownerDocument:V=globalThis.document}={}){super(),this._document=V}_createCanvas(V,q){const nt=this._document.createElement("canvas");return nt.width=V,nt.height=q,nt}},u.DOMCMapReaderFactory=class extends _.BaseCMapReaderFactory{_fetchData(V,q){return v(V,this.isCompressed).then(nt=>({cMapData:nt,compressionType:q}))}},u.DOMStandardFontDataFactory=class extends _.BaseStandardFontDataFactory{_fetchData(V){return v(V,!0)}},u.DOMSVGFactory=class extends _.BaseSVGFactory{_createSVG(V){return document.createElementNS("http://www.w3.org/2000/svg",V)}};class h{constructor({viewBox:V,scale:q,rotation:nt,offsetX:ut=0,offsetY:pt=0,dontFlip:I=!1}){this.viewBox=V,this.scale=q,this.rotation=nt,this.offsetX=ut,this.offsetY=pt;const d=(V[2]+V[0])/2,l=(V[3]+V[1])/2;let S,k,O,L,H,K,lt,Y;switch((nt%=360)<0&&(nt+=360),nt){case 180:S=-1,k=0,O=0,L=1;break;case 90:S=0,k=1,O=1,L=0;break;case 270:S=0,k=-1,O=-1,L=0;break;case 0:S=1,k=0,O=0,L=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}I&&(O=-O,L=-L),0===S?(H=Math.abs(l-V[1])*q+ut,K=Math.abs(d-V[0])*q+pt,lt=Math.abs(V[3]-V[1])*q,Y=Math.abs(V[2]-V[0])*q):(H=Math.abs(d-V[0])*q+ut,K=Math.abs(l-V[1])*q+pt,lt=Math.abs(V[2]-V[0])*q,Y=Math.abs(V[3]-V[1])*q),this.transform=[S*q,k*q,O*q,L*q,H-S*q*d-O*q*l,K-k*q*d-L*q*l],this.width=lt,this.height=Y}clone({scale:V=this.scale,rotation:q=this.rotation,offsetX:nt=this.offsetX,offsetY:ut=this.offsetY,dontFlip:pt=!1}={}){return new h({viewBox:this.viewBox.slice(),scale:V,rotation:q,offsetX:nt,offsetY:ut,dontFlip:pt})}convertToViewportPoint(V,q){return x.Util.applyTransform([V,q],this.transform)}convertToViewportRectangle(V){const q=x.Util.applyTransform([V[0],V[1]],this.transform),nt=x.Util.applyTransform([V[2],V[3]],this.transform);return[q[0],q[1],nt[0],nt[1]]}convertToPdfPoint(V,q){return x.Util.applyInverseTransform([V,q],this.transform)}}function i(tt){const V=tt.length;let q=0;for(;q<V&&""===tt[q].trim();)q++;return"data:"===tt.substring(q,q+5).toLowerCase()}function t(tt,V){try{const{protocol:q}=V?new URL(tt,V):new URL(tt);return"http:"===q||"https:"===q}catch(q){return!1}}function P(tt){if(tt.startsWith("#")){const V=parseInt(tt.slice(1),16);return[(16711680&V)>>16,(65280&V)>>8,255&V]}return tt.startsWith("rgb(")?tt.slice(4,-1).split(",").map(V=>parseInt(V)):tt.startsWith("rgba(")?tt.slice(5,-1).split(",").map(V=>parseInt(V)).slice(0,3):((0,x.warn)(`Not a valid color format: "${tt}"`),[0,0,0])}u.PageViewport=h,u.RenderingCancelledException=class extends x.BaseException{constructor(V,q){super(V,"RenderingCancelledException"),this.type=q}},u.StatTimer=class{constructor(){this.started=Object.create(null),this.times=[]}time(V){V in this.started&&(0,x.warn)(`Timer is already running for ${V}`),this.started[V]=Date.now()}timeEnd(V){V in this.started||(0,x.warn)(`Timer has not been started for ${V}`),this.times.push({name:V,start:this.started[V],end:Date.now()}),delete this.started[V]}toString(){const V=[];let q=0;for(const nt of this.times){const ut=nt.name;ut.length>q&&(q=ut.length)}for(const nt of this.times){const ut=nt.end-nt.start;V.push(`${nt.name.padEnd(q)} ${ut}ms\n`)}return V.join("")}},u.PDFDateString=class{static toDateObject(V){if(!V||"string"!=typeof V)return null;C||(C=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const q=C.exec(V);if(!q)return null;const nt=parseInt(q[1],10);let ut=parseInt(q[2],10);ut=ut>=1&&ut<=12?ut-1:0;let pt=parseInt(q[3],10);pt=pt>=1&&pt<=31?pt:1;let I=parseInt(q[4],10);I=I>=0&&I<=23?I:0;let d=parseInt(q[5],10);d=d>=0&&d<=59?d:0;let l=parseInt(q[6],10);l=l>=0&&l<=59?l:0;const S=q[7]||"Z";let k=parseInt(q[8],10);k=k>=0&&k<=23?k:0;let O=parseInt(q[9],10)||0;return O=O>=0&&O<=59?O:0,"-"===S?(I+=k,d+=O):"+"===S&&(I-=k,d-=O),new Date(Date.UTC(nt,ut,pt,I,d,l))}}},(rt,u,$)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.BaseStandardFontDataFactory=u.BaseSVGFactory=u.BaseCanvasFactory=u.BaseCMapReaderFactory=void 0;var _=$(1);class x{constructor(){this.constructor===x&&(0,_.unreachable)("Cannot initialize BaseCanvasFactory.")}create(v,A){if(v<=0||A<=0)throw new Error("Invalid canvas size");const T=this._createCanvas(v,A);return{canvas:T,context:T.getContext("2d")}}reset(v,A,T){if(!v.canvas)throw new Error("Canvas is not specified");if(A<=0||T<=0)throw new Error("Invalid canvas size");v.canvas.width=A,v.canvas.height=T}destroy(v){if(!v.canvas)throw new Error("Canvas is not specified");v.canvas.width=0,v.canvas.height=0,v.canvas=null,v.context=null}_createCanvas(v,A){(0,_.unreachable)("Abstract method `_createCanvas` called.")}}u.BaseCanvasFactory=x;class z{constructor({baseUrl:v=null,isCompressed:A=!1}){this.constructor===z&&(0,_.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=v,this.isCompressed=A}fetch({name:v}){var A=this;return _asyncToGenerator(function*(){if(!A.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!v)throw new Error("CMap name must be specified.");const T=A.baseUrl+v+(A.isCompressed?".bcmap":"");return A._fetchData(T,A.isCompressed?_.CMapCompressionType.BINARY:_.CMapCompressionType.NONE).catch(f=>{throw new Error(`Unable to load ${A.isCompressed?"binary ":""}CMap at: ${T}`)})})()}_fetchData(v,A){(0,_.unreachable)("Abstract method `_fetchData` called.")}}u.BaseCMapReaderFactory=z;class G{constructor({baseUrl:v=null}){this.constructor===G&&(0,_.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=v}fetch({filename:v}){var A=this;return _asyncToGenerator(function*(){if(!A.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!v)throw new Error("Font filename must be specified.");const T=`${A.baseUrl}${v}`;return A._fetchData(T).catch(y=>{throw new Error(`Unable to load font data at: ${T}`)})})()}_fetchData(v){(0,_.unreachable)("Abstract method `_fetchData` called.")}}u.BaseStandardFontDataFactory=G;class F{constructor(){this.constructor===F&&(0,_.unreachable)("Cannot initialize BaseSVGFactory.")}create(v,A,T=!1){if(v<=0||A<=0)throw new Error("Invalid SVG dimensions");const y=this._createSVG("svg:svg");return y.setAttribute("version","1.1"),T||(y.setAttribute("width",`${v}px`),y.setAttribute("height",`${A}px`)),y.setAttribute("preserveAspectRatio","none"),y.setAttribute("viewBox",`0 0 ${v} ${A}`),y}createElement(v){if("string"!=typeof v)throw new Error("Invalid SVG element type");return this._createSVG(v)}_createSVG(v){(0,_.unreachable)("Abstract method `_createSVG` called.")}}u.BaseSVGFactory=F},(rt,u,$)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.MurmurHash3_64=void 0;var _=$(1);const x=3285377520,z=4294901760,G=65535;u.MurmurHash3_64=class{constructor(v){this.h1=v?4294967295&v:x,this.h2=v?4294967295&v:x}update(v){let A,T;if("string"==typeof v){A=new Uint8Array(2*v.length),T=0;for(let p=0,C=v.length;p<C;p++){const R=v.charCodeAt(p);R<=255?A[T++]=R:(A[T++]=R>>>8,A[T++]=255&R)}}else{if(!(0,_.isArrayBuffer)(v))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");A=v.slice(),T=A.byteLength}const y=T>>2,f=T-4*y,h=new Uint32Array(A.buffer,0,y);let c=0,i=0,e=this.h1,r=this.h2;const o=3432918353,a=461845907,t=o&G,s=a&G;for(let p=0;p<y;p++)1&p?(c=h[p],c=c*o&z|c*t&G,c=c<<15|c>>>17,c=c*a&z|c*s&G,e^=c,e=e<<13|e>>>19,e=5*e+3864292196):(i=h[p],i=i*o&z|i*t&G,i=i<<15|i>>>17,i=i*a&z|i*s&G,r^=i,r=r<<13|r>>>19,r=5*r+3864292196);switch(c=0,f){case 3:c^=A[4*y+2]<<16;case 2:c^=A[4*y+1]<<8;case 1:c^=A[4*y],c=c*o&z|c*t&G,c=c<<15|c>>>17,c=c*a&z|c*s&G,1&y?e^=c:r^=c}this.h1=e,this.h2=r}hexdigest(){let v=this.h1,A=this.h2;v^=A>>>1,v=3981806797*v&z|36045*v&G,A=4283543511*A&z|(2950163797*(A<<16|v>>>16)&z)>>>16,v^=A>>>1,v=444984403*v&z|60499*v&G,A=3301882366*A&z|(3120437893*(A<<16|v>>>16)&z)>>>16,v^=A>>>1;const T=(v>>>0).toString(16),y=(A>>>0).toString(16);return T.padStart(8,"0")+y.padStart(8,"0")}}},(rt,u,$)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.FontLoader=u.FontFaceObject=void 0;var _=$(1);u.FontLoader=class{constructor({onUnsupportedFeature:F,ownerDocument:N=globalThis.document,styleElement:v=null}){this._onUnsupportedFeature=F,this._document=N,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(F){this.nativeFontFaces.push(F),this._document.fonts.add(F)}insertRule(F){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const N=this.styleElement.sheet;N.insertRule(F,N.cssRules.length)}clear(){for(const F of this.nativeFontFaces)this._document.fonts.delete(F);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}bind(F){var N=this;return _asyncToGenerator(function*(){if(F.attached||F.missingFile)return;if(F.attached=!0,N.isFontLoadingAPISupported){const A=F.createNativeFontFace();if(A){N.addNativeFontFace(A);try{yield A.loaded}catch(T){throw N._onUnsupportedFeature({featureId:_.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,_.warn)(`Failed to load font '${A.family}': '${T}'.`),F.disableFontFace=!0,T}}return}const v=F.createFontFaceRule();if(v){if(N.insertRule(v),N.isSyncFontLoadingSupported)return;yield new Promise(A=>{const T=N._queueLoadingCallback(A);N._prepareFontLoadEvent(F,T)})}})()}get isFontLoadingAPISupported(){var N;const F=!!(null==(N=this._document)?void 0:N.fonts);return(0,_.shadow)(this,"isFontLoadingAPISupported",F)}get isSyncFontLoadingSupported(){let F=!1;if("undefined"==typeof navigator)F=!0;else{const N=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(null==N?void 0:N[1])>=14&&(F=!0)}return(0,_.shadow)(this,"isSyncFontLoadingSupported",F)}_queueLoadingCallback(F){const{loadingRequests:v}=this,A={done:!1,complete:function(){for((0,_.assert)(!A.done,"completeRequest() cannot be called twice."),A.done=!0;v.length>0&&v[0].done;){const T=v.shift();setTimeout(T.callback,0)}},callback:F};return v.push(A),A}get _loadTestFont(){const F=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,_.shadow)(this,"_loadTestFont",F)}_prepareFontLoadEvent(F,N){function v(g,P){return g.charCodeAt(P)<<24|g.charCodeAt(P+1)<<16|g.charCodeAt(P+2)<<8|255&g.charCodeAt(P+3)}function A(g,P,Z,dt){return g.substring(0,P)+dt+g.substring(P+Z)}let T,y;const f=this._document.createElement("canvas");f.width=1,f.height=1;const h=f.getContext("2d");let c=0;const e=`lt${Date.now()}${this.loadTestFontId++}`;let r=this._loadTestFont;r=A(r,976,e.length,e);const t=1482184792;let s=v(r,16);for(T=0,y=e.length-3;T<y;T+=4)s=s-t+v(e,T)|0;T<e.length&&(s=s-t+v(e+"XXX",T)|0),r=A(r,16,4,(0,_.string32)(s));const p=`url(data:font/opentype;base64,${btoa(r)});`;this.insertRule(`@font-face {font-family:"${e}";src:${p}}`);const R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(const g of[F.loadedName,e]){const P=this._document.createElement("span");P.textContent="Hi",P.style.fontFamily=g,R.append(P)}this._document.body.append(R),function i(g,P){if(++c>30)return(0,_.warn)("Load test font never loaded."),void P();h.font="30px "+g,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0?P():setTimeout(i.bind(null,g,P))}(e,()=>{R.remove(),N.complete()})}},u.FontFaceObject=class{constructor(F,{isEvalSupported:N=!0,disableFontFace:v=!1,ignoreErrors:A=!1,onUnsupportedFeature:T,fontRegistry:y=null}){this.compiledGlyphs=Object.create(null);for(const f in F)this[f]=F[f];this.isEvalSupported=!1!==N,this.disableFontFace=!0===v,this.ignoreErrors=!0===A,this._onUnsupportedFeature=T,this.fontRegistry=y}createNativeFontFace(){var N;if(!this.data||this.disableFontFace)return null;let F;if(this.cssFontInfo){const v={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(v.style=`oblique ${this.cssFontInfo.italicAngle}deg`),F=new FontFace(this.cssFontInfo.fontFamily,this.data,v)}else F=new FontFace(this.loadedName,this.data,{});return null==(N=this.fontRegistry)||N.registerFont(this),F}createFontFaceRule(){var A;if(!this.data||this.disableFontFace)return null;const F=(0,_.bytesToString)(this.data),N=`url(data:${this.mimetype};base64,${btoa(F)});`;let v;if(this.cssFontInfo){let T=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(T+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),v=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${T}src:${N}}`}else v=`@font-face {font-family:"${this.loadedName}";src:${N}}`;return null==(A=this.fontRegistry)||A.registerFont(this,N),v}getPathGenerator(F,N){if(void 0!==this.compiledGlyphs[N])return this.compiledGlyphs[N];let v;try{v=F.get(this.loadedName+"_path_"+N)}catch(A){if(!this.ignoreErrors)throw A;return this._onUnsupportedFeature({featureId:_.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,_.warn)(`getPathGenerator - ignoring character: "${A}".`),this.compiledGlyphs[N]=function(T,y){}}if(this.isEvalSupported&&_.FeatureTest.isEvalSupported){const A=[];for(const T of v){const y=void 0!==T.args?T.args.join(","):"";A.push("c.",T.cmd,"(",y,");\n")}return this.compiledGlyphs[N]=new Function("c","size",A.join(""))}return this.compiledGlyphs[N]=function(A,T){for(const y of v)"scale"===y.cmd&&(y.args=[T,-T]),A[y.cmd].apply(A,y.args)}}}},(rt,u,$)=>{var nt,pe;Object.defineProperty(u,"__esModule",{value:!0}),u.CanvasGraphics=void 0;var _=$(1),x=$(6),z=$(11),G=$(13),F=$(12);const A=4096,f=F.isNodeJS&&"undefined"==typeof Path2D?-1:1e3,h=16;class i{constructor(d){this.canvasFactory=d,this.cache=Object.create(null)}getCanvas(d,l,S){let k;return void 0!==this.cache[d]?(k=this.cache[d],this.canvasFactory.reset(k,l,S)):(k=this.canvasFactory.create(l,S),this.cache[d]=k),k}delete(d){delete this.cache[d]}clear(){for(const d in this.cache)this.canvasFactory.destroy(this.cache[d]),delete this.cache[d]}}function e(I,d,l,S,k,O,L,H,K,lt){const[Y,Q,n,b,m,w]=(0,x.getCurrentTransform)(I);if(0===Q&&0===n){const ct=Math.round(L*Y+m),_t=Math.round(H*b+w),mt=Math.abs(Math.round((L+K)*Y+m)-ct)||1,yt=Math.abs(Math.round((H+lt)*b+w)-_t)||1;return I.setTransform(Math.sign(Y),0,0,Math.sign(b),ct,_t),I.drawImage(d,l,S,k,O,0,0,mt,yt),I.setTransform(Y,Q,n,b,m,w),[mt,yt]}if(0===Y&&0===b){const ct=Math.round(H*n+m),_t=Math.round(L*Q+w),mt=Math.abs(Math.round((H+lt)*n+m)-ct)||1,yt=Math.abs(Math.round((L+K)*Q+w)-_t)||1;return I.setTransform(0,Math.sign(Q),Math.sign(n),0,ct,_t),I.drawImage(d,l,S,k,O,0,0,yt,mt),I.setTransform(Y,Q,n,b,m,w),[yt,mt]}return I.drawImage(d,l,S,k,O,L,H,K,lt),[Math.hypot(Y,Q)*K,Math.hypot(n,b)*lt]}class o{constructor(d,l){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=_.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=_.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=_.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,d,l])}clone(){const d=Object.create(this);return d.clipBox=this.clipBox.slice(),d}setCurrentPoint(d,l){this.x=d,this.y=l}updatePathMinMax(d,l,S){[l,S]=_.Util.applyTransform([l,S],d),this.minX=Math.min(this.minX,l),this.minY=Math.min(this.minY,S),this.maxX=Math.max(this.maxX,l),this.maxY=Math.max(this.maxY,S)}updateRectMinMax(d,l){const S=_.Util.applyTransform(l,d),k=_.Util.applyTransform(l.slice(2),d);this.minX=Math.min(this.minX,S[0],k[0]),this.minY=Math.min(this.minY,S[1],k[1]),this.maxX=Math.max(this.maxX,S[0],k[0]),this.maxY=Math.max(this.maxY,S[1],k[1])}updateScalingPathMinMax(d,l){_.Util.scaleMinMax(d,l),this.minX=Math.min(this.minX,l[0]),this.maxX=Math.max(this.maxX,l[1]),this.minY=Math.min(this.minY,l[2]),this.maxY=Math.max(this.maxY,l[3])}updateCurvePathMinMax(d,l,S,k,O,L,H,K,lt,Y){const Q=_.Util.bezierBoundingBox(l,S,k,O,L,H,K,lt);if(Y)return Y[0]=Math.min(Y[0],Q[0],Q[2]),Y[1]=Math.max(Y[1],Q[0],Q[2]),Y[2]=Math.min(Y[2],Q[1],Q[3]),void(Y[3]=Math.max(Y[3],Q[1],Q[3]));this.updateRectMinMax(d,Q)}getPathBoundingBox(d=z.PathType.FILL,l=null){const S=[this.minX,this.minY,this.maxX,this.maxY];if(d===z.PathType.STROKE){l||(0,_.unreachable)("Stroke bounding box must include transform.");const k=_.Util.singularValueDecompose2dScale(l),O=k[0]*this.lineWidth/2,L=k[1]*this.lineWidth/2;S[0]-=O,S[1]-=L,S[2]+=O,S[3]+=L}return S}updateClipFromPath(){const d=_.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(d||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(d){this.clipBox=d,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(d=z.PathType.FILL,l=null){return _.Util.intersect(this.clipBox,this.getPathBoundingBox(d,l))}}function a(I,d,l=null){if("undefined"!=typeof ImageData&&d instanceof ImageData)return void I.putImageData(d,0,0);const S=d.height,k=d.width,O=S%h,L=(S-O)/h,H=0===O?L:L+1,K=I.createImageData(k,h);let Y,lt=0;const Q=d.data,n=K.data;let b,m,w,M,j,J,ct,et;if(l)switch(l.length){case 1:j=l[0],J=l[0],ct=l[0],et=l[0];break;case 4:j=l[0],J=l[1],ct=l[2],et=l[3]}if(d.kind===_.ImageKind.GRAYSCALE_1BPP){const _t=Q.byteLength,B=new Uint32Array(n.buffer,0,n.byteLength>>2),mt=B.length,At=k+7>>3;let yt=4294967295,X=_.FeatureTest.isLittleEndian?4278190080:255;for(et&&255===et[0]&&0===et[255]&&([yt,X]=[X,yt]),b=0;b<H;b++){for(w=b<L?h:O,Y=0,m=0;m<w;m++){const gt=_t-lt;let Ct=0;const xt=gt>At?k:8*gt-7,Mt=-8&xt;let Ft=0,Tt=0;for(;Ct<Mt;Ct+=8)Tt=Q[lt++],B[Y++]=128&Tt?yt:X,B[Y++]=64&Tt?yt:X,B[Y++]=32&Tt?yt:X,B[Y++]=16&Tt?yt:X,B[Y++]=8&Tt?yt:X,B[Y++]=4&Tt?yt:X,B[Y++]=2&Tt?yt:X,B[Y++]=1&Tt?yt:X;for(;Ct<xt;Ct++)0===Ft&&(Tt=Q[lt++],Ft=128),B[Y++]=Tt&Ft?yt:X,Ft>>=1}for(;Y<mt;)B[Y++]=0;I.putImageData(K,0,b*h)}}else if(d.kind===_.ImageKind.RGBA_32BPP){const _t=!!(j||J||ct);for(m=0,M=k*h*4,b=0;b<L;b++){if(n.set(Q.subarray(lt,lt+M)),lt+=M,_t)for(let B=0;B<M;B+=4)j&&(n[B+0]=j[n[B+0]]),J&&(n[B+1]=J[n[B+1]]),ct&&(n[B+2]=ct[n[B+2]]);I.putImageData(K,0,m),m+=h}if(b<H){if(M=k*O*4,n.set(Q.subarray(lt,lt+M)),_t)for(let B=0;B<M;B+=4)j&&(n[B+0]=j[n[B+0]]),J&&(n[B+1]=J[n[B+1]]),ct&&(n[B+2]=ct[n[B+2]]);I.putImageData(K,0,m)}}else{if(d.kind!==_.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${d.kind}`);{const _t=!!(j||J||ct);for(w=h,M=k*w,b=0;b<H;b++){for(b>=L&&(w=O,M=k*w),Y=0,m=M;m--;)n[Y++]=Q[lt++],n[Y++]=Q[lt++],n[Y++]=Q[lt++],n[Y++]=255;if(_t)for(let B=0;B<Y;B+=4)j&&(n[B+0]=j[n[B+0]]),J&&(n[B+1]=J[n[B+1]]),ct&&(n[B+2]=ct[n[B+2]]);I.putImageData(K,0,b*h)}}}}function t(I,d){if(d.bitmap)return void I.drawImage(d.bitmap,0,0);const l=d.height,S=d.width,k=l%h,O=(l-k)/h,L=0===k?O:O+1,H=I.createImageData(S,h);let K=0;const lt=d.data,Y=H.data;for(let Q=0;Q<L;Q++){const n=Q<O?h:k;({srcPos:K}=(0,G.applyMaskImageData)({src:lt,srcPos:K,dest:Y,width:S,height:n})),I.putImageData(H,0,Q*h)}}function s(I,d){const l=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(const S of l)void 0!==I[S]&&(d[S]=I[S]);void 0!==I.setLineDash&&(d.setLineDash(I.getLineDash()),d.lineDashOffset=I.lineDashOffset)}function p(I,d){I.strokeStyle=I.fillStyle=d||"#000000",I.fillRule="nonzero",I.globalAlpha=1,I.lineWidth=1,I.lineCap="butt",I.lineJoin="miter",I.miterLimit=10,I.globalCompositeOperation="source-over",I.font="10px sans-serif",void 0!==I.setLineDash&&(I.setLineDash([]),I.lineDashOffset=0)}function C(I,d,l,S){const k=I.length;for(let O=3;O<k;O+=4){const L=I[O];if(0===L)I[O-3]=d,I[O-2]=l,I[O-1]=S;else if(L<255){const H=255-L;I[O-3]=I[O-3]*L+d*H>>8,I[O-2]=I[O-2]*L+l*H>>8,I[O-1]=I[O-1]*L+S*H>>8}}}function R(I,d,l){const S=I.length;for(let O=3;O<S;O+=4)d[O]=d[O]*(l?l[I[O]]:I[O])*.00392156862745098|0}function g(I,d,l){const S=I.length;for(let k=3;k<S;k+=4){const O=77*I[k-3]+152*I[k-2]+28*I[k-1];d[k]=l?d[k]*l[O>>8]>>8:d[k]*O>>16}}function dt(I,d){const l=_.Util.singularValueDecompose2dScale(I);l[0]=Math.fround(l[0]),l[1]=Math.fround(l[1]);const S=Math.fround((globalThis.devicePixelRatio||1)*x.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==d?d:l[0]<=S||l[1]<=S}const ot=["butt","round","square"],at=["miter","round","bevel"],tt={},V={},pt=class{constructor(d,l,S,k,O,L,H){it(this,nt),this.ctx=d,this.current=new o(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=l,this.objs=S,this.canvasFactory=k,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=O,this.cachedCanvases=new i(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=L,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(null==H?void 0:H.background)||null,this.foregroundColor=(null==H?void 0:H.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(d,l=null){return"string"==typeof d?d.startsWith("g_")?this.commonObjs.get(d):this.objs.get(d):l}beginDrawing({transform:d,viewport:l,transparency:S=!1,background:k=null}){const O=this.ctx.canvas.width,L=this.ctx.canvas.height,H=k||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const K=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const lt=this.backgroundColor=this.ctx.fillStyle;let Y=!0,Q=H;if(this.ctx.fillStyle=H,Q=this.ctx.fillStyle,Y="string"==typeof Q&&/^#[0-9A-Fa-f]{6}$/.test(Q),"#000000"===K&&"#ffffff"===lt||K===lt||!Y)this.foregroundColor=this.backgroundColor=null;else{const[n,b,m]=(0,x.getRGB)(Q),w=j=>(j/=255)<=.03928?j/12.92:((j+.055)/1.055)**2.4,M=Math.round(.2126*w(n)+.7152*w(b)+.0722*w(m));this.selectColor=(j,J,ct)=>{const et=.2126*w(j)+.7152*w(J)+.0722*w(ct);return Math.round(et)===M?lt:K}}}if(this.ctx.fillStyle=this.backgroundColor||H,this.ctx.fillRect(0,0,O,L),this.ctx.restore(),S){const K=this.cachedCanvases.getCanvas("transparent",O,L);this.compositeCtx=this.ctx,this.transparentCanvas=K.canvas,this.ctx=K.context,this.ctx.save(),this.ctx.transform(...(0,x.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),p(this.ctx,this.foregroundColor),d&&(this.ctx.transform(...d),this.outputScaleX=d[0],this.outputScaleY=d[0]),this.ctx.transform(...l.transform),this.viewportScale=l.scale,this.baseTransform=(0,x.getCurrentTransform)(this.ctx)}executeOperatorList(d,l,S,k){const O=d.argsArray,L=d.fnArray;let H=l||0;const K=O.length;if(K===H)return H;const lt=K-H>10&&"function"==typeof S,Y=lt?Date.now()+15:0;let Q=0;const n=this.commonObjs,b=this.objs;let m;for(;;){if(void 0!==k&&H===k.nextBreakPoint)return k.breakIt(H,S),H;if(m=L[H],m!==_.OPS.dependency)this[m].apply(this,O[H]);else for(const w of O[H]){const M=w.startsWith("g_")?n:b;if(!M.has(w))return M.get(w,S),H}if(H++,H===K)return H;if(lt&&++Q>10){if(Date.now()>Y)return S(),H;Q=0}}}endDrawing(){ht(this,nt,pe).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const d of this._cachedBitmapsMap.values()){for(const l of d.values())"undefined"!=typeof HTMLCanvasElement&&l instanceof HTMLCanvasElement&&(l.width=l.height=0);d.clear()}this._cachedBitmapsMap.clear()}_scaleImage(d,l){const S=d.width,k=d.height;let Y,Q,O=Math.max(Math.hypot(l[0],l[1]),1),L=Math.max(Math.hypot(l[2],l[3]),1),H=S,K=k,lt="prescale1";for(;O>2&&H>1||L>2&&K>1;){let n=H,b=K;O>2&&H>1&&(n=Math.ceil(H/2),O/=H/n),L>2&&K>1&&(b=Math.ceil(K/2),L/=K/b),Y=this.cachedCanvases.getCanvas(lt,n,b),Q=Y.context,Q.clearRect(0,0,n,b),Q.drawImage(d,0,0,H,K,0,0,n,b),d=Y.canvas,H=n,K=b,lt="prescale1"===lt?"prescale2":"prescale1"}return{img:d,paintWidth:H,paintHeight:K}}_createMaskCanvas(d){const l=this.ctx,{width:S,height:k}=d,O=this.current.fillColor,L=this.current.patternFill,H=(0,x.getCurrentTransform)(l);let K,lt,Y,Q;if((d.bitmap||d.data)&&d.count>1){const mt=d.bitmap||d.data.buffer;lt=JSON.stringify(L?H:[H.slice(0,4),O]),K=this._cachedBitmapsMap.get(mt),K||(K=new Map,this._cachedBitmapsMap.set(mt,K));const At=K.get(lt);if(At&&!L)return{canvas:At,offsetX:Math.round(Math.min(H[0],H[2])+H[4]),offsetY:Math.round(Math.min(H[1],H[3])+H[5])};Y=At}Y||(Q=this.cachedCanvases.getCanvas("maskCanvas",S,k),t(Q.context,d));let n=_.Util.transform(H,[1/S,0,0,-1/k,0,0]);n=_.Util.transform(n,[1,0,0,1,0,-k]);const b=_.Util.applyTransform([0,0],n),m=_.Util.applyTransform([S,k],n),w=_.Util.normalizeRect([b[0],b[1],m[0],m[1]]),M=Math.round(w[2]-w[0])||1,j=Math.round(w[3]-w[1])||1,J=this.cachedCanvases.getCanvas("fillCanvas",M,j),ct=J.context,et=Math.min(b[0],m[0]),_t=Math.min(b[1],m[1]);ct.translate(-et,-_t),ct.transform(...n),Y||(Y=this._scaleImage(Q.canvas,(0,x.getCurrentTransformInverse)(ct)),Y=Y.img,K&&L&&K.set(lt,Y)),ct.imageSmoothingEnabled=dt((0,x.getCurrentTransform)(ct),d.interpolate),e(ct,Y,0,0,Y.width,Y.height,0,0,S,k),ct.globalCompositeOperation="source-in";const B=_.Util.transform((0,x.getCurrentTransformInverse)(ct),[1,0,0,1,-et,-_t]);return ct.fillStyle=L?O.getPattern(l,this,B,z.PathType.FILL):O,ct.fillRect(0,0,S,k),K&&!L&&(this.cachedCanvases.delete("fillCanvas"),K.set(lt,J.canvas)),{canvas:J.canvas,offsetX:Math.round(et),offsetY:Math.round(_t)}}setLineWidth(d){d!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=d,this.ctx.lineWidth=d}setLineCap(d){this.ctx.lineCap=ot[d]}setLineJoin(d){this.ctx.lineJoin=at[d]}setMiterLimit(d){this.ctx.miterLimit=d}setDash(d,l){const S=this.ctx;void 0!==S.setLineDash&&(S.setLineDash(d),S.lineDashOffset=l)}setRenderingIntent(d){}setFlatness(d){}setGState(d){for(const[l,S]of d)switch(l){case"LW":this.setLineWidth(S);break;case"LC":this.setLineCap(S);break;case"LJ":this.setLineJoin(S);break;case"ML":this.setMiterLimit(S);break;case"D":this.setDash(S[0],S[1]);break;case"RI":this.setRenderingIntent(S);break;case"FL":this.setFlatness(S);break;case"Font":this.setFont(S[0],S[1]);break;case"CA":this.current.strokeAlpha=S;break;case"ca":this.current.fillAlpha=S,this.ctx.globalAlpha=S;break;case"BM":this.ctx.globalCompositeOperation=S;break;case"SMask":this.current.activeSMask=S?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=S}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const d=this.inSMaskMode;this.current.activeSMask&&!d?this.beginSMaskMode():!this.current.activeSMask&&d&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const k=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height);this.suspendedCtx=this.ctx,this.ctx=k.context;const O=this.ctx;O.setTransform(...(0,x.getCurrentTransform)(this.suspendedCtx)),s(this.suspendedCtx,O),function(I,d){if(I._removeMirroring)throw new Error("Context is already forwarding operations.");I.__originalSave=I.save,I.__originalRestore=I.restore,I.__originalRotate=I.rotate,I.__originalScale=I.scale,I.__originalTranslate=I.translate,I.__originalTransform=I.transform,I.__originalSetTransform=I.setTransform,I.__originalResetTransform=I.resetTransform,I.__originalClip=I.clip,I.__originalMoveTo=I.moveTo,I.__originalLineTo=I.lineTo,I.__originalBezierCurveTo=I.bezierCurveTo,I.__originalRect=I.rect,I.__originalClosePath=I.closePath,I.__originalBeginPath=I.beginPath,I._removeMirroring=()=>{I.save=I.__originalSave,I.restore=I.__originalRestore,I.rotate=I.__originalRotate,I.scale=I.__originalScale,I.translate=I.__originalTranslate,I.transform=I.__originalTransform,I.setTransform=I.__originalSetTransform,I.resetTransform=I.__originalResetTransform,I.clip=I.__originalClip,I.moveTo=I.__originalMoveTo,I.lineTo=I.__originalLineTo,I.bezierCurveTo=I.__originalBezierCurveTo,I.rect=I.__originalRect,I.closePath=I.__originalClosePath,I.beginPath=I.__originalBeginPath,delete I._removeMirroring},I.save=function(){d.save(),this.__originalSave()},I.restore=function(){d.restore(),this.__originalRestore()},I.translate=function(S,k){d.translate(S,k),this.__originalTranslate(S,k)},I.scale=function(S,k){d.scale(S,k),this.__originalScale(S,k)},I.transform=function(S,k,O,L,H,K){d.transform(S,k,O,L,H,K),this.__originalTransform(S,k,O,L,H,K)},I.setTransform=function(S,k,O,L,H,K){d.setTransform(S,k,O,L,H,K),this.__originalSetTransform(S,k,O,L,H,K)},I.resetTransform=function(){d.resetTransform(),this.__originalResetTransform()},I.rotate=function(S){d.rotate(S),this.__originalRotate(S)},I.clip=function(S){d.clip(S),this.__originalClip(S)},I.moveTo=function(l,S){d.moveTo(l,S),this.__originalMoveTo(l,S)},I.lineTo=function(l,S){d.lineTo(l,S),this.__originalLineTo(l,S)},I.bezierCurveTo=function(l,S,k,O,L,H){d.bezierCurveTo(l,S,k,O,L,H),this.__originalBezierCurveTo(l,S,k,O,L,H)},I.rect=function(l,S,k,O){d.rect(l,S,k,O),this.__originalRect(l,S,k,O)},I.closePath=function(){d.closePath(),this.__originalClosePath()},I.beginPath=function(){d.beginPath(),this.__originalBeginPath()}}(O,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),s(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(d){this.current.activeSMask&&(d?(d[0]=Math.floor(d[0]),d[1]=Math.floor(d[1]),d[2]=Math.ceil(d[2]),d[3]=Math.ceil(d[3])):d=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],function(I,d,l,S){const k=S[0],O=S[1],L=S[2]-k,H=S[3]-O;0===L||0===H||(function(I,d,l,S,k,O,L,H,K,lt,Y){const Q=!!O,n=Q?O[0]:0,b=Q?O[1]:0,m=Q?O[2]:0;let w;w="Luminosity"===k?g:R;const j=Math.min(S,Math.ceil(1048576/l));for(let J=0;J<S;J+=j){const ct=Math.min(j,S-J),et=I.getImageData(H-lt,J+(K-Y),l,ct),_t=d.getImageData(H,J+K,l,ct);Q&&C(et.data,n,b,m),w(et.data,_t.data,L),d.putImageData(_t,H,J+K)}}(d.context,l,L,H,d.subtype,d.backdrop,d.transferMap,k,O,d.offsetX,d.offsetY),I.save(),I.globalAlpha=1,I.globalCompositeOperation="source-over",I.setTransform(1,0,0,1,0,0),I.drawImage(l.canvas,0,0),I.restore())}(this.suspendedCtx,this.current.activeSMask,this.ctx,d),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}save(){this.inSMaskMode?(s(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const d=this.current;this.stateStack.push(d),this.current=d.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),s(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(d,l,S,k,O,L){this.ctx.transform(d,l,S,k,O,L),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(d,l,S){const k=this.ctx,O=this.current;let K,lt,L=O.x,H=O.y;const Y=(0,x.getCurrentTransform)(k),Q=0===Y[0]&&0===Y[3]||0===Y[1]&&0===Y[2],n=Q?S.slice(0):null;for(let b=0,m=0,w=d.length;b<w;b++)switch(0|d[b]){case _.OPS.rectangle:L=l[m++],H=l[m++];const M=l[m++],j=l[m++],J=L+M,ct=H+j;k.moveTo(L,H),0===M||0===j?k.lineTo(J,ct):(k.lineTo(J,H),k.lineTo(J,ct),k.lineTo(L,ct)),Q||O.updateRectMinMax(Y,[L,H,J,ct]),k.closePath();break;case _.OPS.moveTo:L=l[m++],H=l[m++],k.moveTo(L,H),Q||O.updatePathMinMax(Y,L,H);break;case _.OPS.lineTo:L=l[m++],H=l[m++],k.lineTo(L,H),Q||O.updatePathMinMax(Y,L,H);break;case _.OPS.curveTo:K=L,lt=H,L=l[m+4],H=l[m+5],k.bezierCurveTo(l[m],l[m+1],l[m+2],l[m+3],L,H),O.updateCurvePathMinMax(Y,K,lt,l[m],l[m+1],l[m+2],l[m+3],L,H,n),m+=6;break;case _.OPS.curveTo2:K=L,lt=H,k.bezierCurveTo(L,H,l[m],l[m+1],l[m+2],l[m+3]),O.updateCurvePathMinMax(Y,K,lt,L,H,l[m],l[m+1],l[m+2],l[m+3],n),L=l[m+2],H=l[m+3],m+=4;break;case _.OPS.curveTo3:K=L,lt=H,L=l[m+2],H=l[m+3],k.bezierCurveTo(l[m],l[m+1],L,H,L,H),O.updateCurvePathMinMax(Y,K,lt,l[m],l[m+1],L,H,L,H,n),m+=4;break;case _.OPS.closePath:k.closePath()}Q&&O.updateScalingPathMinMax(Y,n),O.setCurrentPoint(L,H)}closePath(){this.ctx.closePath()}stroke(d){d=void 0===d||d;const l=this.ctx,S=this.current.strokeColor;l.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof S&&(null==S?void 0:S.getPattern)?(l.save(),l.strokeStyle=S.getPattern(l,this,(0,x.getCurrentTransformInverse)(l),z.PathType.STROKE),this.rescaleAndStroke(!1),l.restore()):this.rescaleAndStroke(!0)),d&&this.consumePath(this.current.getClippedPathBoundingBox()),l.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(d){d=void 0===d||d;const l=this.ctx,S=this.current.fillColor;let O=!1;this.current.patternFill&&(l.save(),l.fillStyle=S.getPattern(l,this,(0,x.getCurrentTransformInverse)(l),z.PathType.FILL),O=!0);const L=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==L&&(this.pendingEOFill?(l.fill("evenodd"),this.pendingEOFill=!1):l.fill()),O&&l.restore(),d&&this.consumePath(L)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=tt}eoClip(){this.pendingClip=V}beginText(){this.current.textMatrix=_.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const d=this.pendingTextPaths,l=this.ctx;if(void 0!==d){l.save(),l.beginPath();for(const S of d)l.setTransform(...S.transform),l.translate(S.x,S.y),S.addToPath(l,S.fontSize);l.restore(),l.clip(),l.beginPath(),delete this.pendingTextPaths}else l.beginPath()}setCharSpacing(d){this.current.charSpacing=d}setWordSpacing(d){this.current.wordSpacing=d}setHScale(d){this.current.textHScale=d/100}setLeading(d){this.current.leading=-d}setFont(d,l){const S=this.commonObjs.get(d),k=this.current;if(!S)throw new Error(`Can't find font for ${d}`);if(k.fontMatrix=S.fontMatrix||_.FONT_IDENTITY_MATRIX,(0===k.fontMatrix[0]||0===k.fontMatrix[3])&&(0,_.warn)("Invalid font matrix for font "+d),l<0?(l=-l,k.fontDirection=-1):k.fontDirection=1,this.current.font=S,this.current.fontSize=l,S.isType3Font)return;let L="normal";S.black?L="900":S.bold&&(L="bold");const H=S.italic?"italic":"normal",K=`"${S.loadedName||"sans-serif"}", ${S.fallbackName}`;let lt=l;l<16?lt=16:l>100&&(lt=100),this.current.fontSizeScale=l/lt,this.ctx.font=`${H} ${L} ${lt}px ${K}`}setTextRenderingMode(d){this.current.textRenderingMode=d}setTextRise(d){this.current.textRise=d}moveText(d,l){this.current.x=this.current.lineX+=d,this.current.y=this.current.lineY+=l}setLeadingMoveText(d,l){this.setLeading(-l),this.moveText(d,l)}setTextMatrix(d,l,S,k,O,L){this.current.textMatrix=[d,l,S,k,O,L],this.current.textMatrixScale=Math.hypot(d,l),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(d,l,S,k){const O=this.ctx,L=this.current,H=L.font,K=L.textRenderingMode,lt=L.fontSize/L.fontSizeScale,Y=K&_.TextRenderingMode.FILL_STROKE_MASK,Q=!!(K&_.TextRenderingMode.ADD_TO_PATH_FLAG),n=L.patternFill&&!H.missingFile;let b;(H.disableFontFace||Q||n)&&(b=H.getPathGenerator(this.commonObjs,d)),H.disableFontFace||n?(O.save(),O.translate(l,S),O.beginPath(),b(O,lt),k&&O.setTransform(...k),(Y===_.TextRenderingMode.FILL||Y===_.TextRenderingMode.FILL_STROKE)&&O.fill(),(Y===_.TextRenderingMode.STROKE||Y===_.TextRenderingMode.FILL_STROKE)&&O.stroke(),O.restore()):((Y===_.TextRenderingMode.FILL||Y===_.TextRenderingMode.FILL_STROKE)&&O.fillText(d,l,S),(Y===_.TextRenderingMode.STROKE||Y===_.TextRenderingMode.FILL_STROKE)&&O.strokeText(d,l,S)),Q&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,x.getCurrentTransform)(O),x:l,y:S,fontSize:lt,addToPath:b})}get isFontSubpixelAAEnabled(){const{context:d}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);d.scale(1.5,1),d.fillText("I",0,10);const l=d.getImageData(0,0,10,10).data;let S=!1;for(let k=3;k<l.length;k+=4)if(l[k]>0&&l[k]<255){S=!0;break}return(0,_.shadow)(this,"isFontSubpixelAAEnabled",S)}showText(d){const l=this.current,S=l.font;if(S.isType3Font)return this.showType3Text(d);const k=l.fontSize;if(0===k)return;const O=this.ctx,L=l.fontSizeScale,H=l.charSpacing,K=l.wordSpacing,lt=l.fontDirection,Y=l.textHScale*lt,Q=d.length,n=S.vertical,b=n?1:-1,m=S.defaultVMetrics,w=k*l.fontMatrix[0],M=l.textRenderingMode===_.TextRenderingMode.FILL&&!S.disableFontFace&&!l.patternFill;let j;if(O.save(),O.transform(...l.textMatrix),O.translate(l.x,l.y+l.textRise),O.scale(Y,lt>0?-1:1),l.patternFill){O.save();const B=l.fillColor.getPattern(O,this,(0,x.getCurrentTransformInverse)(O),z.PathType.FILL);j=(0,x.getCurrentTransform)(O),O.restore(),O.fillStyle=B}let J=l.lineWidth;const ct=l.textMatrixScale;if(0===ct||0===J){const B=l.textRenderingMode&_.TextRenderingMode.FILL_STROKE_MASK;(B===_.TextRenderingMode.STROKE||B===_.TextRenderingMode.FILL_STROKE)&&(J=this.getSinglePixelWidth())}else J/=ct;1!==L&&(O.scale(L,L),J/=L),O.lineWidth=J;let _t,et=0;for(_t=0;_t<Q;++_t){const B=d[_t];if("number"==typeof B){et+=b*B*k/1e3;continue}let mt=!1;const At=(B.isSpace?K:0)+H,yt=B.fontChar,X=B.accent;let gt,Ct,Mt,xt=B.width;if(n){const Ft=B.vmetric||m,Tt=-(B.vmetric?Ft[1]:.5*xt)*w;xt=Ft?-Ft[0]:xt,gt=Tt/L,Ct=(et+Ft[2]*w)/L}else gt=et/L,Ct=0;if(S.remeasure&&xt>0){const Ft=1e3*O.measureText(yt).width/k*L;if(xt<Ft&&this.isFontSubpixelAAEnabled){const Tt=xt/Ft;mt=!0,O.save(),O.scale(Tt,1),gt/=Tt}else xt!==Ft&&(gt+=(xt-Ft)/2e3*k/L)}this.contentVisible&&(B.isInFont||S.missingFile)&&(M&&!X?O.fillText(yt,gt,Ct):(this.paintChar(yt,gt,Ct,j),X&&this.paintChar(X.fontChar,gt+k*X.offset.x/L,Ct-k*X.offset.y/L,j))),Mt=n?xt*w-At*lt:xt*w+At*lt,et+=Mt,mt&&O.restore()}n?l.y-=et:l.x+=et*Y,O.restore(),this.compose()}showType3Text(d){const l=this.ctx,S=this.current,k=S.font,O=S.fontSize,L=S.fontDirection,H=k.vertical?1:-1,K=S.charSpacing,lt=S.wordSpacing,Y=S.textHScale*L,Q=S.fontMatrix||_.FONT_IDENTITY_MATRIX,n=d.length;let m,w,M,j;if(S.textRenderingMode!==_.TextRenderingMode.INVISIBLE&&0!==O){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,l.save(),l.transform(...S.textMatrix),l.translate(S.x,S.y),l.scale(Y,L),m=0;m<n;++m){if(w=d[m],"number"==typeof w){j=H*w*O/1e3,this.ctx.translate(j,0),S.x+=j*Y;continue}const J=(w.isSpace?lt:0)+K,ct=k.charProcOperatorList[w.operatorListId];ct?(this.contentVisible&&(this.processingType3=w,this.save(),l.scale(O,O),l.transform(...Q),this.executeOperatorList(ct),this.restore()),M=_.Util.applyTransform([w.width,0],Q)[0]*O+J,l.translate(M,0),S.x+=M*Y):(0,_.warn)(`Type3 character "${w.operatorListId}" is not available.`)}l.restore(),this.processingType3=null}}setCharWidth(d,l){}setCharWidthAndBounds(d,l,S,k,O,L){this.ctx.rect(S,k,O-S,L-k),this.ctx.clip(),this.endPath()}getColorN_Pattern(d){let l;if("TilingPattern"===d[0]){const S=d[1],k=this.baseTransform||(0,x.getCurrentTransform)(this.ctx);l=new z.TilingPattern(d,S,this.ctx,{createCanvasGraphics:L=>new pt(L,this.commonObjs,this.objs,this.canvasFactory)},k)}else l=this._getPattern(d[1],d[2]);return l}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(d,l,S){var O;const k=(null==(O=this.selectColor)?void 0:O.call(this,d,l,S))||_.Util.makeHexColor(d,l,S);this.ctx.strokeStyle=k,this.current.strokeColor=k}setFillRGBColor(d,l,S){var O;const k=(null==(O=this.selectColor)?void 0:O.call(this,d,l,S))||_.Util.makeHexColor(d,l,S);this.ctx.fillStyle=k,this.current.fillColor=k,this.current.patternFill=!1}_getPattern(d,l=null){let S;return this.cachedPatterns.has(d)?S=this.cachedPatterns.get(d):(S=(0,z.getShadingPattern)(this.objs.get(d)),this.cachedPatterns.set(d,S)),l&&(S.matrix=l),S}shadingFill(d){if(!this.contentVisible)return;const l=this.ctx;this.save();const S=this._getPattern(d);l.fillStyle=S.getPattern(l,this,(0,x.getCurrentTransformInverse)(l),z.PathType.SHADING);const k=(0,x.getCurrentTransformInverse)(l);if(k){const O=l.canvas,L=O.width,H=O.height,K=_.Util.applyTransform([0,0],k),lt=_.Util.applyTransform([0,H],k),Y=_.Util.applyTransform([L,0],k),Q=_.Util.applyTransform([L,H],k),n=Math.min(K[0],lt[0],Y[0],Q[0]),b=Math.min(K[1],lt[1],Y[1],Q[1]),m=Math.max(K[0],lt[0],Y[0],Q[0]),w=Math.max(K[1],lt[1],Y[1],Q[1]);this.ctx.fillRect(n,b,m-n,w-b)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,_.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,_.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(d,l){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(d)&&6===d.length&&this.transform(...d),this.baseTransform=(0,x.getCurrentTransform)(this.ctx),l)&&(this.ctx.rect(l[0],l[1],l[2]-l[0],l[3]-l[1]),this.current.updateRectMinMax((0,x.getCurrentTransform)(this.ctx),l),this.clip(),this.endPath())}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(d){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const l=this.ctx;d.isolated||(0,_.info)("TODO: Support non-isolated groups."),d.knockout&&(0,_.warn)("Knockout groups not supported.");const S=(0,x.getCurrentTransform)(l);if(d.matrix&&l.transform(...d.matrix),!d.bbox)throw new Error("Bounding box is required.");let k=_.Util.getAxialAlignedBoundingBox(d.bbox,(0,x.getCurrentTransform)(l));k=_.Util.intersect(k,[0,0,l.canvas.width,l.canvas.height])||[0,0,0,0];const L=Math.floor(k[0]),H=Math.floor(k[1]);let K=Math.max(Math.ceil(k[2])-L,1),lt=Math.max(Math.ceil(k[3])-H,1),Y=1,Q=1;K>A&&(Y=K/A,K=A),lt>A&&(Q=lt/A,lt=A),this.current.startNewPathAndClipBox([0,0,K,lt]);let n="groupAt"+this.groupLevel;d.smask&&(n+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(n,K,lt),m=b.context;m.scale(1/Y,1/Q),m.translate(-L,-H),m.transform(...S),d.smask?this.smaskStack.push({canvas:b.canvas,context:m,offsetX:L,offsetY:H,scaleX:Y,scaleY:Q,subtype:d.smask.subtype,backdrop:d.smask.backdrop,transferMap:d.smask.transferMap||null,startTransformInverse:null}):(l.setTransform(1,0,0,1,0,0),l.translate(L,H),l.scale(Y,Q),l.save()),s(l,m),this.ctx=m,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(l),this.groupLevel++}endGroup(d){if(!this.contentVisible)return;this.groupLevel--;const l=this.ctx,S=this.groupStack.pop();if(this.ctx=S,this.ctx.imageSmoothingEnabled=!1,d.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const k=(0,x.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...k);const O=_.Util.getAxialAlignedBoundingBox([0,0,l.canvas.width,l.canvas.height],k);this.ctx.drawImage(l.canvas,0,0),this.ctx.restore(),this.compose(O)}}beginAnnotation(d,l,S,k,O){if(ht(this,nt,pe).call(this),p(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(l)&&4===l.length){const L=l[2]-l[0],H=l[3]-l[1];if(O&&this.annotationCanvasMap){(S=S.slice())[4]-=l[0],S[5]-=l[1],(l=l.slice())[0]=l[1]=0,l[2]=L,l[3]=H;const[K,lt]=_.Util.singularValueDecompose2dScale((0,x.getCurrentTransform)(this.ctx)),{viewportScale:Y}=this,Q=Math.ceil(L*this.outputScaleX*Y),n=Math.ceil(H*this.outputScaleY*Y);this.annotationCanvas=this.canvasFactory.create(Q,n);const{canvas:b,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(d,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.setTransform(K,0,0,-lt,0,H*lt),p(this.ctx,this.foregroundColor)}else p(this.ctx,this.foregroundColor),this.ctx.rect(l[0],l[1],L,H),this.ctx.clip(),this.endPath()}this.current=new o(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...S),this.transform(...k)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(d){if(!this.contentVisible)return;const l=d.count;(d=this.getObject(d.data,d)).count=l;const S=this.ctx,k=this.processingType3;if(k&&(void 0===k.compiled&&(k.compiled=function(I){const{width:d,height:l}=I;if(d>f||l>f)return null;const k=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),O=d+1;let H,K,lt,L=new Uint8Array(O*(l+1));const Y=d+7&-8;let Q=new Uint8Array(Y*l),n=0;for(const j of I.data){let J=128;for(;J>0;)Q[n++]=j&J?0:255,J>>=1}let b=0;for(n=0,0!==Q[n]&&(L[0]=1,++b),K=1;K<d;K++)Q[n]!==Q[n+1]&&(L[K]=Q[n]?2:1,++b),n++;for(0!==Q[n]&&(L[K]=2,++b),H=1;H<l;H++){n=H*Y,lt=H*O,Q[n-Y]!==Q[n]&&(L[lt]=Q[n]?1:8,++b);let j=(Q[n]?4:0)+(Q[n-Y]?8:0);for(K=1;K<d;K++)j=(j>>2)+(Q[n+1]?4:0)+(Q[n-Y+1]?8:0),k[j]&&(L[lt+K]=k[j],++b),n++;if(Q[n-Y]!==Q[n]&&(L[lt+K]=Q[n]?2:4,++b),b>1e3)return null}for(n=Y*(l-1),lt=H*O,0!==Q[n]&&(L[lt]=8,++b),K=1;K<d;K++)Q[n]!==Q[n+1]&&(L[lt+K]=Q[n]?4:8,++b),n++;if(0!==Q[n]&&(L[lt+K]=4,++b),b>1e3)return null;const m=new Int32Array([0,O,-1,0,-O,0,0,0,1]),w=new Path2D;for(H=0;b&&H<=l;H++){let j=H*O;const J=j+d;for(;j<J&&!L[j];)j++;if(j===J)continue;w.moveTo(j%O,H);const ct=j;let et=L[j];do{const _t=m[et];do{j+=_t}while(!L[j]);const B=L[j];5!==B&&10!==B?(et=B,L[j]=0):(et=B&51*et>>4,L[j]&=et>>2|et<<2),w.lineTo(j%O,j/O|0),L[j]||--b}while(ct!==j);--H}return Q=null,L=null,function(j){j.save(),j.scale(1/d,-1/l),j.translate(0,-l),j.fill(w),j.beginPath(),j.restore()}}(d)),k.compiled))return void k.compiled(S);const O=this._createMaskCanvas(d),L=O.canvas;S.save(),S.setTransform(1,0,0,1,0,0),S.drawImage(L,O.offsetX,O.offsetY),S.restore(),this.compose()}paintImageMaskXObjectRepeat(d,l,S=0,k=0,O,L){if(!this.contentVisible)return;d=this.getObject(d.data,d);const H=this.ctx;H.save();const K=(0,x.getCurrentTransform)(H);H.transform(l,S,k,O,0,0);const lt=this._createMaskCanvas(d);H.setTransform(1,0,0,1,0,0);for(let Y=0,Q=L.length;Y<Q;Y+=2){const n=_.Util.transform(K,[l,S,k,O,L[Y],L[Y+1]]),[b,m]=_.Util.applyTransform([0,0],n);H.drawImage(lt.canvas,b,m)}H.restore(),this.compose()}paintImageMaskXObjectGroup(d){if(!this.contentVisible)return;const l=this.ctx,S=this.current.fillColor,k=this.current.patternFill;for(const O of d){const{data:L,width:H,height:K,transform:lt}=O,Y=this.cachedCanvases.getCanvas("maskCanvas",H,K),Q=Y.context;Q.save(),t(Q,this.getObject(L,O)),Q.globalCompositeOperation="source-in",Q.fillStyle=k?S.getPattern(Q,this,(0,x.getCurrentTransformInverse)(l),z.PathType.FILL):S,Q.fillRect(0,0,H,K),Q.restore(),l.save(),l.transform(...lt),l.scale(1,-1),e(l,Y.canvas,0,0,H,K,0,-1,1,1),l.restore()}this.compose()}paintImageXObject(d){if(!this.contentVisible)return;const l=this.getObject(d);l?this.paintInlineImageXObject(l):(0,_.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(d,l,S,k){if(!this.contentVisible)return;const O=this.getObject(d);if(!O)return void(0,_.warn)("Dependent image isn't ready yet");const L=O.width,H=O.height,K=[];for(let lt=0,Y=k.length;lt<Y;lt+=2)K.push({transform:[l,0,0,S,k[lt],k[lt+1]],x:0,y:0,w:L,h:H});this.paintInlineImageXObjectGroup(O,K)}paintInlineImageXObject(d){if(!this.contentVisible)return;const l=d.width,S=d.height,k=this.ctx;let O;if(this.save(),k.scale(1/l,-1/S),"function"==typeof HTMLElement&&d instanceof HTMLElement||!d.data)O=d;else{const H=this.cachedCanvases.getCanvas("inlineImage",l,S);a(H.context,d,this.current.transferMaps),O=H.canvas}const L=this._scaleImage(O,(0,x.getCurrentTransformInverse)(k));k.imageSmoothingEnabled=dt((0,x.getCurrentTransform)(k),d.interpolate),e(k,L.img,0,0,L.paintWidth,L.paintHeight,0,-S,l,S),this.compose(),this.restore()}paintInlineImageXObjectGroup(d,l){if(!this.contentVisible)return;const S=this.ctx,L=this.cachedCanvases.getCanvas("inlineImage",d.width,d.height);a(L.context,d,this.current.transferMaps);for(const K of l)S.save(),S.transform(...K.transform),S.scale(1,-1),e(S,L.canvas,K.x,K.y,K.w,K.h,0,-1,1,1),S.restore();this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(d){}markPointProps(d,l){}beginMarkedContent(d){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(d,l){this.markedContentStack.push("OC"===d?{visible:this.optionalContentConfig.isVisible(l)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(d){const l=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(d);const S=this.ctx;this.pendingClip&&(l||(this.pendingClip===V?S.clip("evenodd"):S.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),S.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const d=(0,x.getCurrentTransform)(this.ctx);if(0===d[1]&&0===d[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(d[0]),Math.abs(d[3]));else{const l=Math.abs(d[0]*d[3]-d[2]*d[1]),S=Math.hypot(d[0],d[2]),k=Math.hypot(d[1],d[3]);this._cachedGetSinglePixelWidth=Math.max(S,k)/l}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:d}=this.current,l=(0,x.getCurrentTransform)(this.ctx);let S,k;if(0===l[1]&&0===l[2]){const O=Math.abs(l[0]),L=Math.abs(l[3]);if(0===d)S=1/O,k=1/L;else{const H=O*d,K=L*d;S=H<1?1/H:1,k=K<1?1/K:1}}else{const O=Math.abs(l[0]*l[3]-l[2]*l[1]),L=Math.hypot(l[0],l[1]),H=Math.hypot(l[2],l[3]);if(0===d)S=H/O,k=L/O;else{const K=d*O;S=H>K?H/K:1,k=L>K?L/K:1}}this._cachedScaleForStroking=[S,k]}return this._cachedScaleForStroking}rescaleAndStroke(d){const{ctx:l}=this,{lineWidth:S}=this.current,[k,O]=this.getScaleForStroking();if(l.lineWidth=S||1,1===k&&1===O)return void l.stroke();let L,H,K;d&&(L=(0,x.getCurrentTransform)(l),H=l.getLineDash().slice(),K=l.lineDashOffset),l.scale(k,O);const lt=Math.max(k,O);l.setLineDash(l.getLineDash().map(Y=>Y/lt)),l.lineDashOffset/=lt,l.stroke(),d&&(l.setTransform(...L),l.setLineDash(H),l.lineDashOffset=K)}isContentVisible(){for(let d=this.markedContentStack.length-1;d>=0;d--)if(!this.markedContentStack[d].visible)return!1;return!0}};let q=pt;nt=new WeakSet,pe=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},u.CanvasGraphics=q;for(const I in _.OPS)void 0!==q.prototype[I]&&(q.prototype[_.OPS[I]]=q.prototype[I])},(rt,u,$)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.TilingPattern=u.PathType=void 0,u.getShadingPattern=function(e){switch(e[0]){case"RadialAxial":return new v(e);case"Mesh":return new y(e);case"Dummy":return new f}throw new Error(`Unknown IR type: ${e[0]}`)};var _=$(1),x=$(6),z=$(12);const G={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function F(e,r){if(!r||z.isNodeJS)return;const o=r[2]-r[0],a=r[3]-r[1],t=new Path2D;t.rect(r[0],r[1],o,a),e.clip(t)}u.PathType=G;class N{constructor(){this.constructor===N&&(0,_.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,_.unreachable)("Abstract method `getPattern` called.")}}class v extends N{constructor(r){super(),this._type=r[1],this._bbox=r[2],this._colorStops=r[3],this._p0=r[4],this._p1=r[5],this._r0=r[6],this._r1=r[7],this.matrix=null}_createGradient(r){let o;"axial"===this._type?o=r.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(o=r.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const a of this._colorStops)o.addColorStop(a[0],a[1]);return o}getPattern(r,o,a,t){let s;if(t===G.STROKE||t===G.FILL){const p=o.current.getClippedPathBoundingBox(t,(0,x.getCurrentTransform)(r))||[0,0,0,0],C=Math.ceil(p[2]-p[0])||1,R=Math.ceil(p[3]-p[1])||1,g=o.cachedCanvases.getCanvas("pattern",C,R,!0),P=g.context;P.clearRect(0,0,P.canvas.width,P.canvas.height),P.beginPath(),P.rect(0,0,P.canvas.width,P.canvas.height),P.translate(-p[0],-p[1]),a=_.Util.transform(a,[1,0,0,1,p[0],p[1]]),P.transform(...o.baseTransform),this.matrix&&P.transform(...this.matrix),F(P,this._bbox),P.fillStyle=this._createGradient(P),P.fill(),s=r.createPattern(g.canvas,"no-repeat");const Z=new DOMMatrix(a);s.setTransform(Z)}else F(r,this._bbox),s=this._createGradient(r);return s}}function A(e,r,o,a,t,s,p,C){const R=r.coords,g=r.colors,P=e.data,Z=4*e.width;let dt;R[o+1]>R[a+1]&&(dt=o,o=a,a=dt,dt=s,s=p,p=dt),R[a+1]>R[t+1]&&(dt=a,a=t,t=dt,dt=p,p=C,C=dt),R[o+1]>R[a+1]&&(dt=o,o=a,a=dt,dt=s,s=p,p=dt);const ot=(R[o]+r.offsetX)*r.scaleX,at=(R[o+1]+r.offsetY)*r.scaleY,tt=(R[a]+r.offsetX)*r.scaleX,V=(R[a+1]+r.offsetY)*r.scaleY,q=(R[t]+r.offsetX)*r.scaleX,nt=(R[t+1]+r.offsetY)*r.scaleY;if(at>=nt)return;const ut=g[s],pt=g[s+1],I=g[s+2],d=g[p],l=g[p+1],S=g[p+2],k=g[C],O=g[C+1],L=g[C+2],H=Math.round(at),K=Math.round(nt);let lt,Y,Q,n,b,m,w,M;for(let j=H;j<=K;j++){if(j<V){let B;B=j<at?0:(at-j)/(at-V),lt=ot-(ot-tt)*B,Y=ut-(ut-d)*B,Q=pt-(pt-l)*B,n=I-(I-S)*B}else{let B;B=j>nt?1:V===nt?0:(V-j)/(V-nt),lt=tt-(tt-q)*B,Y=d-(d-k)*B,Q=l-(l-O)*B,n=S-(S-L)*B}let J;J=j<at?0:j>nt?1:(at-j)/(at-nt),b=ot-(ot-q)*J,m=ut-(ut-k)*J,w=pt-(pt-O)*J,M=I-(I-L)*J;const ct=Math.round(Math.min(lt,b)),et=Math.round(Math.max(lt,b));let _t=Z*j+4*ct;for(let B=ct;B<=et;B++)J=(lt-B)/(lt-b),J<0?J=0:J>1&&(J=1),P[_t++]=Y-(Y-m)*J|0,P[_t++]=Q-(Q-w)*J|0,P[_t++]=n-(n-M)*J|0,P[_t++]=255}}function T(e,r,o){const a=r.coords,t=r.colors;let s,p;switch(r.type){case"lattice":const C=r.verticesPerRow,R=Math.floor(a.length/C)-1,g=C-1;for(s=0;s<R;s++){let P=s*C;for(let Z=0;Z<g;Z++,P++)A(e,o,a[P],a[P+1],a[P+C],t[P],t[P+1],t[P+C]),A(e,o,a[P+C+1],a[P+1],a[P+C],t[P+C+1],t[P+1],t[P+C])}break;case"triangles":for(s=0,p=a.length;s<p;s+=3)A(e,o,a[s],a[s+1],a[s+2],t[s],t[s+1],t[s+2]);break;default:throw new Error("illegal figure")}}class y extends N{constructor(r){super(),this._coords=r[2],this._colors=r[3],this._figures=r[4],this._bounds=r[5],this._bbox=r[7],this._background=r[8],this.matrix=null}_createMeshCanvas(r,o,a){const C=Math.floor(this._bounds[0]),R=Math.floor(this._bounds[1]),g=Math.ceil(this._bounds[2])-C,P=Math.ceil(this._bounds[3])-R,Z=Math.min(Math.ceil(Math.abs(g*r[0]*1.1)),3e3),dt=Math.min(Math.ceil(Math.abs(P*r[1]*1.1)),3e3),ot=g/Z,at=P/dt,tt={coords:this._coords,colors:this._colors,offsetX:-C,offsetY:-R,scaleX:1/ot,scaleY:1/at},nt=a.getCanvas("mesh",Z+4,dt+4,!1),ut=nt.context,pt=ut.createImageData(Z,dt);if(o){const d=pt.data;for(let l=0,S=d.length;l<S;l+=4)d[l]=o[0],d[l+1]=o[1],d[l+2]=o[2],d[l+3]=255}for(const d of this._figures)T(pt,d,tt);return ut.putImageData(pt,2,2),{canvas:nt.canvas,offsetX:C-2*ot,offsetY:R-2*at,scaleX:ot,scaleY:at}}getPattern(r,o,a,t){let s;if(F(r,this._bbox),t===G.SHADING)s=_.Util.singularValueDecompose2dScale((0,x.getCurrentTransform)(r));else if(s=_.Util.singularValueDecompose2dScale(o.baseTransform),this.matrix){const C=_.Util.singularValueDecompose2dScale(this.matrix);s=[s[0]*C[0],s[1]*C[1]]}const p=this._createMeshCanvas(s,t===G.SHADING?null:this._background,o.cachedCanvases);return t!==G.SHADING&&(r.setTransform(...o.baseTransform),this.matrix&&r.transform(...this.matrix)),r.translate(p.offsetX,p.offsetY),r.scale(p.scaleX,p.scaleY),r.createPattern(p.canvas,"no-repeat")}}class f extends N{getPattern(){return"hotpink"}}class i{static get MAX_PATTERN_SIZE(){return(0,_.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(r,o,a,t,s){this.operatorList=r[2],this.matrix=r[3]||[1,0,0,1,0,0],this.bbox=r[4],this.xstep=r[5],this.ystep=r[6],this.paintType=r[7],this.tilingType=r[8],this.color=o,this.ctx=a,this.canvasGraphicsFactory=t,this.baseTransform=s}createPatternCanvas(r){const o=this.operatorList,a=this.bbox,t=this.xstep,s=this.ystep,p=this.paintType,R=this.color,g=this.canvasGraphicsFactory;(0,_.info)("TilingType: "+this.tilingType);const P=a[0],Z=a[1],dt=a[2],ot=a[3],at=_.Util.singularValueDecompose2dScale(this.matrix),tt=_.Util.singularValueDecompose2dScale(this.baseTransform),V=[at[0]*tt[0],at[1]*tt[1]],q=this.getSizeAndScale(t,this.ctx.canvas.width,V[0]),nt=this.getSizeAndScale(s,this.ctx.canvas.height,V[1]),ut=r.cachedCanvases.getCanvas("pattern",q.size,nt.size,!0),pt=ut.context,I=g.createCanvasGraphics(pt);I.groupLevel=r.groupLevel,this.setFillAndStrokeStyleToContext(I,p,R);let d=P,l=Z,S=dt,k=ot;return P<0&&(d=0,S+=Math.abs(P)),Z<0&&(l=0,k+=Math.abs(Z)),pt.translate(-q.scale*d,-nt.scale*l),I.transform(q.scale,0,0,nt.scale,0,0),pt.save(),this.clipBbox(I,d,l,S,k),I.baseTransform=(0,x.getCurrentTransform)(I.ctx),I.executeOperatorList(o),I.endDrawing(),{canvas:ut.canvas,scaleX:q.scale,scaleY:nt.scale,offsetX:d,offsetY:l}}getSizeAndScale(r,o,a){r=Math.abs(r);const t=Math.max(i.MAX_PATTERN_SIZE,o);let s=Math.ceil(r*a);return s>=t?s=t:a=s/r,{scale:a,size:s}}clipBbox(r,o,a,t,s){r.ctx.rect(o,a,t-o,s-a),r.current.updateRectMinMax((0,x.getCurrentTransform)(r.ctx),[o,a,t,s]),r.clip(),r.endPath()}setFillAndStrokeStyleToContext(r,o,a){const t=r.ctx,s=r.current;switch(o){case 1:const p=this.ctx;t.fillStyle=p.fillStyle,t.strokeStyle=p.strokeStyle,s.fillColor=p.fillStyle,s.strokeColor=p.strokeStyle;break;case 2:const C=_.Util.makeHexColor(a[0],a[1],a[2]);t.fillStyle=C,t.strokeStyle=C,s.fillColor=C,s.strokeColor=C;break;default:throw new _.FormatError(`Unsupported paint type: ${o}`)}}getPattern(r,o,a,t){let s=a;t!==G.SHADING&&(s=_.Util.transform(s,o.baseTransform),this.matrix&&(s=_.Util.transform(s,this.matrix)));const p=this.createPatternCanvas(o);let C=new DOMMatrix(s);C=C.translate(p.offsetX,p.offsetY),C=C.scale(1/p.scaleX,1/p.scaleY);const R=r.createPattern(p.canvas,"repeat");return R.setTransform(C),R}}u.TilingPattern=i},(rt,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.isNodeJS=void 0;const $=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);u.isNodeJS=$},(rt,u,$)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.applyMaskImageData=function({src:z,srcPos:G=0,dest:F,destPos:N=0,width:v,height:A,inverseDecode:T=!1}){const y=_.FeatureTest.isLittleEndian?4278190080:255,[f,h]=T?[0,y]:[y,0],c=v>>3,i=7&v,e=z.length;F=new Uint32Array(F.buffer);for(let r=0;r<A;r++){for(const a=G+c;G<a;G++){const t=G<e?z[G]:255;F[N++]=128&t?h:f,F[N++]=64&t?h:f,F[N++]=32&t?h:f,F[N++]=16&t?h:f,F[N++]=8&t?h:f,F[N++]=4&t?h:f,F[N++]=2&t?h:f,F[N++]=1&t?h:f}if(0===i)continue;const o=G<e?z[G++]:255;for(let a=0;a<i;a++)F[N++]=o&1<<7-a?h:f}return{srcPos:G,destPos:N}};var _=$(1)},(rt,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.GlobalWorkerOptions=void 0;const $=Object.create(null);u.GlobalWorkerOptions=$,$.workerPort=void 0===$.workerPort?null:$.workerPort,$.workerSrc=void 0===$.workerSrc?"":$.workerSrc},(rt,u,$)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.MessageHandler=void 0;var _=$(1);function G(N){switch(N instanceof Error||"object"==typeof N&&null!==N||(0,_.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),N.name){case"AbortException":return new _.AbortException(N.message);case"MissingPDFException":return new _.MissingPDFException(N.message);case"PasswordException":return new _.PasswordException(N.message,N.code);case"UnexpectedResponseException":return new _.UnexpectedResponseException(N.message,N.status);case"UnknownErrorException":return new _.UnknownErrorException(N.message,N.details);default:return new _.UnknownErrorException(N.message,N.toString())}}u.MessageHandler=class{constructor(v,A,T){this.sourceName=v,this.targetName=A,this.comObj=T,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=y=>{const f=y.data;if(f.targetName!==this.sourceName)return;if(f.stream)return void this._processStreamMessage(f);if(f.callback){const c=f.callbackId,i=this.callbackCapabilities[c];if(!i)throw new Error(`Cannot resolve callback ${c}`);if(delete this.callbackCapabilities[c],1===f.callback)i.resolve(f.data);else{if(2!==f.callback)throw new Error("Unexpected callback case");i.reject(G(f.reason))}return}const h=this.actionHandler[f.action];if(!h)throw new Error(`Unknown action from worker: ${f.action}`);if(f.callbackId){const c=this.sourceName,i=f.sourceName;new Promise(function(e){e(h(f.data))}).then(function(e){T.postMessage({sourceName:c,targetName:i,callback:1,callbackId:f.callbackId,data:e})},function(e){T.postMessage({sourceName:c,targetName:i,callback:2,callbackId:f.callbackId,reason:G(e)})})}else f.streamId?this._createStreamSink(f):h(f.data)},T.addEventListener("message",this._onComObjOnMessage)}on(v,A){const T=this.actionHandler;if(T[v])throw new Error(`There is already an actionName called "${v}"`);T[v]=A}send(v,A,T){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,data:A},T)}sendWithPromise(v,A,T){const y=this.callbackId++,f=(0,_.createPromiseCapability)();this.callbackCapabilities[y]=f;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,callbackId:y,data:A},T)}catch(h){f.reject(h)}return f.promise}sendWithStream(v,A,T,y){const f=this.streamId++,h=this.sourceName,c=this.targetName,i=this.comObj;return new ReadableStream({start:e=>{const r=(0,_.createPromiseCapability)();return this.streamControllers[f]={controller:e,startCall:r,pullCall:null,cancelCall:null,isClosed:!1},i.postMessage({sourceName:h,targetName:c,action:v,streamId:f,data:A,desiredSize:e.desiredSize},y),r.promise},pull:e=>{const r=(0,_.createPromiseCapability)();return this.streamControllers[f].pullCall=r,i.postMessage({sourceName:h,targetName:c,stream:6,streamId:f,desiredSize:e.desiredSize}),r.promise},cancel:e=>{(0,_.assert)(e instanceof Error,"cancel must have a valid reason");const r=(0,_.createPromiseCapability)();return this.streamControllers[f].cancelCall=r,this.streamControllers[f].isClosed=!0,i.postMessage({sourceName:h,targetName:c,stream:1,streamId:f,reason:G(e)}),r.promise}},T)}_createStreamSink(v){const A=v.streamId,T=this.sourceName,y=v.sourceName,f=this.comObj,h=this,c=this.actionHandler[v.action],i={enqueue(e,r=1,o){if(this.isCancelled)return;const a=this.desiredSize;this.desiredSize-=r,a>0&&this.desiredSize<=0&&(this.sinkCapability=(0,_.createPromiseCapability)(),this.ready=this.sinkCapability.promise),f.postMessage({sourceName:T,targetName:y,stream:4,streamId:A,chunk:e},o)},close(){this.isCancelled||(this.isCancelled=!0,f.postMessage({sourceName:T,targetName:y,stream:3,streamId:A}),delete h.streamSinks[A])},error(e){(0,_.assert)(e instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,f.postMessage({sourceName:T,targetName:y,stream:5,streamId:A,reason:G(e)}))},sinkCapability:(0,_.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:v.desiredSize,ready:null};i.sinkCapability.resolve(),i.ready=i.sinkCapability.promise,this.streamSinks[A]=i,new Promise(function(e){e(c(v.data,i))}).then(function(){f.postMessage({sourceName:T,targetName:y,stream:8,streamId:A,success:!0})},function(e){f.postMessage({sourceName:T,targetName:y,stream:8,streamId:A,reason:G(e)})})}_processStreamMessage(v){const A=v.streamId,T=this.sourceName,y=v.sourceName,f=this.comObj,h=this.streamControllers[A],c=this.streamSinks[A];switch(v.stream){case 8:v.success?h.startCall.resolve():h.startCall.reject(G(v.reason));break;case 7:v.success?h.pullCall.resolve():h.pullCall.reject(G(v.reason));break;case 6:if(!c){f.postMessage({sourceName:T,targetName:y,stream:7,streamId:A,success:!0});break}c.desiredSize<=0&&v.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=v.desiredSize,new Promise(function(i){i(c.onPull&&c.onPull())}).then(function(){f.postMessage({sourceName:T,targetName:y,stream:7,streamId:A,success:!0})},function(i){f.postMessage({sourceName:T,targetName:y,stream:7,streamId:A,reason:G(i)})});break;case 4:if((0,_.assert)(h,"enqueue should have stream controller"),h.isClosed)break;h.controller.enqueue(v.chunk);break;case 3:if((0,_.assert)(h,"close should have stream controller"),h.isClosed)break;h.isClosed=!0,h.controller.close(),this._deleteStreamController(h,A);break;case 5:(0,_.assert)(h,"error should have stream controller"),h.controller.error(G(v.reason)),this._deleteStreamController(h,A);break;case 2:v.success?h.cancelCall.resolve():h.cancelCall.reject(G(v.reason)),this._deleteStreamController(h,A);break;case 1:if(!c)break;new Promise(function(i){i(c.onCancel&&c.onCancel(G(v.reason)))}).then(function(){f.postMessage({sourceName:T,targetName:y,stream:2,streamId:A,success:!0})},function(i){f.postMessage({sourceName:T,targetName:y,stream:2,streamId:A,reason:G(i)})}),c.sinkCapability.reject(G(v.reason)),c.isCancelled=!0,delete this.streamSinks[A];break;default:throw new Error("Unexpected stream case")}}_deleteStreamController(v,A){var T=this;return _asyncToGenerator(function*(){yield Promise.allSettled([v.startCall&&v.startCall.promise,v.pullCall&&v.pullCall.promise,v.cancelCall&&v.cancelCall.promise]),delete T.streamControllers[A]})()}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(rt,u,$)=>{var z,G;Object.defineProperty(u,"__esModule",{value:!0}),u.Metadata=void 0;var _=$(1);z=new WeakMap,G=new WeakMap,u.Metadata=class{constructor({parsedData:N,rawData:v}){it(this,z,void 0),it(this,G,void 0),bt(this,z,N),bt(this,G,v)}getRaw(){return E(this,G)}get(N){var v;return null!=(v=E(this,z).get(N))?v:null}getAll(){return(0,_.objectFromMap)(E(this,z))}has(N){return E(this,z).has(N)}}},(rt,u,$)=>{var N,v,A,T,y,f,ge;Object.defineProperty(u,"__esModule",{value:!0}),u.OptionalContentConfig=void 0;var _=$(1),x=$(8);const z=Symbol("INTERNAL");class G{constructor(i,e){it(this,N,!0),this.name=i,this.intent=e}get visible(){return E(this,N)}_setVisible(i,e){i!==z&&(0,_.unreachable)("Internal method `_setVisible` called."),bt(this,N,e)}}N=new WeakMap,v=new WeakMap,A=new WeakMap,T=new WeakMap,y=new WeakMap,f=new WeakSet,ge=function(i){const e=i.length;if(e<2)return!0;const r=i[0];for(let o=1;o<e;o++){const a=i[o];let t;if(Array.isArray(a))t=ht(this,f,ge).call(this,a);else{if(!E(this,A).has(a))return(0,_.warn)(`Optional content group not found: ${a}`),!0;t=E(this,A).get(a).visible}switch(r){case"And":if(!t)return!1;break;case"Or":if(t)return!0;break;case"Not":return!t;default:return!0}}return"And"===r},u.OptionalContentConfig=class{constructor(i){if(it(this,f),it(this,v,null),it(this,A,new Map),it(this,T,null),it(this,y,null),this.name=null,this.creator=null,null!==i){this.name=i.name,this.creator=i.creator,bt(this,y,i.order);for(const e of i.groups)E(this,A).set(e.id,new G(e.name,e.intent));if("OFF"===i.baseState)for(const e of E(this,A).values())e._setVisible(z,!1);for(const e of i.on)E(this,A).get(e)._setVisible(z,!0);for(const e of i.off)E(this,A).get(e)._setVisible(z,!1);bt(this,T,this.getHash())}}isVisible(i){if(0===E(this,A).size)return!0;if(!i)return(0,_.warn)("Optional content group not defined."),!0;if("OCG"===i.type)return E(this,A).has(i.id)?E(this,A).get(i.id).visible:((0,_.warn)(`Optional content group not found: ${i.id}`),!0);if("OCMD"===i.type){if(i.expression)return ht(this,f,ge).call(this,i.expression);if(!i.policy||"AnyOn"===i.policy){for(const e of i.ids){if(!E(this,A).has(e))return(0,_.warn)(`Optional content group not found: ${e}`),!0;if(E(this,A).get(e).visible)return!0}return!1}if("AllOn"===i.policy){for(const e of i.ids){if(!E(this,A).has(e))return(0,_.warn)(`Optional content group not found: ${e}`),!0;if(!E(this,A).get(e).visible)return!1}return!0}if("AnyOff"===i.policy){for(const e of i.ids){if(!E(this,A).has(e))return(0,_.warn)(`Optional content group not found: ${e}`),!0;if(!E(this,A).get(e).visible)return!0}return!1}if("AllOff"===i.policy){for(const e of i.ids){if(!E(this,A).has(e))return(0,_.warn)(`Optional content group not found: ${e}`),!0;if(E(this,A).get(e).visible)return!1}return!0}return(0,_.warn)(`Unknown optional content policy ${i.policy}.`),!0}return(0,_.warn)(`Unknown group type ${i.type}.`),!0}setVisibility(i,e=!0){E(this,A).has(i)?(E(this,A).get(i)._setVisible(z,!!e),bt(this,v,null)):(0,_.warn)(`Optional content group not found: ${i}`)}get hasInitialVisibility(){return this.getHash()===E(this,T)}getOrder(){return E(this,A).size?E(this,y)?E(this,y).slice():[...E(this,A).keys()]:null}getGroups(){return E(this,A).size>0?(0,_.objectFromMap)(E(this,A)):null}getGroup(i){return E(this,A).get(i)||null}getHash(){if(null!==E(this,v))return E(this,v);const i=new x.MurmurHash3_64;for(const[e,r]of E(this,A))i.update(`${e}:${r.visible}`);return bt(this,v,i.hexdigest())}}},(rt,u,$)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFDataTransportStream=void 0;var _=$(1),x=$(6);u.PDFDataTransportStream=class{constructor(v,A){(0,_.assert)(A,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=v.progressiveDone||!1,this._contentDispositionFilename=v.contentDispositionFilename||null;const T=v.initialData;if((null==T?void 0:T.length)>0){const y=new Uint8Array(T).buffer;this._queuedChunks.push(y)}this._pdfDataRangeTransport=A,this._isStreamingSupported=!v.disableStream,this._isRangeSupported=!v.disableRange,this._contentLength=v.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((y,f)=>{this._onReceiveData({begin:y,chunk:f})}),this._pdfDataRangeTransport.addProgressListener((y,f)=>{this._onProgress({loaded:y,total:f})}),this._pdfDataRangeTransport.addProgressiveReadListener(y=>{this._onReceiveData({chunk:y})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(v){const A=new Uint8Array(v.chunk).buffer;if(void 0===v.begin)this._fullRequestReader?this._fullRequestReader._enqueue(A):this._queuedChunks.push(A);else{const T=this._rangeReaders.some(function(y){return y._begin===v.begin&&(y._enqueue(A),!0)});(0,_.assert)(T,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var v,A;return null!=(A=null==(v=this._fullRequestReader)?void 0:v._loaded)?A:0}_onProgress(v){var A,T,y,f;void 0===v.total?null==(T=null==(A=this._rangeReaders[0])?void 0:A.onProgress)||T.call(A,{loaded:v.loaded}):null==(f=null==(y=this._fullRequestReader)?void 0:y.onProgress)||f.call(y,{loaded:v.loaded,total:v.total})}_onProgressiveDone(){var v;null==(v=this._fullRequestReader)||v.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(v){const A=this._rangeReaders.indexOf(v);A>=0&&this._rangeReaders.splice(A,1)}getFullReader(){(0,_.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const v=this._queuedChunks;return this._queuedChunks=null,new G(this,v,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(v,A){if(A<=this._progressiveDataLength)return null;const T=new F(this,v,A);return this._pdfDataRangeTransport.requestDataRange(v,A),this._rangeReaders.push(T),T}cancelAllRequests(v){var A;null==(A=this._fullRequestReader)||A.cancel(v);for(const T of this._rangeReaders.slice(0))T.cancel(v);this._pdfDataRangeTransport.abort()}};class G{constructor(v,A,T=!1,y=null){this._stream=v,this._done=T||!1,this._filename=(0,x.isPdfFile)(y)?y:null,this._queuedChunks=A||[],this._loaded=0;for(const f of this._queuedChunks)this._loaded+=f.byteLength;this._requests=[],this._headersReady=Promise.resolve(),v._fullRequestReader=this,this.onProgress=null}_enqueue(v){this._done||(this._requests.length>0?this._requests.shift().resolve({value:v,done:!1}):this._queuedChunks.push(v),this._loaded+=v.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var v=this;return _asyncToGenerator(function*(){if(v._queuedChunks.length>0)return{value:v._queuedChunks.shift(),done:!1};if(v._done)return{value:void 0,done:!0};const A=(0,_.createPromiseCapability)();return v._requests.push(A),A.promise})()}cancel(v){this._done=!0;for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class F{constructor(v,A,T){this._stream=v,this._begin=A,this._end=T,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(v){if(!this._done){if(0===this._requests.length)this._queuedChunk=v;else{this._requests.shift().resolve({value:v,done:!1});for(const T of this._requests)T.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var v=this;return _asyncToGenerator(function*(){if(v._queuedChunk){const T=v._queuedChunk;return v._queuedChunk=null,{value:T,done:!1}}if(v._done)return{value:void 0,done:!0};const A=(0,_.createPromiseCapability)();return v._requests.push(A),A.promise})()}cancel(v){this._done=!0;for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(rt,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.XfaText=void 0;class ${static textContent(x){const z=[],G={items:z,styles:Object.create(null)};return function F(N){var T;if(!N)return;let v=null;const A=N.name;if("#text"===A)v=N.value;else{if(!$.shouldBuildText(A))return;(null==(T=null==N?void 0:N.attributes)?void 0:T.textContent)?v=N.attributes.textContent:N.value&&(v=N.value)}if(null!==v&&z.push({str:v}),N.children)for(const y of N.children)F(y)}(x),G}static shouldBuildText(x){return!("textarea"===x||"input"===x||"option"===x||"select"===x)}}u.XfaText=$},(rt,u,$)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.NodeStandardFontDataFactory=u.NodeCanvasFactory=u.NodeCMapReaderFactory=void 0;var _=$(7);const x=function(N){return new Promise((v,A)=>{__webpack_require__(172).readFile(N,(y,f)=>{!y&&f?v(new Uint8Array(f)):A(new Error(y))})})};u.NodeCanvasFactory=class extends _.BaseCanvasFactory{_createCanvas(v,A){return __webpack_require__(3414).createCanvas(v,A)}},u.NodeCMapReaderFactory=class extends _.BaseCMapReaderFactory{_fetchData(v,A){return x(v).then(T=>({cMapData:T,compressionType:A}))}},u.NodeStandardFontDataFactory=class extends _.BaseStandardFontDataFactory{_fetchData(v){return x(v)}}},(rt,u,$)=>{var N,v,A,T,y,f,h,c,i,me,r,Be,a,_e,s,We;Object.defineProperty(u,"__esModule",{value:!0}),u.AnnotationEditorLayer=void 0;var _=$(5),x=$(1),z=$(22),G=$(23);const C=class{constructor(g){it(this,i),it(this,r),it(this,a),it(this,s),it(this,N,void 0),it(this,v,!1),it(this,A,this.pointerup.bind(this)),it(this,T,this.pointerdown.bind(this)),it(this,y,new Map),it(this,f,!1),it(this,h,!1),it(this,c,void 0),C._initialized||(C._initialized=!0,z.FreeTextEditor.initialize(g.l10n),G.InkEditor.initialize(g.l10n)),g.uiManager.registerEditorTypes([z.FreeTextEditor,G.InkEditor]),bt(this,c,g.uiManager),this.annotationStorage=g.annotationStorage,this.pageIndex=g.pageIndex,this.div=g.div,bt(this,N,g.accessibilityManager),E(this,c).addLayer(this)}updateToolbar(g){E(this,c).updateToolbar(g)}updateMode(g=E(this,c).getMode()){ht(this,s,We).call(this),g===x.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),E(this,c).unselectAll(),this.div.classList.toggle("freeTextEditing",g===x.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",g===x.AnnotationEditorType.INK)}addInkEditorIfNeeded(g){if(g||E(this,c).getMode()===x.AnnotationEditorType.INK){if(!g)for(const Z of E(this,y).values())if(Z.isEmpty())return void Z.setInBackground();ht(this,a,_e).call(this,{offsetX:0,offsetY:0}).setInBackground()}}setEditingState(g){E(this,c).setEditingState(g)}addCommands(g){E(this,c).addCommands(g)}enable(){this.div.style.pointerEvents="auto";for(const g of E(this,y).values())g.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const g of E(this,y).values())g.disableEditing()}setActiveEditor(g){E(this,c).getActive()!==g&&E(this,c).setActiveEditor(g)}enableClick(){this.div.addEventListener("pointerdown",E(this,T)),this.div.addEventListener("pointerup",E(this,A))}disableClick(){this.div.removeEventListener("pointerdown",E(this,T)),this.div.removeEventListener("pointerup",E(this,A))}attach(g){E(this,y).set(g.id,g)}detach(g){var P;E(this,y).delete(g.id),null==(P=E(this,N))||P.removePointerInTextLayer(g.contentDiv)}remove(g){E(this,c).removeEditor(g),this.detach(g),this.annotationStorage.remove(g.id),g.div.style.display="none",setTimeout(()=>{g.div.style.display="",g.div.remove(),g.isAttachedToDOM=!1,document.activeElement===document.body&&E(this,c).focusMainContainer()},0),E(this,h)||this.addInkEditorIfNeeded(!1)}add(g){if(ht(this,i,me).call(this,g),E(this,c).addEditor(g),this.attach(g),!g.isAttachedToDOM){const P=g.render();this.div.append(P),g.isAttachedToDOM=!0}this.moveEditorInDOM(g),g.onceAdded(),this.addToAnnotationStorage(g)}moveEditorInDOM(g){var P;null==(P=E(this,N))||P.moveElementInDOM(this.div,g.div,g.contentDiv,!0)}addToAnnotationStorage(g){!g.isEmpty()&&!this.annotationStorage.has(g.id)&&this.annotationStorage.setValue(g.id,g)}addOrRebuild(g){g.needsToBeRebuilt()?g.rebuild():this.add(g)}addANewEditor(g){this.addCommands({cmd:()=>{this.addOrRebuild(g)},undo:()=>{g.remove()},mustExec:!0})}addUndoableEditor(g){this.addCommands({cmd:()=>{this.addOrRebuild(g)},undo:()=>{g.remove()},mustExec:!1})}getNextId(){return E(this,c).getId()}deserialize(g){switch(g.annotationType){case x.AnnotationEditorType.FREETEXT:return z.FreeTextEditor.deserialize(g,this);case x.AnnotationEditorType.INK:return G.InkEditor.deserialize(g,this)}return null}setSelected(g){E(this,c).setSelected(g)}toggleSelected(g){E(this,c).toggleSelected(g)}isSelected(g){return E(this,c).isSelected(g)}unselect(g){E(this,c).unselect(g)}pointerup(g){if(!(0!==g.button||g.ctrlKey&&_.KeyboardManager.platform.isMac)&&g.target===this.div&&E(this,f)){if(bt(this,f,!1),!E(this,v))return void bt(this,v,!0);ht(this,a,_e).call(this,g)}}pointerdown(g){if(0!==g.button||g.ctrlKey&&_.KeyboardManager.platform.isMac||g.target!==this.div)return;bt(this,f,!0);const Z=E(this,c).getActive();bt(this,v,!Z||Z.isEmpty())}drop(g){const P=g.dataTransfer.getData("text/plain"),Z=E(this,c).getEditor(P);if(!Z)return;g.preventDefault(),g.dataTransfer.dropEffect="move",ht(this,i,me).call(this,Z);const dt=this.div.getBoundingClientRect();Z.translate(g.clientX-dt.x-Z.startX,g.clientY-dt.y-Z.startY),this.moveEditorInDOM(Z),Z.div.focus()}dragover(g){g.preventDefault()}destroy(){var g,P;(null==(g=E(this,c).getActive())?void 0:g.parent)===this&&E(this,c).setActiveEditor(null);for(const Z of E(this,y).values())null==(P=E(this,N))||P.removePointerInTextLayer(Z.contentDiv),Z.isAttachedToDOM=!1,Z.div.remove(),Z.parent=null;this.div=null,E(this,y).clear(),E(this,c).removeLayer(this)}render(g){this.viewport=g.viewport,(0,_.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const P of E(this,c).getEditors(this.pageIndex))this.add(P);this.updateMode()}update(g){E(this,c).commitOrRemove(),this.viewport=g.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[g,P,Z,dt]=this.viewport.viewBox;return[Z-g,dt-P]}get viewportBaseDimensions(){const{width:g,height:P,rotation:Z}=this.viewport;return Z%180==0?[g,P]:[P,g]}setDimensions(){const{width:g,height:P,rotation:Z}=this.viewport,dt=Z%180!=0,ot=Math.floor(g)+"px",at=Math.floor(P)+"px";this.div.style.width=dt?at:ot,this.div.style.height=dt?ot:at,this.div.setAttribute("data-main-rotation",Z)}};let F=C;N=new WeakMap,v=new WeakMap,A=new WeakMap,T=new WeakMap,y=new WeakMap,f=new WeakMap,h=new WeakMap,c=new WeakMap,i=new WeakSet,me=function(g){var P;g.parent!==this&&(this.attach(g),g.pageIndex=this.pageIndex,null==(P=g.parent)||P.detach(g),g.parent=this,g.div&&g.isAttachedToDOM&&(g.div.remove(),this.div.append(g.div)))},r=new WeakSet,Be=function(g){switch(E(this,c).getMode()){case x.AnnotationEditorType.FREETEXT:return new z.FreeTextEditor(g);case x.AnnotationEditorType.INK:return new G.InkEditor(g)}return null},a=new WeakSet,_e=function(g){const P=this.getNextId(),Z=ht(this,r,Be).call(this,{parent:this,id:P,x:g.offsetX,y:g.offsetY});return Z&&this.add(Z),Z},s=new WeakSet,We=function(){bt(this,h,!0);for(const g of E(this,y).values())g.isEmpty()&&g.remove();bt(this,h,!1)},Ot(F,"_initialized",!1),u.AnnotationEditorLayer=F},(rt,u,$)=>{var F,N,v,A,T,y,f,h,c,i,He,r,qe,a,Ge,s,be;Object.defineProperty(u,"__esModule",{value:!0}),u.FreeTextEditor=void 0;var _=$(1),x=$(5),z=$(4);const C=class extends z.AnnotationEditor{constructor(g){super(ee(te({},g),{name:"freeTextEditor"})),it(this,i),it(this,r),it(this,a),it(this,s),it(this,F,this.editorDivBlur.bind(this)),it(this,N,this.editorDivFocus.bind(this)),it(this,v,this.editorDivInput.bind(this)),it(this,A,this.editorDivKeydown.bind(this)),it(this,T,void 0),it(this,y,""),it(this,f,`${this.id}-editor`),it(this,h,!1),it(this,c,void 0),bt(this,T,g.color||C._defaultColor||z.AnnotationEditor._defaultLineColor),bt(this,c,g.fontSize||C._defaultFontSize)}static initialize(g){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(Z=>[Z,g.get(Z)]));const P=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(P.getPropertyValue("--freetext-padding"))}static updateDefaultParams(g,P){switch(g){case _.AnnotationEditorParamsType.FREETEXT_SIZE:C._defaultFontSize=P;break;case _.AnnotationEditorParamsType.FREETEXT_COLOR:C._defaultColor=P}}updateParams(g,P){switch(g){case _.AnnotationEditorParamsType.FREETEXT_SIZE:ht(this,i,He).call(this,P);break;case _.AnnotationEditorParamsType.FREETEXT_COLOR:ht(this,r,qe).call(this,P)}}static get defaultPropertiesToUpdate(){return[[_.AnnotationEditorParamsType.FREETEXT_SIZE,C._defaultFontSize],[_.AnnotationEditorParamsType.FREETEXT_COLOR,C._defaultColor||z.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[_.AnnotationEditorParamsType.FREETEXT_SIZE,E(this,c)],[_.AnnotationEditorParamsType.FREETEXT_COLOR,E(this,T)]]}getInitialTranslation(){return[-C._internalPadding*this.parent.scaleFactor,-(C._internalPadding+E(this,c))*this.parent.scaleFactor]}rebuild(){super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(_.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",E(this,A)),this.editorDiv.addEventListener("focus",E(this,N)),this.editorDiv.addEventListener("blur",E(this,F)),this.editorDiv.addEventListener("input",E(this,v)))}disableEditMode(){!this.isInEditMode()||(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",E(this,f)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",E(this,A)),this.editorDiv.removeEventListener("focus",E(this,N)),this.editorDiv.removeEventListener("blur",E(this,F)),this.editorDiv.removeEventListener("input",E(this,v)),this.div.focus(),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(g){super.focusin(g),g.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){super.commit(),E(this,h)||(bt(this,h,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),bt(this,y,ht(this,a,Ge).call(this).trimEnd()),ht(this,s,be).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(g){this.enableEditMode(),this.editorDiv.focus()}keydown(g){g.target===this.div&&"Enter"===g.key&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(g){C._keyboardManager.exec(this,g)}editorDivFocus(g){this.isEditing=!0}editorDivBlur(g){this.isEditing=!1}editorDivInput(g){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let g,P;this.width&&(g=this.x,P=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",E(this,f)),this.enableEditing(),C._l10nPromise.get("editor_free_text2_aria_label").then(dt=>{var ot;return null==(ot=this.editorDiv)?void 0:ot.setAttribute("aria-label",dt)}),C._l10nPromise.get("free_text2_default_content").then(dt=>{var ot;return null==(ot=this.editorDiv)?void 0:ot.setAttribute("default-content",dt)}),this.editorDiv.contentEditable=!0;const{style:Z}=this.editorDiv;if(Z.fontSize=`calc(${E(this,c)}px * var(--scale-factor))`,Z.color=E(this,T),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,x.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[dt,ot]=this.parent.viewportBaseDimensions;this.setAt(g*dt,P*ot,this.width*dt,this.height*ot);for(const at of E(this,y).split("\n")){const tt=document.createElement("div");tt.append(at?document.createTextNode(at):document.createElement("br")),this.editorDiv.append(tt)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(g,P){const Z=super.deserialize(g,P);return bt(Z,c,g.fontSize),bt(Z,T,_.Util.makeHexColor(...g.color)),bt(Z,y,g.value),Z}serialize(){if(this.isEmpty())return null;const g=C._internalPadding*this.parent.scaleFactor,P=this.getRect(g,g),Z=z.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:_.AnnotationEditorType.FREETEXT,color:Z,fontSize:E(this,c),value:E(this,y),pageIndex:this.parent.pageIndex,rect:P,rotation:this.rotation}}};let G=C;F=new WeakMap,N=new WeakMap,v=new WeakMap,A=new WeakMap,T=new WeakMap,y=new WeakMap,f=new WeakMap,h=new WeakMap,c=new WeakMap,i=new WeakSet,He=function(g){const P=dt=>{this.editorDiv.style.fontSize=`calc(${dt}px * var(--scale-factor))`,this.translate(0,-(dt-E(this,c))*this.parent.scaleFactor),bt(this,c,dt),ht(this,s,be).call(this)},Z=E(this,c);this.parent.addCommands({cmd:()=>{P(g)},undo:()=>{P(Z)},mustExec:!0,type:_.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},r=new WeakSet,qe=function(g){const P=E(this,T);this.parent.addCommands({cmd:()=>{bt(this,T,g),this.editorDiv.style.color=g},undo:()=>{bt(this,T,P),this.editorDiv.style.color=P},mustExec:!0,type:_.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},a=new WeakSet,Ge=function(){const g=this.editorDiv.getElementsByTagName("div");if(0===g.length)return this.editorDiv.innerText;const P=[];for(const Z of g){const dt=Z.firstChild;P.push("#text"===(null==dt?void 0:dt.nodeName)?dt.data:"")}return P.join("\n")},s=new WeakSet,be=function(){const[g,P]=this.parent.viewportBaseDimensions,Z=this.div.getBoundingClientRect();this.width=Z.width/g,this.height=Z.height/P},Ot(G,"_freeTextDefaultContent",""),Ot(G,"_l10nPromise"),Ot(G,"_internalPadding",0),Ot(G,"_defaultColor",null),Ot(G,"_defaultFontSize",10),Ot(G,"_keyboardManager",new x.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],C.prototype.commitOrRemove]])),Ot(G,"_type","freetext"),u.FreeTextEditor=G},(rt,u,$)=>{var A,T,y,f,h,c,i,e,r,o,a,t,s,p,C,Xe,g,ze,Z,Ve,ot,$e,tt,Ae,q,Ye,ut,Ke,I,Je,l,Vt,k,ye,L,ie,K,re,Y,Yt,n,ve,m,ae,M,Se,J,Qe,et,Ze,B,tn,At,Ee,X,oe,Ct,Kt,Mt,Ce;Object.defineProperty(u,"__esModule",{value:!0}),u.InkEditor=void 0,Object.defineProperty(u,"fitCurve",{enumerable:!0,get:function(){return z.fitCurve}});var _=$(1),x=$(4),z=$(24),G=$(5);const F=16,Tt=class extends x.AnnotationEditor{constructor(st){super(ee(te({},st),{name:"inkEditor"})),it(this,C),it(this,g),it(this,Z),it(this,ot),it(this,tt),it(this,q),it(this,ut),it(this,I),it(this,l),it(this,k),it(this,L),it(this,K),it(this,Y),it(this,n),it(this,m),it(this,J),it(this,et),it(this,B),it(this,At),it(this,X),it(this,Ct),it(this,Mt),it(this,A,0),it(this,T,0),it(this,y,0),it(this,f,this.canvasPointermove.bind(this)),it(this,h,this.canvasPointerleave.bind(this)),it(this,c,this.canvasPointerup.bind(this)),it(this,i,this.canvasPointerdown.bind(this)),it(this,e,!1),it(this,r,!1),it(this,o,null),it(this,a,null),it(this,t,0),it(this,s,0),it(this,p,null),this.color=st.color||null,this.thickness=st.thickness||null,this.opacity=st.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(st){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(U=>[U,st.get(U)]))}static updateDefaultParams(st,U){switch(st){case _.AnnotationEditorParamsType.INK_THICKNESS:Tt._defaultThickness=U;break;case _.AnnotationEditorParamsType.INK_COLOR:Tt._defaultColor=U;break;case _.AnnotationEditorParamsType.INK_OPACITY:Tt._defaultOpacity=U/100}}updateParams(st,U){switch(st){case _.AnnotationEditorParamsType.INK_THICKNESS:ht(this,C,Xe).call(this,U);break;case _.AnnotationEditorParamsType.INK_COLOR:ht(this,g,ze).call(this,U);break;case _.AnnotationEditorParamsType.INK_OPACITY:ht(this,Z,Ve).call(this,U)}}static get defaultPropertiesToUpdate(){return[[_.AnnotationEditorParamsType.INK_THICKNESS,Tt._defaultThickness],[_.AnnotationEditorParamsType.INK_COLOR,Tt._defaultColor||x.AnnotationEditor._defaultLineColor],[_.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*Tt._defaultOpacity)]]}get propertiesToUpdate(){var st;return[[_.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Tt._defaultThickness],[_.AnnotationEditorParamsType.INK_COLOR,this.color||Tt._defaultColor||x.AnnotationEditor._defaultLineColor],[_.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(null!=(st=this.opacity)?st:Tt._defaultOpacity))]]}rebuild(){super.rebuild(),null!==this.div&&(this.canvas||(ht(this,L,ie).call(this),ht(this,K,re).call(this)),this.isAttachedToDOM||(this.parent.add(this),ht(this,Y,Yt).call(this)),ht(this,Ct,Kt).call(this))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,E(this,a).disconnect(),bt(this,a,null),super.remove())}enableEditMode(){E(this,e)||null===this.canvas||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",E(this,i)),this.canvas.addEventListener("pointerup",E(this,c)))}disableEditMode(){!this.isInEditMode()||null===this.canvas||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",E(this,i)),this.canvas.removeEventListener("pointerup",E(this,c)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}commit(){E(this,e)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),bt(this,e,!0),this.div.classList.add("disabled"),ht(this,Ct,Kt).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(st){super.focusin(st),this.enableEditMode()}canvasPointerdown(st){0!==st.button||!this.isInEditMode()||E(this,e)||(this.setInForeground(),"mouse"!==st.type&&this.div.focus(),st.stopPropagation(),this.canvas.addEventListener("pointerleave",E(this,h)),this.canvas.addEventListener("pointermove",E(this,f)),ht(this,q,Ye).call(this,st.offsetX,st.offsetY))}canvasPointermove(st){st.stopPropagation(),ht(this,ut,Ke).call(this,st.offsetX,st.offsetY)}canvasPointerup(st){0===st.button&&this.isInEditMode()&&0!==this.currentPath.length&&(st.stopPropagation(),ht(this,k,ye).call(this,st),this.setInBackground())}canvasPointerleave(st){ht(this,k,ye).call(this,st),this.setInBackground()}render(){if(this.div)return this.div;let st,U;this.width&&(st=this.x,U=this.y),super.render(),Tt._l10nPromise.get("editor_ink2_aria_label").then(St=>{var Et;return null==(Et=this.div)?void 0:Et.setAttribute("aria-label",St)});const[D,W,ft,vt]=ht(this,ot,$e).call(this);if(this.setAt(D,W,0,0),this.setDims(ft,vt),ht(this,L,ie).call(this),this.width){const[St,Et]=this.parent.viewportBaseDimensions;this.setAt(st*St,U*Et,this.width*St,this.height*Et),bt(this,r,!0),ht(this,Y,Yt).call(this),this.setDims(this.width*St,this.height*Et),ht(this,l,Vt).call(this),ht(this,Mt,Ce).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return ht(this,K,re).call(this),this.div}setDimensions(st,U){const D=Math.round(st),W=Math.round(U);if(E(this,t)===D&&E(this,s)===W)return;bt(this,t,D),bt(this,s,W),this.canvas.style.visibility="hidden",E(this,A)&&Math.abs(E(this,A)-st/U)>.01&&(U=Math.ceil(st/E(this,A)),this.setDims(st,U));const[ft,vt]=this.parent.viewportBaseDimensions;this.width=st/ft,this.height=U/vt,E(this,e)&&ht(this,n,ve).call(this,st,U),ht(this,Y,Yt).call(this),ht(this,l,Vt).call(this),this.canvas.style.visibility="visible"}static deserialize(st,U){var It,Pt;const D=super.deserialize(st,U);D.thickness=st.thickness,D.color=_.Util.makeHexColor(...st.color),D.opacity=st.opacity;const[W,ft]=U.pageDimensions,vt=D.width*W,St=D.height*ft,Et=U.scaleFactor,wt=st.thickness/2;bt(D,A,vt/St),bt(D,e,!0),bt(D,t,Math.round(vt)),bt(D,s,Math.round(St));for(const{bezier:kt}of st.paths){const Lt=[];D.paths.push(Lt);let jt=Et*(kt[0]-wt),Dt=Et*(St-kt[1]-wt);for(let Nt=2,qt=kt.length;Nt<qt;Nt+=6){const zt=Et*(kt[Nt+4]-wt),le=Et*(St-kt[Nt+5]-wt);Lt.push([[jt,Dt],[Et*(kt[Nt]-wt),Et*(St-kt[Nt+1]-wt)],[Et*(kt[Nt+2]-wt),Et*(St-kt[Nt+3]-wt)],[zt,le]]),jt=zt,Dt=le}const Bt=ht(this,M,Se).call(this,Lt);D.bezierPath2D.push(Bt)}const Rt=ht(It=D,At,Ee).call(It);return bt(D,y,Math.max(F,Rt[2]-Rt[0])),bt(D,T,Math.max(F,Rt[3]-Rt[1])),ht(Pt=D,n,ve).call(Pt,vt,St),D}serialize(){if(this.isEmpty())return null;const st=this.getRect(0,0),U=this.rotation%180==0?st[3]-st[1]:st[2]-st[0],D=x.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:_.AnnotationEditorType.INK,color:D,thickness:this.thickness,opacity:this.opacity,paths:ht(this,J,Qe).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,U),pageIndex:this.parent.pageIndex,rect:st,rotation:this.rotation}}};let v=Tt;A=new WeakMap,T=new WeakMap,y=new WeakMap,f=new WeakMap,h=new WeakMap,c=new WeakMap,i=new WeakMap,e=new WeakMap,r=new WeakMap,o=new WeakMap,a=new WeakMap,t=new WeakMap,s=new WeakMap,p=new WeakMap,C=new WeakSet,Xe=function(st){const U=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=st,ht(this,Ct,Kt).call(this)},undo:()=>{this.thickness=U,ht(this,Ct,Kt).call(this)},mustExec:!0,type:_.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},g=new WeakSet,ze=function(st){const U=this.color;this.parent.addCommands({cmd:()=>{this.color=st,ht(this,l,Vt).call(this)},undo:()=>{this.color=U,ht(this,l,Vt).call(this)},mustExec:!0,type:_.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Z=new WeakSet,Ve=function(st){st/=100;const U=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=st,ht(this,l,Vt).call(this)},undo:()=>{this.opacity=U,ht(this,l,Vt).call(this)},mustExec:!0,type:_.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},ot=new WeakSet,$e=function(){const{width:st,height:U,rotation:D}=this.parent.viewport;switch(D){case 90:return[0,st,st,U];case 180:return[st,U,st,U];case 270:return[U,0,st,U];default:return[0,0,st,U]}},tt=new WeakSet,Ae=function(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,G.opacityToHex)(this.opacity)}`},q=new WeakSet,Ye=function(st,U){this.isEditing=!0,E(this,r)||(bt(this,r,!0),ht(this,Y,Yt).call(this),this.thickness||(this.thickness=Tt._defaultThickness),this.color||(this.color=Tt._defaultColor||x.AnnotationEditor._defaultLineColor),null!=this.opacity||(this.opacity=Tt._defaultOpacity)),this.currentPath.push([st,U]),bt(this,o,null),ht(this,tt,Ae).call(this),this.ctx.beginPath(),this.ctx.moveTo(st,U),bt(this,p,()=>{!E(this,p)||(E(this,o)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):ht(this,l,Vt).call(this),this.ctx.lineTo(...E(this,o)),bt(this,o,null),this.ctx.stroke()),window.requestAnimationFrame(E(this,p)))}),window.requestAnimationFrame(E(this,p))},ut=new WeakSet,Ke=function(st,U){const[D,W]=this.currentPath.at(-1);st===D&&U===W||(this.currentPath.push([st,U]),bt(this,o,[st,U]))},I=new WeakSet,Je=function(st,U){var wt;this.ctx.closePath(),bt(this,p,null),st=Math.min(Math.max(st,0),this.canvas.width),U=Math.min(Math.max(U,0),this.canvas.height);const[D,W]=this.currentPath.at(-1);let ft;if((st!==D||U!==W)&&this.currentPath.push([st,U]),1!==this.currentPath.length)ft=(0,z.fitCurve)(this.currentPath,30,null);else{const Rt=[st,U];ft=[[Rt,Rt.slice(),Rt.slice(),Rt]]}const vt=ht(wt=Tt,M,Se).call(wt,ft);this.currentPath.length=0,this.parent.addCommands({cmd:()=>{this.paths.push(ft),this.bezierPath2D.push(vt),this.rebuild()},undo:()=>{this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(ht(this,L,ie).call(this),ht(this,K,re).call(this)),ht(this,Ct,Kt).call(this))},mustExec:!0})},l=new WeakSet,Vt=function(){if(this.isEmpty())return void ht(this,m,ae).call(this);ht(this,tt,Ae).call(this);const{canvas:st,ctx:U}=this;U.setTransform(1,0,0,1,0,0),U.clearRect(0,0,st.width,st.height),ht(this,m,ae).call(this);for(const D of this.bezierPath2D)U.stroke(D)},k=new WeakSet,ye=function(st){ht(this,I,Je).call(this,st.offsetX,st.offsetY),this.canvas.removeEventListener("pointerleave",E(this,h)),this.canvas.removeEventListener("pointermove",E(this,f)),this.parent.addToAnnotationStorage(this)},L=new WeakSet,ie=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Tt._l10nPromise.get("editor_ink_canvas_aria_label").then(st=>{var U;return null==(U=this.canvas)?void 0:U.setAttribute("aria-label",st)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},K=new WeakSet,re=function(){let st=null;bt(this,a,new ResizeObserver(U=>{const D=U[0].contentRect;D.width&&D.height&&(null!==st&&clearTimeout(st),st=setTimeout(()=>{this.fixDims(),st=null},100),this.setDimensions(D.width,D.height))})),E(this,a).observe(this.div)},Y=new WeakSet,Yt=function(){if(!E(this,r))return;const[st,U]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*st),this.canvas.height=Math.ceil(this.height*U),ht(this,m,ae).call(this)},n=new WeakSet,ve=function(st,U){const D=ht(this,X,oe).call(this),W=(st-D)/E(this,y),ft=(U-D)/E(this,T);this.scaleFactor=Math.min(W,ft)},m=new WeakSet,ae=function(){const st=ht(this,X,oe).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+st,this.translationY*this.scaleFactor+st)},M=new WeakSet,Se=function(st){const U=new Path2D;for(let D=0,W=st.length;D<W;D++){const[ft,vt,St,Et]=st[D];0===D&&U.moveTo(...ft),U.bezierCurveTo(vt[0],vt[1],St[0],St[1],Et[0],Et[1])}return U},J=new WeakSet,Qe=function(st,U,D,W){const vt=[],St=this.thickness/2;let Et,wt;for(const Rt of this.paths){Et=[],wt=[];for(let It=0,Pt=Rt.length;It<Pt;It++){const[kt,Lt,jt,Dt]=Rt[It],Bt=st*(kt[0]+U)+St,Nt=W-st*(kt[1]+D)-St,qt=st*(Lt[0]+U)+St,$t=W-st*(Lt[1]+D)-St,Gt=st*(jt[0]+U)+St,Ut=W-st*(jt[1]+D)-St,Xt=st*(Dt[0]+U)+St,zt=W-st*(Dt[1]+D)-St;0===It&&(Et.push(Bt,Nt),wt.push(Bt,Nt)),Et.push(qt,$t,Gt,Ut,Xt,zt),ht(this,et,Ze).call(this,Bt,Nt,qt,$t,Gt,Ut,Xt,zt,4,wt)}vt.push({bezier:Et,points:wt})}return vt},et=new WeakSet,Ze=function(st,U,D,W,ft,vt,St,Et,wt,Rt){if(ht(this,B,tn).call(this,st,U,D,W,ft,vt,St,Et))Rt.push(St,Et);else{for(let It=1;It<wt-1;It++){const Pt=It/wt,kt=1-Pt;let Lt=Pt*st+kt*D,jt=Pt*U+kt*W,Dt=Pt*D+kt*ft,Bt=Pt*W+kt*vt;Lt=Pt*Lt+kt*Dt,jt=Pt*jt+kt*Bt,Dt=Pt*Dt+kt*(Pt*ft+kt*St),Bt=Pt*Bt+kt*(Pt*vt+kt*Et),Lt=Pt*Lt+kt*Dt,jt=Pt*jt+kt*Bt,Rt.push(Lt,jt)}Rt.push(St,Et)}},B=new WeakSet,tn=function(st,U,D,W,ft,vt,St,Et){const It=(3*W-2*U-Et)**2,kt=(3*vt-U-2*Et)**2;return Math.max((3*D-2*st-St)**2,(3*ft-st-2*St)**2)+Math.max(It,kt)<=10},At=new WeakSet,Ee=function(){let st=1/0,U=-1/0,D=1/0,W=-1/0;for(const ft of this.paths)for(const[vt,St,Et,wt]of ft){const Rt=_.Util.bezierBoundingBox(...vt,...St,...Et,...wt);st=Math.min(st,Rt[0]),D=Math.min(D,Rt[1]),U=Math.max(U,Rt[2]),W=Math.max(W,Rt[3])}return[st,D,U,W]},X=new WeakSet,oe=function(){return E(this,e)?Math.ceil(this.thickness*this.parent.scaleFactor):0},Ct=new WeakSet,Kt=function(st=!1){if(this.isEmpty())return;if(!E(this,e))return void ht(this,l,Vt).call(this);const U=ht(this,At,Ee).call(this),D=ht(this,X,oe).call(this);bt(this,y,Math.max(F,U[2]-U[0])),bt(this,T,Math.max(F,U[3]-U[1]));const W=Math.ceil(D+E(this,y)*this.scaleFactor),ft=Math.ceil(D+E(this,T)*this.scaleFactor),[vt,St]=this.parent.viewportBaseDimensions;this.width=W/vt,this.height=ft/St,bt(this,A,W/ft),ht(this,Mt,Ce).call(this);const Et=this.translationX,wt=this.translationY;this.translationX=-U[0],this.translationY=-U[1],ht(this,Y,Yt).call(this),ht(this,l,Vt).call(this),bt(this,t,W),bt(this,s,ft),this.setDims(W,ft);const Rt=st?D/this.scaleFactor/2:0;this.translate(Et-this.translationX-Rt,wt-this.translationY-Rt)},Mt=new WeakSet,Ce=function(){const{style:st}=this.div;E(this,A)>=1?(st.minHeight="16px",st.minWidth=`${Math.round(E(this,A)*F)}px`):(st.minWidth="16px",st.minHeight=`${Math.round(F/E(this,A))}px`)},it(v,M),Ot(v,"_defaultColor",null),Ot(v,"_defaultOpacity",1),Ot(v,"_defaultThickness",1),Ot(v,"_l10nPromise"),Ot(v,"_type","ink"),u.InkEditor=v},(rt,u,$)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.fitCurve=void 0;const _=$(25);u.fitCurve=_},rt=>{function $(h,c,i,e,r){var a,t,s,p,C,R,g,P,Z,dt,ot,at,tt;if(2===h.length)return at=y.vectorLen(y.subtract(h[0],h[1]))/3,[a=[h[0],y.addArrays(h[0],y.mulItems(c,at)),y.addArrays(h[1],y.mulItems(i,at)),h[1]]];if(t=function(h){var i,e,r,c=[];return h.forEach((o,a)=>{i=a?e+y.vectorLen(y.subtract(o,r)):0,c.push(i),e=i,r=o}),c=c.map(o=>o/e)}(h),[a,p,R]=_(h,t,t,c,i,r),0===p||p<e)return[a];if(p<e*e)for(s=t,C=p,g=R,tt=0;tt<20;tt++){if(s=z(a,h,s),[a,p,R]=_(h,t,s,c,i,r),p<e)return[a];if(R===g){let V=p/C;if(V>.9999&&V<1.0001)break}C=p,g=R}return ot=[],(P=y.subtract(h[R-1],h[R+1])).every(V=>0===V)&&(P=y.subtract(h[R-1],h[R]),[P[0],P[1]]=[-P[1],P[0]]),Z=y.normalize(P),dt=y.mulItems(Z,-1),(ot=ot.concat($(h.slice(0,R+1),c,Z,e,r))).concat($(h.slice(R),dt,i,e,r))}function _(h,c,i,e,r,o){var a,t,s;return a=function(h,c,i,e){var r,o,a,t,s,p,g,P,Z,dt,ot,at,tt,V,q,nt=h[0],ut=h[h.length-1];for(r=[nt,null,null,ut],o=y.zeros_Xx2x2(c.length),ot=0,at=c.length;ot<at;ot++)(a=o[ot])[0]=y.mulItems(i,3*(V=c[ot])*((q=1-V)*q)),a[1]=y.mulItems(e,3*q*(V*V));for(t=[[0,0],[0,0]],s=[0,0],ot=0,at=h.length;ot<at;ot++)V=c[ot],t[0][0]+=y.dot((a=o[ot])[0],a[0]),t[0][1]+=y.dot(a[0],a[1]),t[1][0]+=y.dot(a[0],a[1]),t[1][1]+=y.dot(a[1],a[1]),tt=y.subtract(h[ot],f.q([nt,nt,ut,ut],V)),s[0]+=y.dot(a[0],tt),s[1]+=y.dot(a[1],tt);return g=0==(p=t[0][0]*t[1][1]-t[1][0]*t[0][1])?0:(s[0]*t[1][1]-s[1]*t[0][1])/p,P=0===p?0:(t[0][0]*s[1]-t[1][0]*s[0])/p,g<(Z=1e-6*(dt=y.vectorLen(y.subtract(nt,ut))))||P<Z?(r[1]=y.addArrays(nt,y.mulItems(i,dt/3)),r[2]=y.addArrays(ut,y.mulItems(e,dt/3))):(r[1]=y.addArrays(nt,y.mulItems(i,g)),r[2]=y.addArrays(ut,y.mulItems(e,P))),r}(h,i,e,r),[t,s]=function(h,c,i){var e,r,o,a,t,s,p,C;r=0,o=Math.floor(h.length/2);const R=v(c,10);for(t=0,s=h.length;t<s;t++)p=h[t],C=A(0,i[t],R,10),(e=(a=y.subtract(f.q(c,C),p))[0]*a[0]+a[1]*a[1])>r&&(r=e,o=t);return[r,o]}(h,a,c),o&&o({bez:a,points:h,params:c,maxErr:t,maxPoint:s}),[a,t,s]}function z(h,c,i){return i.map((e,r)=>function(h,c,i){var e=y.subtract(f.q(h,i),c),r=f.qprime(h,i),o=y.mulMatrix(e,r),a=y.sum(y.squareItems(r))+2*y.mulMatrix(e,f.qprimeprime(h,i));return 0===a?i:i-o/a}(h,c[r],e))}var v=function(h,c){for(var i,e=[0],r=h[0],o=0,a=1;a<=c;a++)i=f.q(h,a/c),o+=y.vectorLen(y.subtract(i,r)),e.push(o),r=i;return e.map(t=>t/o)};function A(h,c,i,e){if(c<0)return 0;if(c>1)return 1;for(var o,t,s,p=1;p<=e;p++)if(c<=i[p]){s=(c-(o=i[p-1]))/(i[p]-o)*(p/e-(t=(p-1)/e))+t;break}return s}function T(h,c){return y.normalize(y.subtract(h,c))}class y{static zeros_Xx2x2(c){for(var i=[];c--;)i.push([0,0]);return i}static mulItems(c,i){return c.map(e=>e*i)}static mulMatrix(c,i){return c.reduce((e,r,o)=>e+r*i[o],0)}static subtract(c,i){return c.map((e,r)=>e-i[r])}static addArrays(c,i){return c.map((e,r)=>e+i[r])}static addItems(c,i){return c.map(e=>e+i)}static sum(c){return c.reduce((i,e)=>i+e)}static dot(c,i){return y.mulMatrix(c,i)}static vectorLen(c){return Math.hypot(...c)}static divItems(c,i){return c.map(e=>e/i)}static squareItems(c){return c.map(i=>i*i)}static normalize(c){return this.divItems(c,this.vectorLen(c))}}class f{static q(c,i){var e=1-i,r=y.mulItems(c[0],e*e*e),o=y.mulItems(c[1],3*e*e*i),a=y.mulItems(c[2],3*e*i*i),t=y.mulItems(c[3],i*i*i);return y.addArrays(y.addArrays(r,o),y.addArrays(a,t))}static qprime(c,i){var e=1-i,r=y.mulItems(y.subtract(c[1],c[0]),3*e*e),o=y.mulItems(y.subtract(c[2],c[1]),6*e*i),a=y.mulItems(y.subtract(c[3],c[2]),3*i*i);return y.addArrays(y.addArrays(r,o),a)}static qprimeprime(c,i){return y.addArrays(y.mulItems(y.addArrays(y.subtract(c[2],y.mulItems(c[1],2)),c[0]),6*(1-i)),y.mulItems(y.addArrays(y.subtract(c[3],y.mulItems(c[2],2)),c[1]),6*i))}}rt.exports=function(h,c,i){if(!Array.isArray(h))throw new TypeError("First argument should be an array");if(h.forEach(a=>{if(!Array.isArray(a)||a.some(t=>"number"!=typeof t)||a.length!==h[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),(h=h.filter((a,t)=>0===t||!a.every((s,p)=>s===h[t-1][p]))).length<2)return[];const e=h.length,r=T(h[1],h[0]),o=T(h[e-2],h[e-1]);return $(h,r,o,c,i)},rt.exports.fitCubic=$,rt.exports.createTangent=T},(rt,u,$)=>{var d,en,k,Te,L,xe,K,Pe;Object.defineProperty(u,"__esModule",{value:!0}),u.AnnotationLayer=void 0;var _=$(1),x=$(6),z=$(3),G=$(27),F=$(28);const N=1e3,A=new WeakSet;function T(Q){return{width:Q[2]-Q[0],height:Q[3]-Q[1]}}class y{static create(n){switch(n.data.annotationType){case _.AnnotationType.LINK:return new h(n);case _.AnnotationType.TEXT:return new c(n);case _.AnnotationType.WIDGET:switch(n.data.fieldType){case"Tx":return new e(n);case"Btn":return n.data.radioButton?new o(n):n.data.checkBox?new r(n):new a(n);case"Ch":return new t(n)}return new i(n);case _.AnnotationType.POPUP:return new s(n);case _.AnnotationType.FREETEXT:return new C(n);case _.AnnotationType.LINE:return new R(n);case _.AnnotationType.SQUARE:return new g(n);case _.AnnotationType.CIRCLE:return new P(n);case _.AnnotationType.POLYLINE:return new Z(n);case _.AnnotationType.CARET:return new ot(n);case _.AnnotationType.INK:return new at(n);case _.AnnotationType.POLYGON:return new dt(n);case _.AnnotationType.HIGHLIGHT:return new tt(n);case _.AnnotationType.UNDERLINE:return new V(n);case _.AnnotationType.SQUIGGLY:return new q(n);case _.AnnotationType.STRIKEOUT:return new nt(n);case _.AnnotationType.STAMP:return new ut(n);case _.AnnotationType.FILEATTACHMENT:return new pt(n);default:return new f(n)}}}class f{constructor(n,{isRenderable:b=!1,ignoreBorder:m=!1,createQuadrilaterals:w=!1}={}){this.isRenderable=b,this.data=n.data,this.layer=n.layer,this.page=n.page,this.viewport=n.viewport,this.linkService=n.linkService,this.downloadManager=n.downloadManager,this.imageResourcesPath=n.imageResourcesPath,this.renderForms=n.renderForms,this.svgFactory=n.svgFactory,this.annotationStorage=n.annotationStorage,this.enableScripting=n.enableScripting,this.hasJSActions=n.hasJSActions,this._fieldObjects=n.fieldObjects,this._mouseState=n.mouseState,b&&(this.container=this._createContainer(m)),w&&(this.quadrilaterals=this._createQuadrilaterals(m))}_createContainer(n=!1){const b=this.data,m=this.page,w=this.viewport,M=document.createElement("section"),{width:j,height:J}=T(b.rect),[ct,et,_t,B]=w.viewBox,mt=_t-ct,At=B-et;M.setAttribute("data-annotation-id",b.id);const yt=_.Util.normalizeRect([b.rect[0],m.view[3]-b.rect[1]+m.view[1],b.rect[2],m.view[3]-b.rect[3]+m.view[1]]);if(!n&&b.borderStyle.width>0){M.style.borderWidth=`${b.borderStyle.width}px`;const gt=b.borderStyle.horizontalCornerRadius,Ct=b.borderStyle.verticalCornerRadius;switch(gt>0||Ct>0?M.style.borderRadius=`calc(${gt}px * var(--scale-factor)) / calc(${Ct}px * var(--scale-factor))`:this instanceof o&&(M.style.borderRadius=`calc(${j}px * var(--scale-factor)) / calc(${J}px * var(--scale-factor))`),b.borderStyle.style){case _.AnnotationBorderStyleType.SOLID:M.style.borderStyle="solid";break;case _.AnnotationBorderStyleType.DASHED:M.style.borderStyle="dashed";break;case _.AnnotationBorderStyleType.BEVELED:(0,_.warn)("Unimplemented border style: beveled");break;case _.AnnotationBorderStyleType.INSET:(0,_.warn)("Unimplemented border style: inset");break;case _.AnnotationBorderStyleType.UNDERLINE:M.style.borderBottomStyle="solid"}const xt=b.borderColor||null;xt?M.style.borderColor=_.Util.makeHexColor(0|xt[0],0|xt[1],0|xt[2]):M.style.borderWidth=0}M.style.left=100*(yt[0]-ct)/mt+"%",M.style.top=100*(yt[1]-et)/At+"%";const{rotation:X}=b;return b.hasOwnCanvas||0===X?(M.style.width=100*j/mt+"%",M.style.height=100*J/At+"%"):this.setRotation(X,M),M}setRotation(n,b=this.container){const[m,w,M,j]=this.viewport.viewBox,J=M-m,ct=j-w,{width:et,height:_t}=T(this.data.rect);let B,mt;n%180==0?(B=100*et/J,mt=100*_t/ct):(B=100*_t/J,mt=100*et/ct),b.style.width=`${B}%`,b.style.height=`${mt}%`,b.setAttribute("data-main-rotation",(360-n)%360)}get _commonActions(){const n=(b,m,w)=>{const M=w.detail[b];w.target.style[m]=G.ColorConverters[`${M[0]}_HTML`](M.slice(1))};return(0,_.shadow)(this,"_commonActions",{display:b=>{const m=b.detail.display%2==1;this.container.style.visibility=m?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:m,print:0===b.detail.display||3===b.detail.display})},print:b=>{this.annotationStorage.setValue(this.data.id,{print:b.detail.print})},hidden:b=>{this.container.style.visibility=b.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:b.detail.hidden})},focus:b=>{setTimeout(()=>b.target.focus({preventScroll:!1}),0)},userName:b=>{b.target.title=b.detail.userName},readonly:b=>{b.detail.readonly?b.target.setAttribute("readonly",""):b.target.removeAttribute("readonly")},required:b=>{this._setRequired(b.target,b.detail.required)},bgColor:b=>{n("bgColor","backgroundColor",b)},fillColor:b=>{n("fillColor","backgroundColor",b)},fgColor:b=>{n("fgColor","color",b)},textColor:b=>{n("textColor","color",b)},borderColor:b=>{n("borderColor","borderColor",b)},strokeColor:b=>{n("strokeColor","borderColor",b)},rotation:b=>{const m=b.detail.rotation;this.setRotation(m),this.annotationStorage.setValue(this.data.id,{rotation:m})}})}_dispatchEventFromSandbox(n,b){const m=this._commonActions;for(const w of Object.keys(b.detail)){const M=n[w]||m[w];null==M||M(b)}}_setDefaultPropertiesFromJS(n){if(!this.enableScripting)return;const b=this.annotationStorage.getRawValue(this.data.id);if(!b)return;const m=this._commonActions;for(const[w,M]of Object.entries(b)){const j=m[w];j&&(j({detail:{[w]:M},target:n}),delete b[w])}}_createQuadrilaterals(n=!1){if(!this.data.quadPoints)return null;const b=[],m=this.data.rect;for(const w of this.data.quadPoints)this.data.rect=[w[2].x,w[2].y,w[1].x,w[1].y],b.push(this._createContainer(n));return this.data.rect=m,b}_createPopup(n,b){let m=this.container;this.quadrilaterals&&(n=n||this.quadrilaterals,m=this.quadrilaterals[0]),n||((n=document.createElement("div")).className="popupTriggerArea",m.append(n));const M=new p({container:m,trigger:n,color:b.color,titleObj:b.titleObj,modificationDate:b.modificationDate,contentsObj:b.contentsObj,richText:b.richText,hideWrapper:!0}).render();M.style.left="100%",m.append(M)}_renderQuadrilaterals(n){for(const b of this.quadrilaterals)b.className=n;return this.quadrilaterals}render(){(0,_.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(n,b=null){const m=[];if(this._fieldObjects){const w=this._fieldObjects[n];if(w)for(const{page:M,id:j,exportValues:J}of w){if(-1===M||j===b)continue;const ct="string"==typeof J?J:null,et=document.querySelector(`[data-element-id="${j}"]`);!et||A.has(et)?m.push({id:j,exportValue:ct,domElement:et}):(0,_.warn)(`_getElementsByName - element not allowed: ${j}`)}return m}for(const w of document.getElementsByName(n)){const{exportValue:M}=w,j=w.getAttribute("data-element-id");j!==b&&(!A.has(w)||m.push({id:j,exportValue:M,domElement:w}))}return m}static get platform(){const n="undefined"!=typeof navigator?navigator.platform:"";return(0,_.shadow)(this,"platform",{isWin:n.includes("Win"),isMac:n.includes("Mac")})}}class h extends f{constructor(n,b=null){super(n,{isRenderable:!0,ignoreBorder:!!(null==b?void 0:b.ignoreBorder),createQuadrilaterals:!0}),it(this,d),this.isTooltipOnly=n.data.isTooltipOnly}render(){const{data:n,linkService:b}=this,m=document.createElement("a");m.setAttribute("data-element-id",n.id);let w=!1;return n.url?(b.addLinkAttributes(m,n.url,n.newWindow),w=!0):n.action?(this._bindNamedAction(m,n.action),w=!0):n.attachment?(this._bindAttachment(m,n.attachment),w=!0):n.setOCGState?(ht(this,d,en).call(this,m,n.setOCGState),w=!0):n.dest?(this._bindLink(m,n.dest),w=!0):(n.actions&&(n.actions.Action||n.actions["Mouse Up"]||n.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(m,n),w=!0),n.resetForm?(this._bindResetFormAction(m,n.resetForm),w=!0):this.isTooltipOnly&&!w&&(this._bindLink(m,""),w=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((M,j)=>{const J=0===j?m:m.cloneNode();return M.append(J),M}):(this.container.className="linkAnnotation",w&&this.container.append(m),this.container)}_bindLink(n,b){n.href=this.linkService.getDestinationHash(b),n.onclick=()=>(b&&this.linkService.goToDestination(b),!1),(b||""===b)&&(n.className="internalLink")}_bindNamedAction(n,b){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeNamedAction(b),!1),n.className="internalLink"}_bindAttachment(n,b){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>{var m;return null==(m=this.downloadManager)||m.openOrDownloadData(this.container,b.content,b.filename),!1},n.className="internalLink"}_bindJSAction(n,b){n.href=this.linkService.getAnchorUrl("");const m=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const w of Object.keys(b.actions)){const M=m.get(w);!M||(n[M]=()=>{var j;return null==(j=this.linkService.eventBus)||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b.id,name:w}}),!1})}n.onclick||(n.onclick=()=>!1),n.className="internalLink"}_bindResetFormAction(n,b){const m=n.onclick;if(m||(n.href=this.linkService.getAnchorUrl("")),n.className="internalLink",!this._fieldObjects)return(0,_.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(m||(n.onclick=()=>!1));n.onclick=()=>{var _t;null==m||m();const{fields:w,refs:M,include:j}=b,J=[];if(0!==w.length||0!==M.length){const B=new Set(M);for(const mt of w){const At=this._fieldObjects[mt]||[];for(const{id:yt}of At)B.add(yt)}for(const mt of Object.values(this._fieldObjects))for(const At of mt)B.has(At.id)===j&&J.push(At)}else for(const B of Object.values(this._fieldObjects))J.push(...B);const ct=this.annotationStorage,et=[];for(const B of J){const{id:mt}=B;switch(et.push(mt),B.type){case"text":case"combobox":case"listbox":ct.setValue(mt,{value:B.defaultValue||""});break;case"checkbox":case"radiobutton":ct.setValue(mt,{value:B.defaultValue===B.exportValues});break;default:continue}const At=document.querySelector(`[data-element-id="${mt}"]`);At&&(A.has(At)?At.dispatchEvent(new Event("resetform")):(0,_.warn)(`_bindResetFormAction - element not allowed: ${mt}`))}return this.enableScripting&&(null==(_t=this.linkService.eventBus)||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:et,name:"ResetForm"}})),!1}}}d=new WeakSet,en=function(n,b){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeSetOCGState(b),!1),n.className="internalLink"};class c extends f{constructor(n){var m,w,M;super(n,{isRenderable:!!(n.data.hasPopup||(null==(m=n.data.titleObj)?void 0:m.str)||(null==(w=n.data.contentsObj)?void 0:w.str)||(null==(M=n.data.richText)?void 0:M.str))})}render(){this.container.className="textAnnotation";const n=document.createElement("img");return n.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",n.alt="[{{type}} Annotation]",n.dataset.l10nId="text_annotation_type",n.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(n,this.data),this.container.append(n),this.container}}class i extends f{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(n){const{isWin:b,isMac:m}=f.platform;return b&&n.ctrlKey||m&&n.metaKey}_setEventListener(n,b,m,w){b.includes("mouse")?n.addEventListener(b,M=>{var j;null==(j=this.linkService.eventBus)||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:m,value:w(M),shift:M.shiftKey,modifier:this._getKeyModifier(M)}})}):n.addEventListener(b,M=>{var j;null==(j=this.linkService.eventBus)||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:m,value:w(M)}})})}_setEventListeners(n,b,m){var w;for(const[M,j]of b)("Action"===j||(null==(w=this.data.actions)?void 0:w[j]))&&this._setEventListener(n,M,j,m)}_setBackgroundColor(n){const b=this.data.backgroundColor||null;n.style.backgroundColor=null===b?"transparent":_.Util.makeHexColor(b[0],b[1],b[2])}_setTextStyle(n){const{fontColor:m}=this.data.defaultAppearanceData,w=this.data.defaultAppearanceData.fontSize||9,M=n.style;let j;const ct=et=>Math.round(10*et)/10;if(this.data.multiLine){const et=Math.abs(this.data.rect[3]-this.data.rect[1]-2),_t=Math.round(et/(_.LINE_FACTOR*w))||1;j=Math.min(w,ct(et/_t/_.LINE_FACTOR))}else{const et=Math.abs(this.data.rect[3]-this.data.rect[1]-2);j=Math.min(w,ct(et/_.LINE_FACTOR))}M.fontSize=`calc(${j}px * var(--scale-factor))`,M.color=_.Util.makeHexColor(m[0],m[1],m[2]),null!==this.data.textAlignment&&(M.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(n,b){b?n.setAttribute("required",!0):n.removeAttribute("required"),n.setAttribute("aria-required",b)}}class e extends i{constructor(n){super(n,{isRenderable:n.renderForms||!n.data.hasAppearance&&!!n.data.fieldValue})}setPropertyOnSiblings(n,b,m,w){const M=this.annotationStorage;for(const j of this._getElementsByName(n.name,n.id))j.domElement&&(j.domElement[b]=m),M.setValue(j.id,{[w]:m})}render(){var w;const n=this.annotationStorage,b=this.data.id;this.container.className="textWidgetAnnotation";let m=null;if(this.renderForms){const M=n.getValue(b,{value:this.data.fieldValue});let j=M.formattedValue||M.value||"";const J=n.getValue(b,{charLimit:this.data.maxLen}).charLimit;J&&j.length>J&&(j=j.slice(0,J));const ct={userValue:j,formattedValue:null,valueOnFocus:""};this.data.multiLine?(m=document.createElement("textarea"),m.textContent=j,this.data.doNotScroll&&(m.style.overflowY="hidden")):(m=document.createElement("input"),m.type="text",m.setAttribute("value",j),this.data.doNotScroll&&(m.style.overflowX="hidden")),A.add(m),m.setAttribute("data-element-id",b),m.disabled=this.data.readOnly,m.name=this.data.fieldName,m.tabIndex=N,this._setRequired(m,this.data.required),J&&(m.maxLength=J),m.addEventListener("input",_t=>{n.setValue(b,{value:_t.target.value}),this.setPropertyOnSiblings(m,"value",_t.target.value,"value")}),m.addEventListener("resetform",_t=>{var mt;const B=null!=(mt=this.data.defaultFieldValue)?mt:"";m.value=ct.userValue=B,ct.formattedValue=null});let et=_t=>{const{formattedValue:B}=ct;null!=B&&(_t.target.value=B),_t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){m.addEventListener("focus",B=>{ct.userValue&&(B.target.value=ct.userValue),ct.valueOnFocus=B.target.value}),m.addEventListener("updatefromsandbox",B=>{this._dispatchEventFromSandbox({value(At){var yt;ct.userValue=null!=(yt=At.detail.value)?yt:"",n.setValue(b,{value:ct.userValue.toString()}),At.target.value=ct.userValue},formattedValue(At){const{formattedValue:yt}=At.detail;ct.formattedValue=yt,null!=yt&&At.target!==document.activeElement&&(At.target.value=yt),n.setValue(b,{formattedValue:yt})},selRange(At){At.target.setSelectionRange(...At.detail.selRange)},charLimit:At=>{var Ct;const{charLimit:yt}=At.detail,{target:X}=At;if(0===yt)return void X.removeAttribute("maxLength");X.setAttribute("maxLength",yt);let gt=ct.userValue;!gt||gt.length<=yt||(gt=gt.slice(0,yt),X.value=ct.userValue=gt,n.setValue(b,{value:gt}),null==(Ct=this.linkService.eventBus)||Ct.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:gt,willCommit:!0,commitKey:1,selStart:X.selectionStart,selEnd:X.selectionEnd}}))}},B)}),m.addEventListener("keydown",B=>{var yt;let mt=-1;if("Escape"===B.key?mt=0:"Enter"!==B.key||this.data.multiLine?"Tab"===B.key&&(mt=3):mt=2,-1===mt)return;const{value:At}=B.target;ct.valueOnFocus!==At&&(ct.userValue=At,null==(yt=this.linkService.eventBus)||yt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:At,willCommit:!0,commitKey:mt,selStart:B.target.selectionStart,selEnd:B.target.selectionEnd}}))});const _t=et;et=null,m.addEventListener("blur",B=>{var At;const{value:mt}=B.target;ct.userValue=mt,this._mouseState.isDown&&ct.valueOnFocus!==mt&&(null==(At=this.linkService.eventBus)||At.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:mt,willCommit:!0,commitKey:1,selStart:B.target.selectionStart,selEnd:B.target.selectionEnd}})),_t(B)}),(null==(w=this.data.actions)?void 0:w.Keystroke)&&m.addEventListener("beforeinput",B=>{var Mt;const{data:mt,target:At}=B,{value:yt,selectionStart:X,selectionEnd:gt}=At;let Ct=X,xt=gt;switch(B.inputType){case"deleteWordBackward":{const Ft=yt.substring(0,X).match(/\w*[^\w]*$/);Ft&&(Ct-=Ft[0].length);break}case"deleteWordForward":{const Ft=yt.substring(X).match(/^[^\w]*\w*/);Ft&&(xt+=Ft[0].length);break}case"deleteContentBackward":X===gt&&(Ct-=1);break;case"deleteContentForward":X===gt&&(xt+=1)}B.preventDefault(),null==(Mt=this.linkService.eventBus)||Mt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:yt,change:mt||"",willCommit:!1,selStart:Ct,selEnd:xt}})}),this._setEventListeners(m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],B=>B.target.value)}if(et&&m.addEventListener("blur",et),this.data.comb){const B=(this.data.rect[2]-this.data.rect[0])/J;m.classList.add("comb"),m.style.letterSpacing=`calc(${B}px * var(--scale-factor) - 1ch)`}}else m=document.createElement("div"),m.textContent=this.data.fieldValue,m.style.verticalAlign="middle",m.style.display="table-cell";return this._setTextStyle(m),this._setBackgroundColor(m),this._setDefaultPropertiesFromJS(m),this.container.append(m),this.container}}class r extends i{constructor(n){super(n,{isRenderable:n.renderForms})}render(){const n=this.annotationStorage,b=this.data,m=b.id;let w=n.getValue(m,{value:b.exportValue===b.fieldValue}).value;"string"==typeof w&&(w="Off"!==w,n.setValue(m,{value:w})),this.container.className="buttonWidgetAnnotation checkBox";const M=document.createElement("input");return A.add(M),M.setAttribute("data-element-id",m),M.disabled=b.readOnly,this._setRequired(M,this.data.required),M.type="checkbox",M.name=b.fieldName,w&&M.setAttribute("checked",!0),M.setAttribute("exportValue",b.exportValue),M.tabIndex=N,M.addEventListener("change",j=>{const{name:J,checked:ct}=j.target;for(const et of this._getElementsByName(J,m)){const _t=ct&&et.exportValue===b.exportValue;et.domElement&&(et.domElement.checked=_t),n.setValue(et.id,{value:_t})}n.setValue(m,{value:ct})}),M.addEventListener("resetform",j=>{j.target.checked=(b.defaultFieldValue||"Off")===b.exportValue}),this.enableScripting&&this.hasJSActions&&(M.addEventListener("updatefromsandbox",j=>{this._dispatchEventFromSandbox({value(ct){ct.target.checked="Off"!==ct.detail.value,n.setValue(m,{value:ct.target.checked})}},j)}),this._setEventListeners(M,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],j=>j.target.checked)),this._setBackgroundColor(M),this._setDefaultPropertiesFromJS(M),this.container.append(M),this.container}}class o extends i{constructor(n){super(n,{isRenderable:n.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const n=this.annotationStorage,b=this.data,m=b.id;let w=n.getValue(m,{value:b.fieldValue===b.buttonValue}).value;"string"==typeof w&&(w=w!==b.buttonValue,n.setValue(m,{value:w}));const M=document.createElement("input");if(A.add(M),M.setAttribute("data-element-id",m),M.disabled=b.readOnly,this._setRequired(M,this.data.required),M.type="radio",M.name=b.fieldName,w&&M.setAttribute("checked",!0),M.tabIndex=N,M.addEventListener("change",j=>{const{name:J,checked:ct}=j.target;for(const et of this._getElementsByName(J,m))n.setValue(et.id,{value:!1});n.setValue(m,{value:ct})}),M.addEventListener("resetform",j=>{const J=b.defaultFieldValue;j.target.checked=null!=J&&J===b.buttonValue}),this.enableScripting&&this.hasJSActions){const j=b.buttonValue;M.addEventListener("updatefromsandbox",J=>{this._dispatchEventFromSandbox({value:et=>{const _t=j===et.detail.value;for(const B of this._getElementsByName(et.target.name)){const mt=_t&&B.id===m;B.domElement&&(B.domElement.checked=mt),n.setValue(B.id,{value:mt})}}},J)}),this._setEventListeners(M,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],J=>J.target.checked)}return this._setBackgroundColor(M),this._setDefaultPropertiesFromJS(M),this.container.append(M),this.container}}class a extends h{constructor(n){super(n,{ignoreBorder:n.data.hasAppearance})}render(){const n=super.render();n.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(n.title=this.data.alternativeText);const b=n.lastChild;return this.enableScripting&&this.hasJSActions&&b&&(this._setDefaultPropertiesFromJS(b),b.addEventListener("updatefromsandbox",m=>{this._dispatchEventFromSandbox({},m)})),n}}class t extends i{constructor(n){super(n,{isRenderable:n.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const n=this.annotationStorage,b=this.data.id,m=n.getValue(b,{value:this.data.fieldValue}),w=document.createElement("select");A.add(w),w.setAttribute("data-element-id",b),w.disabled=this.data.readOnly,this._setRequired(w,this.data.required),w.name=this.data.fieldName,w.tabIndex=N;let M=this.data.combo&&this.data.options.length>0;this.data.combo||(w.size=this.data.options.length,this.data.multiSelect&&(w.multiple=!0)),w.addEventListener("resetform",et=>{const _t=this.data.defaultFieldValue;for(const B of w.options)B.selected=B.value===_t});for(const et of this.data.options){const _t=document.createElement("option");_t.textContent=et.displayValue,_t.value=et.exportValue,m.value.includes(et.exportValue)&&(_t.setAttribute("selected",!0),M=!1),w.append(_t)}let j=null;if(M){const et=document.createElement("option");et.value=" ",et.setAttribute("hidden",!0),et.setAttribute("selected",!0),w.prepend(et),j=()=>{et.remove(),w.removeEventListener("input",j),j=null},w.addEventListener("input",j)}const J=(et,_t)=>{const B=_t?"value":"textContent",mt=et.target.options;return et.target.multiple?Array.prototype.filter.call(mt,At=>At.selected).map(At=>At[B]):-1===mt.selectedIndex?null:mt[mt.selectedIndex][B]},ct=et=>Array.prototype.map.call(et.target.options,B=>({displayValue:B.textContent,exportValue:B.value}));return this.enableScripting&&this.hasJSActions?(w.addEventListener("updatefromsandbox",et=>{this._dispatchEventFromSandbox({value(B){null==j||j();const mt=B.detail.value,At=new Set(Array.isArray(mt)?mt:[mt]);for(const yt of w.options)yt.selected=At.has(yt.value);n.setValue(b,{value:J(B,!0)})},multipleSelection(B){w.multiple=!0},remove(B){const mt=w.options,At=B.detail.remove;mt[At].selected=!1,w.remove(At),mt.length>0&&-1===Array.prototype.findIndex.call(mt,X=>X.selected)&&(mt[0].selected=!0),n.setValue(b,{value:J(B,!0),items:ct(B)})},clear(B){for(;0!==w.length;)w.remove(0);n.setValue(b,{value:null,items:[]})},insert(B){const{index:mt,displayValue:At,exportValue:yt}=B.detail.insert,X=w.children[mt],gt=document.createElement("option");gt.textContent=At,gt.value=yt,X?X.before(gt):w.append(gt),n.setValue(b,{value:J(B,!0),items:ct(B)})},items(B){const{items:mt}=B.detail;for(;0!==w.length;)w.remove(0);for(const At of mt){const{displayValue:yt,exportValue:X}=At,gt=document.createElement("option");gt.textContent=yt,gt.value=X,w.append(gt)}w.options.length>0&&(w.options[0].selected=!0),n.setValue(b,{value:J(B,!0),items:ct(B)})},indices(B){const mt=new Set(B.detail.indices);for(const At of B.target.options)At.selected=mt.has(At.index);n.setValue(b,{value:J(B,!0)})},editable(B){B.target.disabled=!B.detail.editable}},et)}),w.addEventListener("input",et=>{var mt;const _t=J(et,!0),B=J(et,!1);n.setValue(b,{value:_t}),null==(mt=this.linkService.eventBus)||mt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:B,changeEx:_t,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(w,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],et=>et.target.checked)):w.addEventListener("input",function(et){n.setValue(b,{value:J(et,!0)})}),this.data.combo&&this._setTextStyle(w),this._setBackgroundColor(w),this._setDefaultPropertiesFromJS(w),this.container.append(w),this.container}}const S=class extends f{constructor(n){var w,M,j;const{data:b}=n;super(n,{isRenderable:!S.IGNORE_TYPES.has(b.parentType)&&!!((null==(w=b.titleObj)?void 0:w.str)||(null==(M=b.contentsObj)?void 0:M.str)||(null==(j=b.richText)?void 0:j.str))})}render(){this.container.className="popupAnnotation";const n=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(0===n.length)return this.container;const b=new p({container:this.container,trigger:Array.from(n),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),m=this.page,w=_.Util.normalizeRect([this.data.parentRect[0],m.view[3]-this.data.parentRect[1]+m.view[1],this.data.parentRect[2],m.view[3]-this.data.parentRect[3]+m.view[1]]),M=w[0]+this.data.parentRect[2]-this.data.parentRect[0],j=w[1],[J,ct,et,_t]=this.viewport.viewBox,mt=_t-ct;return this.container.style.left=100*(M-J)/(et-J)+"%",this.container.style.top=100*(j-ct)/mt+"%",this.container.append(b.render()),this.container}};let s=S;Ot(s,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));class p{constructor(n){this.container=n.container,this.trigger=n.trigger,this.color=n.color,this.titleObj=n.titleObj,this.modificationDate=n.modificationDate,this.contentsObj=n.contentsObj,this.richText=n.richText,this.hideWrapper=n.hideWrapper||!1,this.pinned=!1}render(){var J,ct;const b=document.createElement("div");b.className="popupWrapper",this.hideElement=this.hideWrapper?b:this.container,this.hideElement.hidden=!0;const m=document.createElement("div");m.className="popup";const w=this.color;w&&(m.style.backgroundColor=_.Util.makeHexColor(0|.7*(255-w[0])+w[0],0|.7*(255-w[1])+w[1],0|.7*(255-w[2])+w[2]));const M=document.createElement("h1");M.dir=this.titleObj.dir,M.textContent=this.titleObj.str,m.append(M);const j=x.PDFDateString.toDateObject(this.modificationDate);if(j){const et=document.createElement("span");et.className="popupDate",et.textContent="{{date}}, {{time}}",et.dataset.l10nId="annotation_date_string",et.dataset.l10nArgs=JSON.stringify({date:j.toLocaleDateString(),time:j.toLocaleTimeString()}),m.append(et)}if(!(null==(J=this.richText)?void 0:J.str)||(null==(ct=this.contentsObj)?void 0:ct.str)&&this.contentsObj.str!==this.richText.str){const et=this._formatContents(this.contentsObj);m.append(et)}else F.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:m}),m.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const et of this.trigger)et.addEventListener("click",this._toggle.bind(this)),et.addEventListener("mouseover",this._show.bind(this,!1)),et.addEventListener("mouseout",this._hide.bind(this,!1));return m.addEventListener("click",this._hide.bind(this,!0)),b.append(m),b}_formatContents({str:n,dir:b}){const m=document.createElement("p");m.className="popupContent",m.dir=b;const w=n.split(/(?:\r\n?|\n)/);for(let M=0,j=w.length;M<j;++M)m.append(document.createTextNode(w[M])),M<j-1&&m.append(document.createElement("br"));return m}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(n=!1){n&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(n=!0){n&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class C extends f{constructor(n){var m,w,M;super(n,{isRenderable:!!(n.data.hasPopup||(null==(m=n.data.titleObj)?void 0:m.str)||(null==(w=n.data.contentsObj)?void 0:w.str)||(null==(M=n.data.richText)?void 0:M.str)),ignoreBorder:!0}),this.textContent=n.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const n=document.createElement("div");n.className="annotationTextContent",n.setAttribute("role","comment");for(const b of this.textContent){const m=document.createElement("span");m.textContent=b,n.append(m)}this.container.append(n)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class R extends f{constructor(n){var m,w,M;super(n,{isRenderable:!!(n.data.hasPopup||(null==(m=n.data.titleObj)?void 0:m.str)||(null==(w=n.data.contentsObj)?void 0:w.str)||(null==(M=n.data.richText)?void 0:M.str)),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const n=this.data,{width:b,height:m}=T(n.rect),w=this.svgFactory.create(b,m,!0),M=this.svgFactory.createElement("svg:line");return M.setAttribute("x1",n.rect[2]-n.lineCoordinates[0]),M.setAttribute("y1",n.rect[3]-n.lineCoordinates[1]),M.setAttribute("x2",n.rect[2]-n.lineCoordinates[2]),M.setAttribute("y2",n.rect[3]-n.lineCoordinates[3]),M.setAttribute("stroke-width",n.borderStyle.width||1),M.setAttribute("stroke","transparent"),M.setAttribute("fill","transparent"),w.append(M),this.container.append(w),this._createPopup(M,n),this.container}}class g extends f{constructor(n){var m,w,M;super(n,{isRenderable:!!(n.data.hasPopup||(null==(m=n.data.titleObj)?void 0:m.str)||(null==(w=n.data.contentsObj)?void 0:w.str)||(null==(M=n.data.richText)?void 0:M.str)),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const n=this.data,{width:b,height:m}=T(n.rect),w=this.svgFactory.create(b,m,!0),M=n.borderStyle.width,j=this.svgFactory.createElement("svg:rect");return j.setAttribute("x",M/2),j.setAttribute("y",M/2),j.setAttribute("width",b-M),j.setAttribute("height",m-M),j.setAttribute("stroke-width",M||1),j.setAttribute("stroke","transparent"),j.setAttribute("fill","transparent"),w.append(j),this.container.append(w),this._createPopup(j,n),this.container}}class P extends f{constructor(n){var m,w,M;super(n,{isRenderable:!!(n.data.hasPopup||(null==(m=n.data.titleObj)?void 0:m.str)||(null==(w=n.data.contentsObj)?void 0:w.str)||(null==(M=n.data.richText)?void 0:M.str)),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const n=this.data,{width:b,height:m}=T(n.rect),w=this.svgFactory.create(b,m,!0),M=n.borderStyle.width,j=this.svgFactory.createElement("svg:ellipse");return j.setAttribute("cx",b/2),j.setAttribute("cy",m/2),j.setAttribute("rx",b/2-M/2),j.setAttribute("ry",m/2-M/2),j.setAttribute("stroke-width",M||1),j.setAttribute("stroke","transparent"),j.setAttribute("fill","transparent"),w.append(j),this.container.append(w),this._createPopup(j,n),this.container}}class Z extends f{constructor(n){var m,w,M;super(n,{isRenderable:!!(n.data.hasPopup||(null==(m=n.data.titleObj)?void 0:m.str)||(null==(w=n.data.contentsObj)?void 0:w.str)||(null==(M=n.data.richText)?void 0:M.str)),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const n=this.data,{width:b,height:m}=T(n.rect),w=this.svgFactory.create(b,m,!0);let M=[];for(const J of n.vertices)M.push(J.x-n.rect[0]+","+(n.rect[3]-J.y));M=M.join(" ");const j=this.svgFactory.createElement(this.svgElementName);return j.setAttribute("points",M),j.setAttribute("stroke-width",n.borderStyle.width||1),j.setAttribute("stroke","transparent"),j.setAttribute("fill","transparent"),w.append(j),this.container.append(w),this._createPopup(j,n),this.container}}class dt extends Z{constructor(n){super(n),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ot extends f{constructor(n){var m,w,M;super(n,{isRenderable:!!(n.data.hasPopup||(null==(m=n.data.titleObj)?void 0:m.str)||(null==(w=n.data.contentsObj)?void 0:w.str)||(null==(M=n.data.richText)?void 0:M.str)),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class at extends f{constructor(n){var m,w,M;super(n,{isRenderable:!!(n.data.hasPopup||(null==(m=n.data.titleObj)?void 0:m.str)||(null==(w=n.data.contentsObj)?void 0:w.str)||(null==(M=n.data.richText)?void 0:M.str)),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const n=this.data,{width:b,height:m}=T(n.rect),w=this.svgFactory.create(b,m,!0);for(const M of n.inkLists){let j=[];for(const ct of M)j.push(`${ct.x-n.rect[0]},${n.rect[3]-ct.y}`);j=j.join(" ");const J=this.svgFactory.createElement(this.svgElementName);J.setAttribute("points",j),J.setAttribute("stroke-width",n.borderStyle.width||1),J.setAttribute("stroke","transparent"),J.setAttribute("fill","transparent"),this._createPopup(J,n),w.append(J)}return this.container.append(w),this.container}}class tt extends f{constructor(n){var m,w,M;super(n,{isRenderable:!!(n.data.hasPopup||(null==(m=n.data.titleObj)?void 0:m.str)||(null==(w=n.data.contentsObj)?void 0:w.str)||(null==(M=n.data.richText)?void 0:M.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class V extends f{constructor(n){var m,w,M;super(n,{isRenderable:!!(n.data.hasPopup||(null==(m=n.data.titleObj)?void 0:m.str)||(null==(w=n.data.contentsObj)?void 0:w.str)||(null==(M=n.data.richText)?void 0:M.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class q extends f{constructor(n){var m,w,M;super(n,{isRenderable:!!(n.data.hasPopup||(null==(m=n.data.titleObj)?void 0:m.str)||(null==(w=n.data.contentsObj)?void 0:w.str)||(null==(M=n.data.richText)?void 0:M.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class nt extends f{constructor(n){var m,w,M;super(n,{isRenderable:!!(n.data.hasPopup||(null==(m=n.data.titleObj)?void 0:m.str)||(null==(w=n.data.contentsObj)?void 0:w.str)||(null==(M=n.data.richText)?void 0:M.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class ut extends f{constructor(n){var m,w,M;super(n,{isRenderable:!!(n.data.hasPopup||(null==(m=n.data.titleObj)?void 0:m.str)||(null==(w=n.data.contentsObj)?void 0:w.str)||(null==(M=n.data.richText)?void 0:M.str)),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class pt extends f{constructor(n){var w;super(n,{isRenderable:!0});const{filename:b,content:m}=this.data.file;this.filename=(0,x.getFilenameFromUrl)(b),this.content=m,null==(w=this.linkService.eventBus)||w.dispatch("fileattachmentannotation",{source:this,filename:b,content:m})}render(){var b,m;this.container.className="fileAttachmentAnnotation";const n=document.createElement("div");return n.className="popupTriggerArea",n.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((null==(b=this.data.titleObj)?void 0:b.str)||(null==(m=this.data.contentsObj)?void 0:m.str)||this.data.richText)&&this._createPopup(n,this.data),this.container.append(n),this.container}_download(){var n;null==(n=this.downloadManager)||n.openOrDownloadData(this.container,this.content,this.filename)}}const Y=class{static render(n){var J,ct;const{annotations:b,div:m,viewport:w,accessibilityManager:M}=n;ht(this,L,xe).call(this,m,w);let j=0;for(const et of b){if(et.annotationType!==_.AnnotationType.POPUP){const{width:B,height:mt}=T(et.rect);if(B<=0||mt<=0)continue}const _t=y.create({data:et,layer:m,page:n.page,viewport:w,linkService:n.linkService,downloadManager:n.downloadManager,imageResourcesPath:n.imageResourcesPath||"",renderForms:!1!==n.renderForms,svgFactory:new x.DOMSVGFactory,annotationStorage:n.annotationStorage||new z.AnnotationStorage,enableScripting:n.enableScripting,hasJSActions:n.hasJSActions,fieldObjects:n.fieldObjects,mouseState:n.mouseState||{isDown:!1}});if(_t.isRenderable){const B=_t.render();if(et.hidden&&(B.style.visibility="hidden"),Array.isArray(B))for(const mt of B)mt.style.zIndex=j++,ht(J=Y,k,Te).call(J,mt,et.id,m,M);else B.style.zIndex=j++,_t instanceof s?m.prepend(B):ht(ct=Y,k,Te).call(ct,B,et.id,m,M)}}ht(this,K,Pe).call(this,m,n.annotationCanvasMap)}static update(n){const{annotationCanvasMap:b,div:m,viewport:w}=n;ht(this,L,xe).call(this,m,w),ht(this,K,Pe).call(this,m,b),m.hidden=!1}};let I=Y;k=new WeakSet,Te=function(n,b,m,w){const M=n.firstChild||n;M.id=`${x.AnnotationPrefix}${b}`,m.append(n),null==w||w.moveElementInDOM(m,n,M,!1)},L=new WeakSet,xe=function(n,{width:b,height:m,rotation:w}){const{style:M}=n,j=w%180!=0,J=Math.floor(b)+"px",ct=Math.floor(m)+"px";M.width=j?ct:J,M.height=j?J:ct,n.setAttribute("data-main-rotation",w)},K=new WeakSet,Pe=function(n,b){if(b){for(const[m,w]of b){const M=n.querySelector(`[data-annotation-id="${m}"]`);if(!M)continue;const{firstChild:j}=M;j?"CANVAS"===j.nodeName?j.replaceWith(w):j.before(w):M.append(w)}b.clear()}},it(I,k),it(I,L),it(I,K),u.AnnotationLayer=I},(rt,u)=>{function $(x){return Math.floor(255*Math.max(0,Math.min(1,x))).toString(16).padStart(2,"0")}Object.defineProperty(u,"__esModule",{value:!0}),u.ColorConverters=void 0,u.ColorConverters=class{static CMYK_G([z,G,F,N]){return["G",1-Math.min(1,.3*z+.59*F+.11*G+N)]}static G_CMYK([z]){return["CMYK",0,0,0,1-z]}static G_RGB([z]){return["RGB",z,z,z]}static G_HTML([z]){const G=$(z);return`#${G}${G}${G}`}static RGB_G([z,G,F]){return["G",.3*z+.59*G+.11*F]}static RGB_HTML([z,G,F]){return`#${$(z)}${$(G)}${$(F)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([z,G,F,N]){return["RGB",1-Math.min(1,z+N),1-Math.min(1,F+N),1-Math.min(1,G+N)]}static CMYK_HTML(z){const G=this.CMYK_RGB(z).slice(1);return this.RGB_HTML(G)}static RGB_CMYK([z,G,F]){const N=1-z,v=1-G,A=1-F;return["CMYK",N,v,A,Math.min(N,v,A)]}}},(rt,u,$)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.XfaLayer=void 0;var _=$(19);u.XfaLayer=class{static setupStorage(G,F,N,v,A){const T=v.getValue(F,{value:null});switch(N.name){case"textarea":if(null!==T.value&&(G.textContent=T.value),"print"===A)break;G.addEventListener("input",y=>{v.setValue(F,{value:y.target.value})});break;case"input":if("radio"===N.attributes.type||"checkbox"===N.attributes.type){if(T.value===N.attributes.xfaOn?G.setAttribute("checked",!0):T.value===N.attributes.xfaOff&&G.removeAttribute("checked"),"print"===A)break;G.addEventListener("change",y=>{v.setValue(F,{value:y.target.getAttribute(y.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==T.value&&G.setAttribute("value",T.value),"print"===A)break;G.addEventListener("input",y=>{v.setValue(F,{value:y.target.value})})}break;case"select":if(null!==T.value)for(const y of N.children)y.attributes.value===T.value&&(y.attributes.selected=!0);G.addEventListener("input",y=>{const f=y.target.options;v.setValue(F,{value:-1===f.selectedIndex?"":f[f.selectedIndex].value})})}}static setAttributes({html:G,element:F,storage:N=null,intent:v,linkService:A}){const{attributes:T}=F,y=G instanceof HTMLAnchorElement;"radio"===T.type&&(T.name=`${T.name}-${v}`);for(const[f,h]of Object.entries(T))if(null!=h)switch(f){case"class":h.length&&G.setAttribute(f,h.join(" "));break;case"dataId":break;case"id":G.setAttribute("data-element-id",h);break;case"style":Object.assign(G.style,h);break;case"textContent":G.textContent=h;break;default:(!y||"href"!==f&&"newWindow"!==f)&&G.setAttribute(f,h)}y&&A.addLinkAttributes(G,T.href,T.newWindow),N&&T.dataId&&this.setupStorage(G,T.dataId,F,N)}static render(G){var c;const F=G.annotationStorage,N=G.linkService,v=G.xfaHtml,A=G.intent||"display",T=document.createElement(v.name);v.attributes&&this.setAttributes({html:T,element:v,intent:A,linkService:N});const y=[[v,-1,T]],f=G.div;if(f.append(T),G.viewport){const i=`matrix(${G.viewport.transform.join(",")})`;f.style.transform=i}"richText"!==A&&f.setAttribute("class","xfaLayer xfaFont");const h=[];for(;y.length>0;){const[i,e,r]=y.at(-1);if(e+1===i.children.length){y.pop();continue}const o=i.children[++y.at(-1)[1]];if(null===o)continue;const{name:a}=o;if("#text"===a){const s=document.createTextNode(o.value);h.push(s),r.append(s);continue}let t;if(t=(null==(c=null==o?void 0:o.attributes)?void 0:c.xmlns)?document.createElementNS(o.attributes.xmlns,a):document.createElement(a),r.append(t),o.attributes&&this.setAttributes({html:t,element:o,storage:F,intent:A,linkService:N}),o.children&&o.children.length>0)y.push([o,-1,t]);else if(o.value){const s=document.createTextNode(o.value);_.XfaText.shouldBuildText(a)&&h.push(s),t.append(s)}}for(const i of f.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))i.setAttribute("readOnly",!0);return{textDivs:h}}static update(G){const F=`matrix(${G.viewport.transform.join(",")})`;G.div.style.transform=F,G.div.hidden=!1}}},(rt,u,$)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.TextLayerRenderTask=void 0,u.renderTextLayer=function(f){const h=new T({textContent:f.textContent,textContentStream:f.textContentStream,container:f.container,viewport:f.viewport,textDivs:f.textDivs,textContentItemsStr:f.textContentItemsStr});return h._render(f.timeout),h};var _=$(1);const z=30,F=new Map;function v(f,h,c,i){const e=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:""!==h.str,hasEOL:h.hasEOL,fontSize:0};f._textDivs.push(e);const o=_.Util.transform(f._viewport.transform,h.transform);let a=Math.atan2(o[1],o[0]);const t=c[h.fontName];t.vertical&&(a+=Math.PI/2);const s=Math.hypot(o[2],o[3]),p=s*function(f,h){const c=F.get(f);if(c)return c;h.save(),h.font=`30px ${f}`;const i=h.measureText("");let e=i.fontBoundingBoxAscent,r=Math.abs(i.fontBoundingBoxDescent);if(e){h.restore();const a=e/(e+r);return F.set(f,a),a}h.strokeStyle="red",h.clearRect(0,0,z,z),h.strokeText("g",0,0);let o=h.getImageData(0,0,z,z).data;r=0;for(let a=o.length-1-3;a>=0;a-=4)if(o[a]>0){r=Math.ceil(a/4/z);break}h.clearRect(0,0,z,z),h.strokeText("A",0,z),o=h.getImageData(0,0,z,z).data,e=0;for(let a=0,t=o.length;a<t;a+=4)if(o[a]>0){e=z-Math.floor(a/4/z);break}if(h.restore(),e){const a=e/(e+r);return F.set(f,a),a}return F.set(f,.8),.8}(t.fontFamily,i);let C,R;0===a?(C=o[4],R=o[5]-p):(C=o[4]+p*Math.sin(a),R=o[5]-p*Math.cos(a)),e.style.left=`${C}px`,e.style.top=`${R}px`,e.style.fontSize=`${s}px`,e.style.fontFamily=t.fontFamily,r.fontSize=s,e.setAttribute("role","presentation"),e.textContent=h.str,e.dir=h.dir,f._fontInspectorEnabled&&(e.dataset.fontName=h.fontName),0!==a&&(r.angle=a*(180/Math.PI));let g=!1;if(h.str.length>1)g=!0;else if(" "!==h.str&&h.transform[0]!==h.transform[3]){const P=Math.abs(h.transform[0]),Z=Math.abs(h.transform[3]);P!==Z&&Math.max(P,Z)/Math.min(P,Z)>1.5&&(g=!0)}g&&(r.canvasWidth=t.vertical?h.height*f._viewport.scale:h.width*f._viewport.scale),f._textDivProperties.set(e,r),f._textContentStream&&f._layoutText(e)}function A(f){if(f._canceled)return;const h=f._textDivs,c=f._capability;if(h.length>1e5)return f._renderingDone=!0,void c.resolve();if(!f._textContentStream)for(const e of h)f._layoutText(e);f._renderingDone=!0,c.resolve()}class T{constructor({textContent:h,textContentStream:c,container:i,viewport:e,textDivs:r,textContentItemsStr:o}){var a;this._textContent=h,this._textContentStream=c,this._container=i,this._document=i.ownerDocument,this._viewport=e,this._textDivs=r||[],this._textContentItemsStr=o||[],this._fontInspectorEnabled=!!(null==(a=globalThis.FontInspector)?void 0:a.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,_.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._textDivProperties=null,this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new _.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(h,c){for(const i of h)if(void 0!==i.str)this._textContentItemsStr.push(i.str),v(this,i,c,this._layoutTextCtx);else if("beginMarkedContentProps"===i.type||"beginMarkedContent"===i.type){const e=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==i.id&&this._container.setAttribute("id",`${i.id}`),e.append(this._container)}else"endMarkedContent"===i.type&&(this._container=this._container.parentNode)}_layoutText(h){const c=this._textDivProperties.get(h);let i="";if(0!==c.canvasWidth&&c.hasText){const{fontFamily:e}=h.style,{fontSize:r}=c;(r!==this._layoutTextLastFontSize||e!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${r*this._devicePixelRatio}px ${e}`,this._layoutTextLastFontSize=r,this._layoutTextLastFontFamily=e);const{width:o}=this._layoutTextCtx.measureText(h.textContent);o>0&&(i=`scaleX(${this._devicePixelRatio*c.canvasWidth/o})`)}if(0!==c.angle&&(i=`rotate(${c.angle}deg) ${i}`),i.length>0&&(h.style.transform=i),c.hasText&&this._container.append(h),c.hasEOL){const e=document.createElement("br");e.setAttribute("role","presentation"),this._container.append(e)}}_render(h=0){const c=(0,_.createPromiseCapability)();let i=Object.create(null);const e=this._document.createElement("canvas");if(e.height=e.width=z,this._layoutTextCtx=e.getContext("2d",{alpha:!1}),this._textContent)this._processItems(this._textContent.items,this._textContent.styles),c.resolve();else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const r=()=>{this._reader.read().then(({value:o,done:a})=>{a?c.resolve():(Object.assign(i,o.styles),this._processItems(o.items,i),r())},c.reject)};this._reader=this._textContentStream.getReader(),r()}}c.promise.then(()=>{i=null,h?this._renderTimer=setTimeout(()=>{A(this),this._renderTimer=null},h):A(this)},this._capability.reject)}}u.TextLayerRenderTask=T},(rt,u,$)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.SVGGraphics=void 0;var _=$(6),x=$(1),z=$(12);let G=class{constructor(){(0,x.unreachable)("Not implemented: SVGGraphics")}};u.SVGGraphics=G;{let c=function(t){let s=[];const p=[];for(const C of t)"save"!==C.fn?"restore"===C.fn?s=p.pop():s.push(C):(s.push({fnId:92,fn:"group",items:[]}),p.push(s),s=s.at(-1).items);return s},i=function(t){if(Number.isInteger(t))return t.toString();const s=t.toFixed(10);let p=s.length-1;if("0"!==s[p])return s;do{p--}while("0"===s[p]);return s.substring(0,"."===s[p]?p:p+1)},e=function(t){if(0===t[4]&&0===t[5]){if(0===t[1]&&0===t[2])return 1===t[0]&&1===t[3]?"":`scale(${i(t[0])} ${i(t[3])})`;if(t[0]===t[3]&&t[1]===-t[2]){const s=180*Math.acos(t[0])/Math.PI;return`rotate(${i(s)})`}}else if(1===t[0]&&0===t[1]&&0===t[2]&&1===t[3])return`translate(${i(t[4])} ${i(t[5])})`;return`matrix(${i(t[0])} ${i(t[1])} ${i(t[2])} ${i(t[3])} ${i(t[4])} ${i(t[5])})`};const F={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},N="http://www.w3.org/XML/1998/namespace",v="http://www.w3.org/1999/xlink",A=["butt","round","square"],T=["miter","round","bevel"],y=function(t,s="",p=!1){if(URL.createObjectURL&&"undefined"!=typeof Blob&&!p)return URL.createObjectURL(new Blob([t],{type:s}));const C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let R=`data:${s};base64,`;for(let g=0,P=t.length;g<P;g+=3){const Z=255&t[g],dt=255&t[g+1],ot=255&t[g+2];R+=C[Z>>2]+C[(3&Z)<<4|dt>>4]+C[g+1<P?(15&dt)<<2|ot>>6:64]+C[g+2<P?63&ot:64]}return R},f=function(){const t=new Uint8Array([137,80,78,71,13,10,26,10]),p=new Int32Array(256);for(let ot=0;ot<256;ot++){let at=ot;for(let tt=0;tt<8;tt++)at=1&at?3988292384^at>>1&2147483647:at>>1&2147483647;p[ot]=at}function R(ot,at,tt,V){let q=V;const nt=at.length;tt[q]=nt>>24&255,tt[q+1]=nt>>16&255,tt[q+2]=nt>>8&255,tt[q+3]=255&nt,q+=4,tt[q]=255&ot.charCodeAt(0),tt[q+1]=255&ot.charCodeAt(1),tt[q+2]=255&ot.charCodeAt(2),tt[q+3]=255&ot.charCodeAt(3),q+=4,tt.set(at,q),q+=at.length;const ut=function(ot,at,tt){let V=-1;for(let q=at;q<tt;q++)V=V>>>8^p[255&(V^ot[q])];return-1^V}(tt,V+4,q);tt[q]=ut>>24&255,tt[q+1]=ut>>16&255,tt[q+2]=ut>>8&255,tt[q+3]=255&ut}function Z(ot){let at=ot.length;const tt=65535,V=Math.ceil(at/tt),q=new Uint8Array(2+at+5*V+4);let nt=0;q[nt++]=120,q[nt++]=156;let ut=0;for(;at>tt;)q[nt++]=0,q[nt++]=255,q[nt++]=255,q[nt++]=0,q[nt++]=0,q.set(ot.subarray(ut,ut+tt),nt),nt+=tt,ut+=tt,at-=tt;q[nt++]=1,q[nt++]=255&at,q[nt++]=at>>8&255,q[nt++]=255&~at,q[nt++]=(65535&~at)>>8&255,q.set(ot.subarray(ut),nt),nt+=ot.length-ut;const pt=function(ot,at,tt){let V=1,q=0;for(let nt=0;nt<tt;++nt)V=(V+(255&ot[nt]))%65521,q=(q+V)%65521;return q<<16|V}(ot,0,ot.length);return q[nt++]=pt>>24&255,q[nt++]=pt>>16&255,q[nt++]=pt>>8&255,q[nt++]=255&pt,q}return function(at,tt,V){return function(ot,at,tt,V){const q=ot.width,nt=ot.height;let ut,pt,I;const d=ot.data;switch(at){case x.ImageKind.GRAYSCALE_1BPP:pt=0,ut=1,I=q+7>>3;break;case x.ImageKind.RGB_24BPP:pt=2,ut=8,I=3*q;break;case x.ImageKind.RGBA_32BPP:pt=6,ut=8,I=4*q;break;default:throw new Error("invalid format")}const l=new Uint8Array((1+I)*nt);let S=0,k=0;for(let Y=0;Y<nt;++Y)l[S++]=0,l.set(d.subarray(k,k+I),S),k+=I,S+=I;if(at===x.ImageKind.GRAYSCALE_1BPP&&V){S=0;for(let Y=0;Y<nt;Y++){S++;for(let Q=0;Q<I;Q++)l[S++]^=255}}const O=new Uint8Array([q>>24&255,q>>16&255,q>>8&255,255&q,nt>>24&255,nt>>16&255,nt>>8&255,255&nt,ut,pt,0,0,0]),L=function(ot){if(!z.isNodeJS)return Z(ot);try{let at;at=parseInt(process.versions.node)>=8?ot:Buffer.from(ot);const tt=__webpack_require__(2258).deflateSync(at,{level:9});return tt instanceof Uint8Array?tt:new Uint8Array(tt)}catch(at){(0,x.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+at)}return Z(ot)}(l),K=new Uint8Array(t.length+36+O.length+L.length);let lt=0;return K.set(t,lt),lt+=t.length,R("IHDR",O,K,lt),lt+=12+O.length,R("IDATA",L,K,lt),lt+=12+L.length,R("IEND",new Uint8Array(0),K,lt),y(K,"image/png",tt)}(at,void 0===at.kind?x.ImageKind.GRAYSCALE_1BPP:at.kind,tt,V)}}();class h{constructor(){this.fontSizeScale=1,this.fontWeight=F.fontWeight,this.fontSize=0,this.textMatrix=x.IDENTITY_MATRIX,this.fontMatrix=x.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=x.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=F.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(s,p){this.x=s,this.y=p}}let r=0,o=0,a=0;u.SVGGraphics=G=class{constructor(t,s,p=!1){(0,_.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new _.DOMSVGFactory,this.current=new h,this.transformMatrix=x.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=s,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!p,this._operatorIdMapping=[];for(const C in x.OPS)this._operatorIdMapping[x.OPS[C]]=C}getObject(t,s=null){return"string"==typeof t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):s}save(){this.transformStack.push(this.transformMatrix);const t=this.current;this.extraStack.push(t),this.current=t.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(t){this.save(),this.executeOpTree(t),this.restore()}loadDependencies(t){const s=t.fnArray,p=t.argsArray;for(let C=0,R=s.length;C<R;C++)if(s[C]===x.OPS.dependency)for(const g of p[C]){const P=g.startsWith("g_")?this.commonObjs:this.objs,Z=new Promise(dt=>{P.get(g,dt)});this.current.dependencies.push(Z)}return Promise.all(this.current.dependencies)}transform(t,s,p,C,R,g){this.transformMatrix=x.Util.transform(this.transformMatrix,[t,s,p,C,R,g]),this.tgrp=null}getSVG(t,s){this.viewport=s;const p=this._initialize(s);return this.loadDependencies(t).then(()=>(this.transformMatrix=x.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(t)),p))}convertOpList(t){const s=this._operatorIdMapping,p=t.argsArray,C=t.fnArray,R=[];for(let g=0,P=C.length;g<P;g++){const Z=C[g];R.push({fnId:Z,fn:s[Z],args:p[g]})}return c(R)}executeOpTree(t){for(const s of t){const p=s.fn,R=s.args;switch(0|s.fnId){case x.OPS.beginText:this.beginText();break;case x.OPS.dependency:break;case x.OPS.setLeading:this.setLeading(R);break;case x.OPS.setLeadingMoveText:this.setLeadingMoveText(R[0],R[1]);break;case x.OPS.setFont:this.setFont(R);break;case x.OPS.showText:case x.OPS.showSpacedText:this.showText(R[0]);break;case x.OPS.endText:this.endText();break;case x.OPS.moveText:this.moveText(R[0],R[1]);break;case x.OPS.setCharSpacing:this.setCharSpacing(R[0]);break;case x.OPS.setWordSpacing:this.setWordSpacing(R[0]);break;case x.OPS.setHScale:this.setHScale(R[0]);break;case x.OPS.setTextMatrix:this.setTextMatrix(R[0],R[1],R[2],R[3],R[4],R[5]);break;case x.OPS.setTextRise:this.setTextRise(R[0]);break;case x.OPS.setTextRenderingMode:this.setTextRenderingMode(R[0]);break;case x.OPS.setLineWidth:this.setLineWidth(R[0]);break;case x.OPS.setLineJoin:this.setLineJoin(R[0]);break;case x.OPS.setLineCap:this.setLineCap(R[0]);break;case x.OPS.setMiterLimit:this.setMiterLimit(R[0]);break;case x.OPS.setFillRGBColor:this.setFillRGBColor(R[0],R[1],R[2]);break;case x.OPS.setStrokeRGBColor:this.setStrokeRGBColor(R[0],R[1],R[2]);break;case x.OPS.setStrokeColorN:this.setStrokeColorN(R);break;case x.OPS.setFillColorN:this.setFillColorN(R);break;case x.OPS.shadingFill:this.shadingFill(R[0]);break;case x.OPS.setDash:this.setDash(R[0],R[1]);break;case x.OPS.setRenderingIntent:this.setRenderingIntent(R[0]);break;case x.OPS.setFlatness:this.setFlatness(R[0]);break;case x.OPS.setGState:this.setGState(R[0]);break;case x.OPS.fill:this.fill();break;case x.OPS.eoFill:this.eoFill();break;case x.OPS.stroke:this.stroke();break;case x.OPS.fillStroke:this.fillStroke();break;case x.OPS.eoFillStroke:this.eoFillStroke();break;case x.OPS.clip:this.clip("nonzero");break;case x.OPS.eoClip:this.clip("evenodd");break;case x.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case x.OPS.paintImageXObject:this.paintImageXObject(R[0]);break;case x.OPS.paintInlineImageXObject:this.paintInlineImageXObject(R[0]);break;case x.OPS.paintImageMaskXObject:this.paintImageMaskXObject(R[0]);break;case x.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(R[0],R[1]);break;case x.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case x.OPS.closePath:this.closePath();break;case x.OPS.closeStroke:this.closeStroke();break;case x.OPS.closeFillStroke:this.closeFillStroke();break;case x.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case x.OPS.nextLine:this.nextLine();break;case x.OPS.transform:this.transform(R[0],R[1],R[2],R[3],R[4],R[5]);break;case x.OPS.constructPath:this.constructPath(R[0],R[1]);break;case x.OPS.endPath:this.endPath();break;case 92:this.group(s.items);break;default:(0,x.warn)(`Unimplemented operator ${p}`)}}}setWordSpacing(t){this.current.wordSpacing=t}setCharSpacing(t){this.current.charSpacing=t}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(t,s,p,C,R,g){const P=this.current;P.textMatrix=P.lineMatrix=[t,s,p,C,R,g],P.textMatrixScale=Math.hypot(t,s),P.x=P.lineX=0,P.y=P.lineY=0,P.xcoords=[],P.ycoords=[],P.tspan=this.svgFactory.createElement("svg:tspan"),P.tspan.setAttributeNS(null,"font-family",P.fontFamily),P.tspan.setAttributeNS(null,"font-size",`${i(P.fontSize)}px`),P.tspan.setAttributeNS(null,"y",i(-P.y)),P.txtElement=this.svgFactory.createElement("svg:text"),P.txtElement.append(P.tspan)}beginText(){const t=this.current;t.x=t.lineX=0,t.y=t.lineY=0,t.textMatrix=x.IDENTITY_MATRIX,t.lineMatrix=x.IDENTITY_MATRIX,t.textMatrixScale=1,t.tspan=this.svgFactory.createElement("svg:tspan"),t.txtElement=this.svgFactory.createElement("svg:text"),t.txtgrp=this.svgFactory.createElement("svg:g"),t.xcoords=[],t.ycoords=[]}moveText(t,s){const p=this.current;p.x=p.lineX+=t,p.y=p.lineY+=s,p.xcoords=[],p.ycoords=[],p.tspan=this.svgFactory.createElement("svg:tspan"),p.tspan.setAttributeNS(null,"font-family",p.fontFamily),p.tspan.setAttributeNS(null,"font-size",`${i(p.fontSize)}px`),p.tspan.setAttributeNS(null,"y",i(-p.y))}showText(t){const s=this.current,p=s.font,C=s.fontSize;if(0===C)return;const R=s.fontSizeScale,g=s.charSpacing,P=s.wordSpacing,Z=s.fontDirection,dt=s.textHScale*Z,ot=p.vertical,at=ot?1:-1,tt=p.defaultVMetrics,V=C*s.fontMatrix[0];let q=0;for(const pt of t){if(null===pt){q+=Z*P;continue}if("number"==typeof pt){q+=at*pt*C/1e3;continue}const I=(pt.isSpace?P:0)+g,d=pt.fontChar;let l,S,O,k=pt.width;if(ot){let L;const H=pt.vmetric||tt;L=pt.vmetric?H[1]:.5*k,L=-L*V,k=H?-H[0]:k,l=L/R,S=(q+H[2]*V)/R}else l=q/R,S=0;(pt.isInFont||p.missingFile)&&(s.xcoords.push(s.x+l),ot&&s.ycoords.push(-s.y+S),s.tspan.textContent+=d),O=ot?k*V-I*Z:k*V+I*Z,q+=O}s.tspan.setAttributeNS(null,"x",s.xcoords.map(i).join(" ")),s.tspan.setAttributeNS(null,"y",ot?s.ycoords.map(i).join(" "):i(-s.y)),ot?s.y-=q:s.x+=q*dt,s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",`${i(s.fontSize)}px`),s.fontStyle!==F.fontStyle&&s.tspan.setAttributeNS(null,"font-style",s.fontStyle),s.fontWeight!==F.fontWeight&&s.tspan.setAttributeNS(null,"font-weight",s.fontWeight);const nt=s.textRenderingMode&x.TextRenderingMode.FILL_STROKE_MASK;nt===x.TextRenderingMode.FILL||nt===x.TextRenderingMode.FILL_STROKE?(s.fillColor!==F.fillColor&&s.tspan.setAttributeNS(null,"fill",s.fillColor),s.fillAlpha<1&&s.tspan.setAttributeNS(null,"fill-opacity",s.fillAlpha)):s.tspan.setAttributeNS(null,"fill",s.textRenderingMode===x.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),(nt===x.TextRenderingMode.STROKE||nt===x.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(s.tspan,1/(s.textMatrixScale||1));let ut=s.textMatrix;0!==s.textRise&&(ut=ut.slice(),ut[5]+=s.textRise),s.txtElement.setAttributeNS(null,"transform",`${e(ut)} scale(${i(dt)}, -1)`),s.txtElement.setAttributeNS(N,"xml:space","preserve"),s.txtElement.append(s.tspan),s.txtgrp.append(s.txtElement),this._ensureTransformGroup().append(s.txtElement)}setLeadingMoveText(t,s){this.setLeading(-s),this.moveText(t,s)}addFontStyle(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const s=y(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${t.loadedName}"; src: url(${s}); }\n`}setFont(t){const s=this.current,p=this.commonObjs.get(t[0]);let C=t[1];s.font=p,this.embedFonts&&!p.missingFile&&!this.embeddedFonts[p.loadedName]&&(this.addFontStyle(p),this.embeddedFonts[p.loadedName]=p),s.fontMatrix=p.fontMatrix||x.FONT_IDENTITY_MATRIX;let R="normal";p.black?R="900":p.bold&&(R="bold");const g=p.italic?"italic":"normal";C<0?(C=-C,s.fontDirection=-1):s.fontDirection=1,s.fontSize=C,s.fontFamily=p.loadedName,s.fontWeight=R,s.fontStyle=g,s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"y",i(-s.y)),s.xcoords=[],s.ycoords=[]}endText(){var s;const t=this.current;t.textRenderingMode&x.TextRenderingMode.ADD_TO_PATH_FLAG&&(null==(s=t.txtElement)?void 0:s.hasChildNodes())&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(t){t>0&&(this.current.lineWidth=t)}setLineCap(t){this.current.lineCap=A[t]}setLineJoin(t){this.current.lineJoin=T[t]}setMiterLimit(t){this.current.miterLimit=t}setStrokeAlpha(t){this.current.strokeAlpha=t}setStrokeRGBColor(t,s,p){this.current.strokeColor=x.Util.makeHexColor(t,s,p)}setFillAlpha(t){this.current.fillAlpha=t}setFillRGBColor(t,s,p){this.current.fillColor=x.Util.makeHexColor(t,s,p),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}shadingFill(t){const s=this.viewport.width,p=this.viewport.height,C=x.Util.inverseTransform(this.transformMatrix),R=x.Util.applyTransform([0,0],C),g=x.Util.applyTransform([0,p],C),P=x.Util.applyTransform([s,0],C),Z=x.Util.applyTransform([s,p],C),dt=Math.min(R[0],g[0],P[0],Z[0]),ot=Math.min(R[1],g[1],P[1],Z[1]),at=Math.max(R[0],g[0],P[0],Z[0]),tt=Math.max(R[1],g[1],P[1],Z[1]),V=this.svgFactory.createElement("svg:rect");V.setAttributeNS(null,"x",dt),V.setAttributeNS(null,"y",ot),V.setAttributeNS(null,"width",at-dt),V.setAttributeNS(null,"height",tt-ot),V.setAttributeNS(null,"fill",this._makeShadingPattern(t)),this.current.fillAlpha<1&&V.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(V)}_makeColorN_Pattern(t){return"TilingPattern"===t[0]?this._makeTilingPattern(t):this._makeShadingPattern(t)}_makeTilingPattern(t){const s=t[1],p=t[2],C=t[3]||x.IDENTITY_MATRIX,[R,g,P,Z]=t[4],dt=t[5],ot=t[6],at=t[7],tt="shading"+a++,[V,q,nt,ut]=x.Util.normalizeRect([...x.Util.applyTransform([R,g],C),...x.Util.applyTransform([P,Z],C)]),[pt,I]=x.Util.singularValueDecompose2dScale(C),d=dt*pt,l=ot*I,S=this.svgFactory.createElement("svg:pattern");S.setAttributeNS(null,"id",tt),S.setAttributeNS(null,"patternUnits","userSpaceOnUse"),S.setAttributeNS(null,"width",d),S.setAttributeNS(null,"height",l),S.setAttributeNS(null,"x",`${V}`),S.setAttributeNS(null,"y",`${q}`);const k=this.svg,O=this.transformMatrix,L=this.current.fillColor,H=this.current.strokeColor,K=this.svgFactory.create(nt-V,ut-q);if(this.svg=K,this.transformMatrix=C,2===at){const lt=x.Util.makeHexColor(...s);this.current.fillColor=lt,this.current.strokeColor=lt}return this.executeOpTree(this.convertOpList(p)),this.svg=k,this.transformMatrix=O,this.current.fillColor=L,this.current.strokeColor=H,S.append(K.childNodes[0]),this.defs.append(S),`url(#${tt})`}_makeShadingPattern(t){switch("string"==typeof t&&(t=this.objs.get(t)),t[0]){case"RadialAxial":const s="shading"+a++,p=t[3];let C;switch(t[1]){case"axial":const R=t[4],g=t[5];C=this.svgFactory.createElement("svg:linearGradient"),C.setAttributeNS(null,"id",s),C.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),C.setAttributeNS(null,"x1",R[0]),C.setAttributeNS(null,"y1",R[1]),C.setAttributeNS(null,"x2",g[0]),C.setAttributeNS(null,"y2",g[1]);break;case"radial":const P=t[4],Z=t[5],dt=t[6],ot=t[7];C=this.svgFactory.createElement("svg:radialGradient"),C.setAttributeNS(null,"id",s),C.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),C.setAttributeNS(null,"cx",Z[0]),C.setAttributeNS(null,"cy",Z[1]),C.setAttributeNS(null,"r",ot),C.setAttributeNS(null,"fx",P[0]),C.setAttributeNS(null,"fy",P[1]),C.setAttributeNS(null,"fr",dt);break;default:throw new Error(`Unknown RadialAxial type: ${t[1]}`)}for(const R of p){const g=this.svgFactory.createElement("svg:stop");g.setAttributeNS(null,"offset",R[0]),g.setAttributeNS(null,"stop-color",R[1]),C.append(g)}return this.defs.append(C),`url(#${s})`;case"Mesh":return(0,x.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${t[0]}`)}}setDash(t,s){this.current.dashArray=t,this.current.dashPhase=s}constructPath(t,s){const p=this.current;let C=p.x,R=p.y,g=[],P=0;for(const Z of t)switch(0|Z){case x.OPS.rectangle:C=s[P++],R=s[P++];const at=C+s[P++],tt=R+s[P++];g.push("M",i(C),i(R),"L",i(at),i(R),"L",i(at),i(tt),"L",i(C),i(tt),"Z");break;case x.OPS.moveTo:C=s[P++],R=s[P++],g.push("M",i(C),i(R));break;case x.OPS.lineTo:C=s[P++],R=s[P++],g.push("L",i(C),i(R));break;case x.OPS.curveTo:C=s[P+4],R=s[P+5],g.push("C",i(s[P]),i(s[P+1]),i(s[P+2]),i(s[P+3]),i(C),i(R)),P+=6;break;case x.OPS.curveTo2:g.push("C",i(C),i(R),i(s[P]),i(s[P+1]),i(s[P+2]),i(s[P+3])),C=s[P+2],R=s[P+3],P+=4;break;case x.OPS.curveTo3:C=s[P+2],R=s[P+3],g.push("C",i(s[P]),i(s[P+1]),i(C),i(R),i(C),i(R)),P+=4;break;case x.OPS.closePath:g.push("Z")}g=g.join(" "),p.path&&t.length>0&&t[0]!==x.OPS.rectangle&&t[0]!==x.OPS.moveTo?g=p.path.getAttributeNS(null,"d")+g:(p.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(p.path)),p.path.setAttributeNS(null,"d",g),p.path.setAttributeNS(null,"fill","none"),p.element=p.path,p.setCurrentPoint(C,R)}endPath(){const t=this.current;if(t.path=null,!this.pendingClip)return;if(!t.element)return void(this.pendingClip=null);const s="clippath"+r++,p=this.svgFactory.createElement("svg:clipPath");p.setAttributeNS(null,"id",s),p.setAttributeNS(null,"transform",e(this.transformMatrix));const C=t.element.cloneNode(!0);if(C.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,p.append(C),this.defs.append(p),t.activeClipUrl){t.clipGroup=null;for(const R of this.extraStack)R.clipGroup=null;p.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl=`url(#${s})`,this.tgrp=null}clip(t){this.pendingClip=t}closePath(){const t=this.current;if(t.path){const s=`${t.path.getAttributeNS(null,"d")}Z`;t.path.setAttributeNS(null,"d",s)}}setLeading(t){this.current.leading=-t}setTextRise(t){this.current.textRise=t}setTextRenderingMode(t){this.current.textRenderingMode=t}setHScale(t){this.current.textHScale=t/100}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[s,p]of t)switch(s){case"LW":this.setLineWidth(p);break;case"LC":this.setLineCap(p);break;case"LJ":this.setLineJoin(p);break;case"ML":this.setMiterLimit(p);break;case"D":this.setDash(p[0],p[1]);break;case"RI":this.setRenderingIntent(p);break;case"FL":this.setFlatness(p);break;case"Font":this.setFont(p);break;case"CA":this.setStrokeAlpha(p);break;case"ca":this.setFillAlpha(p);break;default:(0,x.warn)(`Unimplemented graphic state operator ${s}`)}}fill(){const t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())}stroke(){const t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(t,s=1){const p=this.current;let C=p.dashArray;1!==s&&C.length>0&&(C=C.map(function(R){return s*R})),t.setAttributeNS(null,"stroke",p.strokeColor),t.setAttributeNS(null,"stroke-opacity",p.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",i(p.miterLimit)),t.setAttributeNS(null,"stroke-linecap",p.lineCap),t.setAttributeNS(null,"stroke-linejoin",p.lineJoin),t.setAttributeNS(null,"stroke-width",i(s*p.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",C.map(i).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",i(s*p.dashPhase)+"px")}eoFill(){var t;null==(t=this.current.element)||t.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var t;null==(t=this.current.element)||t.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(t)}paintImageXObject(t){const s=this.getObject(t);s?this.paintInlineImageXObject(s):(0,x.warn)(`Dependent image with object ID ${t} is not ready yet`)}paintInlineImageXObject(t,s){const p=t.width,C=t.height,R=f(t,this.forceDataSchema,!!s),g=this.svgFactory.createElement("svg:rect");g.setAttributeNS(null,"x","0"),g.setAttributeNS(null,"y","0"),g.setAttributeNS(null,"width",i(p)),g.setAttributeNS(null,"height",i(C)),this.current.element=g,this.clip("nonzero");const P=this.svgFactory.createElement("svg:image");P.setAttributeNS(v,"xlink:href",R),P.setAttributeNS(null,"x","0"),P.setAttributeNS(null,"y",i(-C)),P.setAttributeNS(null,"width",i(p)+"px"),P.setAttributeNS(null,"height",i(C)+"px"),P.setAttributeNS(null,"transform",`scale(${i(1/p)} ${i(-1/C)})`),s?s.append(P):this._ensureTransformGroup().append(P)}paintImageMaskXObject(t){const s=this.getObject(t.data,t);if(s.bitmap)return void(0,x.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");const p=this.current,C=s.width,R=s.height,g=p.fillColor;p.maskId="mask"+o++;const P=this.svgFactory.createElement("svg:mask");P.setAttributeNS(null,"id",p.maskId);const Z=this.svgFactory.createElement("svg:rect");Z.setAttributeNS(null,"x","0"),Z.setAttributeNS(null,"y","0"),Z.setAttributeNS(null,"width",i(C)),Z.setAttributeNS(null,"height",i(R)),Z.setAttributeNS(null,"fill",g),Z.setAttributeNS(null,"mask",`url(#${p.maskId})`),this.defs.append(P),this._ensureTransformGroup().append(Z),this.paintInlineImageXObject(s,P)}paintFormXObjectBegin(t,s){if(Array.isArray(t)&&6===t.length&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),s){const p=s[2]-s[0],C=s[3]-s[1],R=this.svgFactory.createElement("svg:rect");R.setAttributeNS(null,"x",s[0]),R.setAttributeNS(null,"y",s[1]),R.setAttributeNS(null,"width",i(p)),R.setAttributeNS(null,"height",i(C)),this.current.element=R,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(t){const s=this.svgFactory.create(t.width,t.height),p=this.svgFactory.createElement("svg:defs");s.append(p),this.defs=p;const C=this.svgFactory.createElement("svg:g");return C.setAttributeNS(null,"transform",e(t.transform)),s.append(C),this.svg=C,s}_ensureClipGroup(){if(!this.current.clipGroup){const t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(t),this.current.clipGroup=t}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",e(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(rt,u,$)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFNodeStream=void 0;var _=$(1),x=$(32);const z=__webpack_require__(172),G=__webpack_require__(2001),F=__webpack_require__(3779),N=__webpack_require__(6558),v=/^file:\/\/\/[a-zA-Z]:\//;u.PDFNodeStream=class{constructor(a){this.source=a,this.url=function(o){const a=N.parse(o);return"file:"===a.protocol||a.host?a:/^[a-z]:[/\\]/i.test(o)?N.parse(`file:///${o}`):(a.host||(a.protocol="file:"),a)}(a.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&a.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var a,t;return null!=(t=null==(a=this._fullRequestReader)?void 0:a._loaded)?t:0}getFullReader(){return(0,_.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new e(this):new c(this),this._fullRequestReader}getRangeReader(a,t){if(t<=this._progressiveDataLength)return null;const s=this.isFsUrl?new r(this,a,t):new i(this,a,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(a){var t;null==(t=this._fullRequestReader)||t.cancel(a);for(const s of this._rangeRequestReaders.slice(0))s.cancel(a)}};class y{constructor(a){this._url=a.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=a.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=(0,_.createPromiseCapability)(),this._headersCapability=(0,_.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var a=this;return _asyncToGenerator(function*(){var p;if(yield a._readCapability.promise,a._done)return{value:void 0,done:!0};if(a._storedError)throw a._storedError;const t=a._readableStream.read();return null===t?(a._readCapability=(0,_.createPromiseCapability)(),a.read()):(a._loaded+=t.length,null==(p=a.onProgress)||p.call(a,{loaded:a._loaded,total:a._contentLength}),{value:new Uint8Array(t).buffer,done:!1})})()}cancel(a){this._readableStream?this._readableStream.destroy(a):this._error(a)}_error(a){this._storedError=a,this._readCapability.resolve()}_setReadableStream(a){this._readableStream=a,a.on("readable",()=>{this._readCapability.resolve()}),a.on("end",()=>{a.destroy(),this._done=!0,this._readCapability.resolve()}),a.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new _.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class f{constructor(a){this._url=a.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,_.createPromiseCapability)(),this._isStreamingSupported=!a.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var a=this;return _asyncToGenerator(function*(){var p;if(yield a._readCapability.promise,a._done)return{value:void 0,done:!0};if(a._storedError)throw a._storedError;const t=a._readableStream.read();return null===t?(a._readCapability=(0,_.createPromiseCapability)(),a.read()):(a._loaded+=t.length,null==(p=a.onProgress)||p.call(a,{loaded:a._loaded}),{value:new Uint8Array(t).buffer,done:!1})})()}cancel(a){this._readableStream?this._readableStream.destroy(a):this._error(a)}_error(a){this._storedError=a,this._readCapability.resolve()}_setReadableStream(a){this._readableStream=a,a.on("readable",()=>{this._readCapability.resolve()}),a.on("end",()=>{a.destroy(),this._done=!0,this._readCapability.resolve()}),a.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function h(o,a){return{protocol:o.protocol,auth:o.auth,host:o.hostname,port:o.port,path:o.path,method:"GET",headers:a}}class c extends y{constructor(a){super(a);const t=s=>{if(404===s.statusCode){const g=new _.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=g,void this._headersCapability.reject(g)}this._headersCapability.resolve(),this._setReadableStream(s);const p=g=>this._readableStream.headers[g.toLowerCase()],{allowRangeRequests:C,suggestedLength:R}=(0,x.validateRangeRequestCapabilities)({getResponseHeader:p,isHttp:a.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=C,this._contentLength=R||this._contentLength,this._filename=(0,x.extractFilenameFromHeader)(p)};this._request=null,this._request="http:"===this._url.protocol?G.request(h(this._url,a.httpHeaders),t):F.request(h(this._url,a.httpHeaders),t),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class i extends f{constructor(a,t,s){super(a),this._httpHeaders={};for(const C in a.httpHeaders){const R=a.httpHeaders[C];void 0!==R&&(this._httpHeaders[C]=R)}this._httpHeaders.Range=`bytes=${t}-${s-1}`;const p=C=>{if(404!==C.statusCode)this._setReadableStream(C);else{const R=new _.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=R}};this._request=null,this._request="http:"===this._url.protocol?G.request(h(this._url,this._httpHeaders),p):F.request(h(this._url,this._httpHeaders),p),this._request.on("error",C=>{this._storedError=C}),this._request.end()}}class e extends y{constructor(a){super(a);let t=decodeURIComponent(this._url.path);v.test(this._url.href)&&(t=t.replace(/^\//,"")),z.lstat(t,(s,p)=>{if(s)return"ENOENT"===s.code&&(s=new _.MissingPDFException(`Missing PDF "${t}".`)),this._storedError=s,void this._headersCapability.reject(s);this._contentLength=p.size,this._setReadableStream(z.createReadStream(t)),this._headersCapability.resolve()})}}class r extends f{constructor(a,t,s){super(a);let p=decodeURIComponent(this._url.path);v.test(this._url.href)&&(p=p.replace(/^\//,"")),this._setReadableStream(z.createReadStream(p,{start:t,end:s-1}))}}},(rt,u,$)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.createResponseStatusError=function(A,T){return 404===A||0===A&&T.startsWith("file:")?new _.MissingPDFException('Missing PDF "'+T+'".'):new _.UnexpectedResponseException(`Unexpected server response (${A}) while retrieving PDF "${T}".`,A)},u.extractFilenameFromHeader=function(A){const T=A("Content-Disposition");if(T){let y=(0,x.getFilenameFromContentDispositionHeader)(T);if(y.includes("%"))try{y=decodeURIComponent(y)}catch(f){}if((0,z.isPdfFile)(y))return y}return null},u.validateRangeRequestCapabilities=function({getResponseHeader:A,isHttp:T,rangeChunkSize:y,disableRange:f}){const h={allowRangeRequests:!1,suggestedLength:void 0},c=parseInt(A("Content-Length"),10);return!Number.isInteger(c)||(h.suggestedLength=c,c<=2*y)||f||!T||"bytes"!==A("Accept-Ranges")||"identity"!==(A("Content-Encoding")||"identity")||(h.allowRangeRequests=!0),h},u.validateResponseStatus=function(A){return 200===A||206===A};var _=$(1),x=$(33),z=$(6)},(rt,u,$)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.getFilenameFromContentDispositionHeader=function(z){let G=!0,F=N("filename\\*","i").exec(z);if(F){F=F[1];let c=y(F);return c=unescape(c),c=f(c),c=h(c),A(c)}if(F=function(c){const i=[];let e;const r=N("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(e=r.exec(c));){let[,a,t,s]=e;if(a=parseInt(a,10),a in i){if(0===a)break}else i[a]=[t,s]}const o=[];for(let a=0;a<i.length&&a in i;++a){let[t,s]=i[a];s=y(s),t&&(s=unescape(s),0===a&&(s=f(s))),o.push(s)}return o.join("")}(z),F)return A(h(F));if(F=N("filename","i").exec(z),F){F=F[1];let c=y(F);return c=h(c),A(c)}function N(c,i){return new RegExp("(?:^|;)\\s*"+c+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',i)}function v(c,i){if(c){if(!/^[\x00-\xFF]+$/.test(i))return i;try{const e=new TextDecoder(c,{fatal:!0}),r=(0,_.stringToBytes)(i);i=e.decode(r),G=!1}catch(e){}}return i}function A(c){return G&&/[\x80-\xff]/.test(c)&&(c=v("utf-8",c),G&&(c=v("iso-8859-1",c))),c}function y(c){if(c.startsWith('"')){const i=c.slice(1).split('\\"');for(let e=0;e<i.length;++e){const r=i[e].indexOf('"');-1!==r&&(i[e]=i[e].slice(0,r),i.length=e+1),i[e]=i[e].replace(/\\(.)/g,"$1")}c=i.join('"')}return c}function f(c){const i=c.indexOf("'");return-1===i?c:v(c.slice(0,i),c.slice(i+1).replace(/^[^']*'/,""))}function h(c){return!c.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(c)?c:c.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(i,e,r,o){if("q"===r||"Q"===r)return v(e,o=(o=o.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(a,t){return String.fromCharCode(parseInt(t,16))}));try{o=atob(o)}catch(a){}return v(e,o)})}return""};var _=$(1)},(rt,u,$)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFNetworkStream=void 0;var _=$(1),x=$(32);class N{constructor(f,h={}){this.url=f,this.isHttp=/^https?:/i.test(f),this.httpHeaders=this.isHttp&&h.httpHeaders||Object.create(null),this.withCredentials=h.withCredentials||!1,this.getXhr=h.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(f,h,c){const i={begin:f,end:h};for(const e in c)i[e]=c[e];return this.request(i)}requestFull(f){return this.request(f)}request(f){const h=this.getXhr(),c=this.currXhrId++,i=this.pendingRequests[c]={xhr:h};h.open("GET",this.url),h.withCredentials=this.withCredentials;for(const e in this.httpHeaders){const r=this.httpHeaders[e];void 0!==r&&h.setRequestHeader(e,r)}return this.isHttp&&"begin"in f&&"end"in f?(h.setRequestHeader("Range",`bytes=${f.begin}-${f.end-1}`),i.expectedStatus=206):i.expectedStatus=200,h.responseType="arraybuffer",f.onError&&(h.onerror=function(e){f.onError(h.status)}),h.onreadystatechange=this.onStateChange.bind(this,c),h.onprogress=this.onProgress.bind(this,c),i.onHeadersReceived=f.onHeadersReceived,i.onDone=f.onDone,i.onError=f.onError,i.onProgress=f.onProgress,h.send(null),c}onProgress(f,h){var i;const c=this.pendingRequests[f];!c||null==(i=c.onProgress)||i.call(c,h)}onStateChange(f,h){var a,t,s;const c=this.pendingRequests[f];if(!c)return;const i=c.xhr;if(i.readyState>=2&&c.onHeadersReceived&&(c.onHeadersReceived(),delete c.onHeadersReceived),4!==i.readyState||!(f in this.pendingRequests))return;if(delete this.pendingRequests[f],0===i.status&&this.isHttp)return void(null==(a=c.onError)||a.call(c,i.status));const e=i.status||200;if((200!==e||206!==c.expectedStatus)&&e!==c.expectedStatus)return void(null==(t=c.onError)||t.call(c,i.status));const o=function(y){const f=y.response;return"string"!=typeof f?f:(0,_.stringToBytes)(f).buffer}(i);if(206===e){const p=i.getResponseHeader("Content-Range"),C=/bytes (\d+)-(\d+)\/(\d+)/.exec(p);c.onDone({begin:parseInt(C[1],10),chunk:o})}else o?c.onDone({begin:0,chunk:o}):null==(s=c.onError)||s.call(c,i.status)}getRequestXhr(f){return this.pendingRequests[f].xhr}isPendingRequest(f){return f in this.pendingRequests}abortRequest(f){const h=this.pendingRequests[f].xhr;delete this.pendingRequests[f],h.abort()}}u.PDFNetworkStream=class{constructor(f){this._source=f,this._manager=new N(f.url,{httpHeaders:f.httpHeaders,withCredentials:f.withCredentials}),this._rangeChunkSize=f.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(f){const h=this._rangeRequestReaders.indexOf(f);h>=0&&this._rangeRequestReaders.splice(h,1)}getFullReader(){return(0,_.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new A(this._manager,this._source),this._fullRequestReader}getRangeReader(f,h){const c=new T(this._manager,f,h);return c.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(c),c}cancelAllRequests(f){var h;null==(h=this._fullRequestReader)||h.cancel(f);for(const c of this._rangeRequestReaders.slice(0))c.cancel(f)}};class A{constructor(f,h){this._manager=f;const c={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=h.url,this._fullRequestId=f.requestFull(c),this._headersReceivedCapability=(0,_.createPromiseCapability)(),this._disableRange=h.disableRange||!1,this._contentLength=h.length,this._rangeChunkSize=h.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const f=this._fullRequestId,h=this._manager.getRequestXhr(f),c=r=>h.getResponseHeader(r),{allowRangeRequests:i,suggestedLength:e}=(0,x.validateRangeRequestCapabilities)({getResponseHeader:c,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=e||this._contentLength,this._filename=(0,x.extractFilenameFromHeader)(c),this._isRangeSupported&&this._manager.abortRequest(f),this._headersReceivedCapability.resolve()}_onDone(f){if(f&&(this._requests.length>0?this._requests.shift().resolve({value:f.chunk,done:!1}):this._cachedChunks.push(f.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(f){this._storedError=(0,x.createResponseStatusError)(f,this._url),this._headersReceivedCapability.reject(this._storedError);for(const h of this._requests)h.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(f){var h;null==(h=this.onProgress)||h.call(this,{loaded:f.loaded,total:f.lengthComputable?f.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var f=this;return _asyncToGenerator(function*(){if(f._storedError)throw f._storedError;if(f._cachedChunks.length>0)return{value:f._cachedChunks.shift(),done:!1};if(f._done)return{value:void 0,done:!0};const h=(0,_.createPromiseCapability)();return f._requests.push(h),h.promise})()}cancel(f){this._done=!0,this._headersReceivedCapability.reject(f);for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class T{constructor(f,h,c){this._manager=f;const i={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=f.url,this._requestId=f.requestRange(h,c,i),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var f;null==(f=this.onClosed)||f.call(this,this)}_onDone(f){const h=f.chunk;this._requests.length>0?this._requests.shift().resolve({value:h,done:!1}):this._queuedChunk=h,this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(f){this._storedError=(0,x.createResponseStatusError)(f,this._url);for(const h of this._requests)h.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(f){var h;this.isStreamingSupported||null==(h=this.onProgress)||h.call(this,{loaded:f.loaded})}get isStreamingSupported(){return!1}read(){var f=this;return _asyncToGenerator(function*(){if(f._storedError)throw f._storedError;if(null!==f._queuedChunk){const c=f._queuedChunk;return f._queuedChunk=null,{value:c,done:!1}}if(f._done)return{value:void 0,done:!0};const h=(0,_.createPromiseCapability)();return f._requests.push(h),h.promise})()}cancel(f){this._done=!0;for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(rt,u,$)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFFetchStream=void 0;var _=$(1),x=$(32);function z(A,T,y){return{method:"GET",headers:A,signal:y.signal,mode:"cors",credentials:T?"include":"same-origin",redirect:"follow"}}function G(A){const T=new Headers;for(const y in A){const f=A[y];void 0!==f&&T.append(y,f)}return T}u.PDFFetchStream=class{constructor(T){this.source=T,this.isHttp=/^https?:/i.test(T.url),this.httpHeaders=this.isHttp&&T.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var T,y;return null!=(y=null==(T=this._fullRequestReader)?void 0:T._loaded)?y:0}getFullReader(){return(0,_.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new N(this),this._fullRequestReader}getRangeReader(T,y){if(y<=this._progressiveDataLength)return null;const f=new v(this,T,y);return this._rangeRequestReaders.push(f),f}cancelAllRequests(T){var y;null==(y=this._fullRequestReader)||y.cancel(T);for(const f of this._rangeRequestReaders.slice(0))f.cancel(T)}};class N{constructor(T){this._stream=T,this._reader=null,this._loaded=0,this._filename=null;const y=T.source;this._withCredentials=y.withCredentials||!1,this._contentLength=y.length,this._headersCapability=(0,_.createPromiseCapability)(),this._disableRange=y.disableRange||!1,this._rangeChunkSize=y.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._headers=G(this._stream.httpHeaders);const f=y.url;fetch(f,z(this._headers,this._withCredentials,this._abortController)).then(h=>{if(!(0,x.validateResponseStatus)(h.status))throw(0,x.createResponseStatusError)(h.status,f);this._reader=h.body.getReader(),this._headersCapability.resolve();const c=r=>h.headers.get(r),{allowRangeRequests:i,suggestedLength:e}=(0,x.validateRangeRequestCapabilities)({getResponseHeader:c,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=i,this._contentLength=e||this._contentLength,this._filename=(0,x.extractFilenameFromHeader)(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new _.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var T=this;return _asyncToGenerator(function*(){var c;yield T._headersCapability.promise;const{value:y,done:f}=yield T._reader.read();return f?{value:y,done:f}:(T._loaded+=y.byteLength,null==(c=T.onProgress)||c.call(T,{loaded:T._loaded,total:T._contentLength}),{value:new Uint8Array(y).buffer,done:!1})})()}cancel(T){var y;null==(y=this._reader)||y.cancel(T),this._abortController.abort()}}class v{constructor(T,y,f){this._stream=T,this._reader=null,this._loaded=0;const h=T.source;this._withCredentials=h.withCredentials||!1,this._readCapability=(0,_.createPromiseCapability)(),this._isStreamingSupported=!h.disableStream,this._abortController=new AbortController,this._headers=G(this._stream.httpHeaders),this._headers.append("Range",`bytes=${y}-${f-1}`);const c=h.url;fetch(c,z(this._headers,this._withCredentials,this._abortController)).then(i=>{if(!(0,x.validateResponseStatus)(i.status))throw(0,x.createResponseStatusError)(i.status,c);this._readCapability.resolve(),this._reader=i.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var T=this;return _asyncToGenerator(function*(){var c;yield T._readCapability.promise;const{value:y,done:f}=yield T._reader.read();return f?{value:y,done:f}:(T._loaded+=y.byteLength,null==(c=T.onProgress)||c.call(T,{loaded:T._loaded}),{value:new Uint8Array(y).buffer,done:!1})})()}cancel(T){var y;null==(y=this._reader)||y.cancel(T),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(rt){var u=__webpack_module_cache__[rt];if(void 0!==u)return u.exports;var $=__webpack_module_cache__[rt]={exports:{}};return __webpack_modules__[rt]($,$.exports,__w_pdfjs_require__),$.exports}var __webpack_exports__={};return(()=>{var rt=__webpack_exports__;Object.defineProperty(rt,"__esModule",{value:!0}),Object.defineProperty(rt,"AnnotationEditorLayer",{enumerable:!0,get:function(){return x.AnnotationEditorLayer}}),Object.defineProperty(rt,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return u.AnnotationEditorParamsType}}),Object.defineProperty(rt,"AnnotationEditorType",{enumerable:!0,get:function(){return u.AnnotationEditorType}}),Object.defineProperty(rt,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return z.AnnotationEditorUIManager}}),Object.defineProperty(rt,"AnnotationLayer",{enumerable:!0,get:function(){return G.AnnotationLayer}}),Object.defineProperty(rt,"AnnotationMode",{enumerable:!0,get:function(){return u.AnnotationMode}}),Object.defineProperty(rt,"CMapCompressionType",{enumerable:!0,get:function(){return u.CMapCompressionType}}),Object.defineProperty(rt,"GlobalWorkerOptions",{enumerable:!0,get:function(){return F.GlobalWorkerOptions}}),Object.defineProperty(rt,"InvalidPDFException",{enumerable:!0,get:function(){return u.InvalidPDFException}}),Object.defineProperty(rt,"MissingPDFException",{enumerable:!0,get:function(){return u.MissingPDFException}}),Object.defineProperty(rt,"OPS",{enumerable:!0,get:function(){return u.OPS}}),Object.defineProperty(rt,"PDFDataRangeTransport",{enumerable:!0,get:function(){return $.PDFDataRangeTransport}}),Object.defineProperty(rt,"PDFDateString",{enumerable:!0,get:function(){return _.PDFDateString}}),Object.defineProperty(rt,"PDFWorker",{enumerable:!0,get:function(){return $.PDFWorker}}),Object.defineProperty(rt,"PasswordResponses",{enumerable:!0,get:function(){return u.PasswordResponses}}),Object.defineProperty(rt,"PermissionFlag",{enumerable:!0,get:function(){return u.PermissionFlag}}),Object.defineProperty(rt,"PixelsPerInch",{enumerable:!0,get:function(){return _.PixelsPerInch}}),Object.defineProperty(rt,"RenderingCancelledException",{enumerable:!0,get:function(){return _.RenderingCancelledException}}),Object.defineProperty(rt,"SVGGraphics",{enumerable:!0,get:function(){return A.SVGGraphics}}),Object.defineProperty(rt,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return u.UNSUPPORTED_FEATURES}}),Object.defineProperty(rt,"UnexpectedResponseException",{enumerable:!0,get:function(){return u.UnexpectedResponseException}}),Object.defineProperty(rt,"Util",{enumerable:!0,get:function(){return u.Util}}),Object.defineProperty(rt,"VerbosityLevel",{enumerable:!0,get:function(){return u.VerbosityLevel}}),Object.defineProperty(rt,"XfaLayer",{enumerable:!0,get:function(){return T.XfaLayer}}),Object.defineProperty(rt,"build",{enumerable:!0,get:function(){return $.build}}),Object.defineProperty(rt,"createPromiseCapability",{enumerable:!0,get:function(){return u.createPromiseCapability}}),Object.defineProperty(rt,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return u.createValidAbsoluteUrl}}),Object.defineProperty(rt,"getDocument",{enumerable:!0,get:function(){return $.getDocument}}),Object.defineProperty(rt,"getFilenameFromUrl",{enumerable:!0,get:function(){return _.getFilenameFromUrl}}),Object.defineProperty(rt,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return _.getPdfFilenameFromUrl}}),Object.defineProperty(rt,"getXfaPageViewport",{enumerable:!0,get:function(){return _.getXfaPageViewport}}),Object.defineProperty(rt,"isPdfFile",{enumerable:!0,get:function(){return _.isPdfFile}}),Object.defineProperty(rt,"loadScript",{enumerable:!0,get:function(){return _.loadScript}}),Object.defineProperty(rt,"renderTextLayer",{enumerable:!0,get:function(){return v.renderTextLayer}}),Object.defineProperty(rt,"shadow",{enumerable:!0,get:function(){return u.shadow}}),Object.defineProperty(rt,"version",{enumerable:!0,get:function(){return $.version}});var u=__w_pdfjs_require__(1),$=__w_pdfjs_require__(2),_=__w_pdfjs_require__(6),x=__w_pdfjs_require__(21),z=__w_pdfjs_require__(5),G=__w_pdfjs_require__(26),F=__w_pdfjs_require__(14),N=__w_pdfjs_require__(12),v=__w_pdfjs_require__(29),A=__w_pdfjs_require__(30),T=__w_pdfjs_require__(28);if(N.isNodeJS){const{PDFNodeStream:h}=__w_pdfjs_require__(31);(0,$.setPDFNetworkStreamFactory)(c=>new h(c))}else{const{PDFNetworkStream:h}=__w_pdfjs_require__(34),{PDFFetchStream:c}=__w_pdfjs_require__(35);(0,$.setPDFNetworkStreamFactory)(i=>(0,_.isValidFetchUrl)(i.url)?new c(i):new h(i))}})(),__webpack_exports__})(),module.exports=$()},7394:(rt,u,$)=>{"use strict";$.r(u),$.d(u,{ContractHomeModule:()=>e});var _=$(8583);function x(r,o,a,t,s,p,C){try{var R=r[p](C),g=R.value}catch(P){return void a(P)}R.done?o(g):Promise.resolve(g).then(t,s)}var G=$(8552),F=$(8720),N=$(2389);const v=["myCanvas"],A=function(){return["../check"]},T=function(){return["../date"]},y=function(){return["../text"]};G.GlobalWorkerOptions.workerSrc||(G.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${G.version}/pdf.worker.js`);const c=[{path:"",component:(()=>{class r{constructor(){}ngOnInit(){this.initRun()}readBlob(a){return new Promise((t,s)=>{const p=new FileReader;p.addEventListener("load",()=>t(p.result)),p.addEventListener("error",s),p.readAsDataURL(a)})}initRun(){var a=this;return function(r){return function(){var o=this,a=arguments;return new Promise(function(t,s){var p=r.apply(o,a);function C(g){x(p,t,s,C,R,"next",g)}function R(g){x(p,t,s,C,R,"throw",g)}C(void 0)})}}(function*(){if(localStorage.getItem("pdfFile")){a.pdfData=localStorage.getItem("pdfFile"),a.data=atob(a.pdfData.substring("data:application/pdf;base64,".length));const p=yield(yield(0,G.getDocument)(`{data: ${a.data}}`).promise).getPage(1),C=p.getViewport({scale:window.devicePixelRatio});var t=document.getElementById("pdf-canvas");const R=t.getContext("2d");t.height=C.height,t.width=C.width,p.render({canvasContext:R,viewport:C})}})()}}return r.\u0275fac=function(a){return new(a||r)},r.\u0275cmp=F.Xpm({type:r,selectors:[["app-contract-home"]],viewQuery:function(a,t){if(1&a&&F.Gf(v,5),2&a){let s;F.iGM(s=F.CRH())&&(t.canvas=s.first)}},decls:20,vars:8,consts:[[1,"head"],[1,"page"],["src","assets/images/m-prev.png","alt",""],["src","assets/images/m-next.png","alt",""],[1,"btnFinish"],[3,"routerLink"],["id","filePdf","type","file","accept","application/pdf","placeholder","\u9078\u64c7PDF\u6a94\u6848"],["id","pdf-canvas",2,"border","1px solid #000"],[1,"functionArea"],["src","assets/images/signin.png","alt",""],["src","assets/images/check.png","alt",""],["src","assets/images/date.png","alt",""],["src","assets/images/inputText.png","alt",""]],template:function(a,t){1&a&&(F.TgZ(0,"div",0),F.TgZ(1,"div",1),F._UZ(2,"img",2),F.TgZ(3,"h2"),F._uU(4,"1 / 2"),F.qZA(),F._UZ(5,"img",3),F.qZA(),F.TgZ(6,"div",4),F.TgZ(7,"a",5),F._uU(8,"\u5b8c\u6210\u7c3d\u7f72"),F.qZA(),F.qZA(),F.qZA(),F._UZ(9,"input",6),F._UZ(10,"canvas",7),F.TgZ(11,"div",8),F.TgZ(12,"a",5),F._UZ(13,"img",9),F.qZA(),F.TgZ(14,"a",5),F._UZ(15,"img",10),F.qZA(),F.TgZ(16,"a",5),F._UZ(17,"img",11),F.qZA(),F.TgZ(18,"a",5),F._UZ(19,"img",12),F.qZA(),F.qZA()),2&a&&(F.xp6(7),F.Q6J("routerLink","/#/save"),F.xp6(5),F.Q6J("routerLink","../signin"),F.xp6(2),F.Q6J("routerLink",F.DdM(5,A)),F.xp6(2),F.Q6J("routerLink",F.DdM(6,T)),F.xp6(2),F.Q6J("routerLink",F.DdM(7,y)))},directives:[N.yS],styles:['@media only screen and (max-width: 375px){.head[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:12px 16px;grid-gap:10px;gap:10px}.page[_ngcontent-%COMP%]{flex:none;order:0;flex-grow:0;display:flex}.btnFinish[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:10px;grid-gap:10px;gap:10px;width:130px;height:58px;background:linear-gradient(180deg,#35A483 0%,#077854 100%);border-radius:16px;flex:none;order:1;flex-grow:0}.btnFinish[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:72px;height:26px;font-family:"Noto Sans TC";font-style:normal;font-weight:400;font-size:18px;line-height:26px;color:#fff}.functionArea[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:12px 16px;grid-gap:8px;gap:8px;width:343px;height:72px;background:#FFFFFF;border-radius:16px;flex:none;order:0;flex-grow:0}}']}),r})()}];let i=(()=>{class r{}return r.\u0275fac=function(a){return new(a||r)},r.\u0275mod=F.oAB({type:r}),r.\u0275inj=F.cJS({imports:[[N.Bz.forChild(c)],N.Bz]}),r})(),e=(()=>{class r{}return r.\u0275fac=function(a){return new(a||r)},r.\u0275mod=F.oAB({type:r}),r.\u0275inj=F.cJS({imports:[[_.ez,i]]}),r})()},1052:rt=>{function u(_,x,z,G,F,N,v){try{var A=_[N](v),T=A.value}catch(y){return void z(y)}A.done?x(T):Promise.resolve(T).then(G,F)}rt.exports=function(_){return function(){var x=this,z=arguments;return new Promise(function(G,F){var N=_.apply(x,z);function v(T){u(N,G,F,v,A,"next",T)}function A(T){u(N,G,F,v,A,"throw",T)}v(void 0)})}},rt.exports.default=rt.exports,rt.exports.__esModule=!0},3414:()=>{},172:()=>{},2001:()=>{},3779:()=>{},6558:()=>{},2258:()=>{}}]);